!function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t={exports:{}},n={},r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var a=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,l=o(e),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))i.call(n,c)&&(l[c]=n[c]);if(r){a=r(n);for(var h=0;h<a.length;h++)s.call(n,a[h])&&(l[a[h]]=n[a[h]])}}return l},l=a,u=60103,c=60106;n.Fragment=60107,n.StrictMode=60108,n.Profiler=60114;var h=60109,f=60110,d=60112;n.Suspense=60113;var p=60115,m=60116;if("function"==typeof Symbol&&Symbol.for){var g=Symbol.for;u=g("react.element"),c=g("react.portal"),n.Fragment=g("react.fragment"),n.StrictMode=g("react.strict_mode"),n.Profiler=g("react.profiler"),h=g("react.provider"),f=g("react.context"),d=g("react.forward_ref"),n.Suspense=g("react.suspense"),p=g("react.memo"),m=g("react.lazy")}var y="function"==typeof Symbol&&Symbol.iterator;function v(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function E(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||w}function S(){}function k(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||w}E.prototype.isReactComponent={},E.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(v(85));this.updater.enqueueSetState(this,e,t,"setState")},E.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},S.prototype=E.prototype;var x=k.prototype=new S;x.constructor=k,l(x,E.prototype),x.isPureReactComponent=!0;var T={current:null},C=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r,i={},s=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)C.call(t,r)&&!I.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return{$$typeof:u,type:e,key:s,ref:o,props:i,_owner:T.current}}function N(e){return"object"==typeof e&&null!==e&&e.$$typeof===u}var D=/\/+/g;function L(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var o=!1;if(null===e)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case u:case c:o=!0}}if(o)return i=i(o=e),e=""===r?"."+L(o,0):r,Array.isArray(i)?(n="",null!=e&&(n=e.replace(D,"$&/")+"/"),A(i,t,n,"",(function(e){return e}))):null!=i&&(N(i)&&(i=function(e,t){return{$$typeof:u,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(D,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=""===r?".":r+":",Array.isArray(e))for(var a=0;a<e.length;a++){var l=r+L(s=e[a],a);o+=A(s,t,n,l,i)}else if("function"==typeof(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=y&&e[y]||e["@@iterator"])?e:null}(e)))for(e=l.call(e),a=0;!(s=e.next()).done;)o+=A(s=s.value,t,n,l=r+L(s,a++),i);else if("object"===s)throw t=""+e,Error(v(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return o}function O(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var P={current:null};function M(){var e=P.current;if(null===e)throw Error(v(321));return e}var F={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:T,IsSomeRendererActing:{current:!1},assign:l};n.Children={map:O,forEach:function(e,t,n){O(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return O(e,(function(){t++})),t},toArray:function(e){return O(e,(function(e){return e}))||[]},only:function(e){if(!N(e))throw Error(v(143));return e}},n.Component=E,n.PureComponent=k,n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,n.cloneElement=function(e,t,n){if(null==e)throw Error(v(267,e));var r=l({},e.props),i=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=T.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)C.call(t,c)&&!I.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==a?a[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=n;else if(1<c){a=Array(c);for(var h=0;h<c;h++)a[h]=arguments[h+2];r.children=a}return{$$typeof:u,type:e.type,key:i,ref:s,props:r,_owner:o}},n.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:h,_context:e},e.Consumer=e},n.createElement=_,n.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},n.createRef=function(){return{current:null}},n.forwardRef=function(e){return{$$typeof:d,render:e}},n.isValidElement=N,n.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:R}},n.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},n.useCallback=function(e,t){return M().useCallback(e,t)},n.useContext=function(e,t){return M().useContext(e,t)},n.useDebugValue=function(){},n.useEffect=function(e,t){return M().useEffect(e,t)},n.useImperativeHandle=function(e,t,n){return M().useImperativeHandle(e,t,n)},n.useLayoutEffect=function(e,t){return M().useLayoutEffect(e,t)},n.useMemo=function(e,t){return M().useMemo(e,t)},n.useReducer=function(e,t,n){return M().useReducer(e,t,n)},n.useRef=function(e){return M().useRef(e)},n.useState=function(e){return M().useState(e)},n.version="17.0.2",t.exports=n;var U=t.exports,V={exports:{}},j={},B={exports:{}},q={};!function(e){var t,n,r,i;if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var l=null,u=null,c=function(){if(null!==l)try{var t=e.unstable_now();l(!0,t),l=null}catch(e){throw setTimeout(c,0),e}};t=function(e){null!==l?setTimeout(t,0,e):(l=e,setTimeout(c,0))},n=function(e,t){u=setTimeout(e,t)},r=function(){clearTimeout(u)},e.unstable_shouldYield=function(){return!1},i=e.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,f=window.clearTimeout,d=!1,p=null,m=-1,g=5,y=0;e.unstable_shouldYield=function(){return e.unstable_now()>=y},i=function(){},e.unstable_forceFrameRate=function(e){0>e||125<e||(g=0<e?Math.floor(1e3/e):5)};var v=new MessageChannel,w=v.port2;v.port1.onmessage=function(){if(null!==p){var t=e.unstable_now();y=t+g;try{p(!0,t)?w.postMessage(null):(d=!1,p=null)}catch(e){throw w.postMessage(null),e}}else d=!1},t=function(e){p=e,d||(d=!0,w.postMessage(null))},n=function(t,n){m=h((function(){t(e.unstable_now())}),n)},r=function(){f(m),m=-1}}function b(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<k(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var s=2*(r+1)-1,o=e[s],a=s+1,l=e[a];if(void 0!==o&&0>k(o,n))void 0!==l&&0>k(l,o)?(e[r]=l,e[a]=n,r=a):(e[r]=o,e[s]=n,r=s);else{if(!(void 0!==l&&0>k(l,n)))break e;e[r]=l,e[a]=n,r=a}}}return t}return null}function k(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var x=[],T=[],C=1,I=null,_=3,N=!1,D=!1,L=!1;function A(e){for(var t=E(T);null!==t;){if(null===t.callback)S(T);else{if(!(t.startTime<=e))break;S(T),t.sortIndex=t.expirationTime,b(x,t)}t=E(T)}}function O(e){if(L=!1,A(e),!D)if(null!==E(x))D=!0,t(R);else{var r=E(T);null!==r&&n(O,r.startTime-e)}}function R(t,i){D=!1,L&&(L=!1,r()),N=!0;var s=_;try{for(A(i),I=E(x);null!==I&&(!(I.expirationTime>i)||t&&!e.unstable_shouldYield());){var o=I.callback;if("function"==typeof o){I.callback=null,_=I.priorityLevel;var a=o(I.expirationTime<=i);i=e.unstable_now(),"function"==typeof a?I.callback=a:I===E(x)&&S(x),A(i)}else S(x);I=E(x)}if(null!==I)var l=!0;else{var u=E(T);null!==u&&n(O,u.startTime-i),l=!1}return l}finally{I=null,_=s,N=!1}}var P=i;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){D||N||(D=!0,t(R))},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_getFirstCallbackNode=function(){return E(x)},e.unstable_next=function(e){switch(_){case 1:case 2:case 3:var t=3;break;default:t=_}var n=_;_=t;try{return e()}finally{_=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=P,e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=_;_=e;try{return t()}finally{_=n}},e.unstable_scheduleCallback=function(i,s,o){var a=e.unstable_now();switch("object"==typeof o&&null!==o?o="number"==typeof(o=o.delay)&&0<o?a+o:a:o=a,i){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return i={id:C++,callback:s,priorityLevel:i,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>a?(i.sortIndex=o,b(T,i),null===E(x)&&i===E(T)&&(L?r():L=!0,n(O,o-a))):(i.sortIndex=l,b(x,i),D||N||(D=!0,t(R))),i},e.unstable_wrapCallback=function(e){var t=_;return function(){var n=_;_=t;try{return e.apply(this,arguments)}finally{_=n}}}}(q),B.exports=q;var z=t.exports,$=a,H=B.exports;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!z)throw Error(K(227));var W=new Set,G={};function Q(e,t){Y(e,t),Y(e+"Capture",t)}function Y(e,t){for(G[e]=t,e=0;e<t.length;e++)W.add(t[e])}var X=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),J=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Z=Object.prototype.hasOwnProperty,ee={},te={};function ne(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){re[e]=new ne(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];re[t]=new ne(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){re[e]=new ne(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){re[e]=new ne(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){re[e]=new ne(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){re[e]=new ne(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){re[e]=new ne(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){re[e]=new ne(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){re[e]=new ne(e,5,!1,e.toLowerCase(),null,!1,!1)}));var ie=/[\-:]([a-z])/g;function se(e){return e[1].toUpperCase()}function oe(e,t,n,r){var i=re.hasOwnProperty(t)?re[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!Z.call(te,e)||!Z.call(ee,e)&&(J.test(e)?te[e]=!0:(ee[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(ie,se);re[t]=new ne(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(ie,se);re[t]=new ne(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(ie,se);re[t]=new ne(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){re[e]=new ne(e,1,!1,e.toLowerCase(),null,!1,!1)})),re.xlinkHref=new ne("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){re[e]=new ne(e,1,!1,e.toLowerCase(),null,!0,!0)}));var ae=z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,le=60103,ue=60106,ce=60107,he=60108,fe=60114,de=60109,pe=60110,me=60112,ge=60113,ye=60120,ve=60115,we=60116,be=60121,Ee=60128,Se=60129,ke=60130,xe=60131;if("function"==typeof Symbol&&Symbol.for){var Te=Symbol.for;le=Te("react.element"),ue=Te("react.portal"),ce=Te("react.fragment"),he=Te("react.strict_mode"),fe=Te("react.profiler"),de=Te("react.provider"),pe=Te("react.context"),me=Te("react.forward_ref"),ge=Te("react.suspense"),ye=Te("react.suspense_list"),ve=Te("react.memo"),we=Te("react.lazy"),be=Te("react.block"),Te("react.scope"),Ee=Te("react.opaque.id"),Se=Te("react.debug_trace_mode"),ke=Te("react.offscreen"),xe=Te("react.legacy_hidden")}var Ce,Ie="function"==typeof Symbol&&Symbol.iterator;function _e(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Ie&&e[Ie]||e["@@iterator"])?e:null}function Ne(e){if(void 0===Ce)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Ce=t&&t[1]||""}return"\n"+Ce+e}var De=!1;function Le(e,t){if(!e||De)return"";De=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=a);break}}}finally{De=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ne(e):""}function Ae(e){switch(e.tag){case 5:return Ne(e.type);case 16:return Ne("Lazy");case 13:return Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 2:case 15:return e=Le(e.type,!1);case 11:return e=Le(e.type.render,!1);case 22:return e=Le(e.type._render,!1);case 1:return e=Le(e.type,!0);default:return""}}function Oe(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ce:return"Fragment";case ue:return"Portal";case fe:return"Profiler";case he:return"StrictMode";case ge:return"Suspense";case ye:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case pe:return(e.displayName||"Context")+".Consumer";case de:return(e._context.displayName||"Context")+".Provider";case me:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case ve:return Oe(e.type);case be:return Oe(e._render);case we:t=e._payload,e=e._init;try{return Oe(e(t))}catch(e){}}return null}function Re(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Pe(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Me(e){e._valueTracker||(e._valueTracker=function(e){var t=Pe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Fe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Pe(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Ue(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Ve(e,t){var n=t.checked;return $({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function je(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Re(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Be(e,t){null!=(t=t.checked)&&oe(e,"checked",t,!1)}function qe(e,t){Be(e,t);var n=Re(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?$e(e,t.type,n):t.hasOwnProperty("defaultValue")&&$e(e,t.type,Re(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ze(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function $e(e,t,n){"number"===t&&Ue(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function He(e,t){return e=$({children:void 0},t),(t=function(e){var t="";return z.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ke(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Re(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function We(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(K(91));return $({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ge(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(K(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(K(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Re(n)}}function Qe(e,t){var n=Re(t.value),r=Re(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Ye(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Xe="http://www.w3.org/1999/xhtml",Je="http://www.w3.org/2000/svg";function Ze(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function et(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Ze(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var tt,nt,rt=(nt=function(e,t){if(e.namespaceURI!==Je||"innerHTML"in e)e.innerHTML=t;else{for((tt=tt||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=tt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return nt(e,t)}))}:nt);function it(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var st={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ot=["Webkit","ms","Moz","O"];function at(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||st.hasOwnProperty(e)&&st[e]?(""+t).trim():t+"px"}function lt(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=at(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(st).forEach((function(e){ot.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),st[t]=st[e]}))}));var ut=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ct(e,t){if(t){if(ut[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(K(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(K(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(K(62))}}function ht(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ft(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var dt=null,pt=null,mt=null;function gt(e){if(e=ji(e)){if("function"!=typeof dt)throw Error(K(280));var t=e.stateNode;t&&(t=qi(t),dt(e.stateNode,e.type,t))}}function yt(e){pt?mt?mt.push(e):mt=[e]:pt=e}function vt(){if(pt){var e=pt,t=mt;if(mt=pt=null,gt(e),t)for(e=0;e<t.length;e++)gt(t[e])}}function wt(e,t){return e(t)}function bt(e,t,n,r,i){return e(t,n,r,i)}function Et(){}var St=wt,kt=!1,xt=!1;function Tt(){null===pt&&null===mt||(Et(),vt())}function Ct(e,t){var n=e.stateNode;if(null===n)return null;var r=qi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(K(231,t,typeof n));return n}var It=!1;if(X)try{var _t={};Object.defineProperty(_t,"passive",{get:function(){It=!0}}),window.addEventListener("test",_t,_t),window.removeEventListener("test",_t,_t)}catch(nt){It=!1}function Nt(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var Dt=!1,Lt=null,At=!1,Ot=null,Rt={onError:function(e){Dt=!0,Lt=e}};function Pt(e,t,n,r,i,s,o,a,l){Dt=!1,Lt=null,Nt.apply(Rt,arguments)}function Mt(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ft(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ut(e){if(Mt(e)!==e)throw Error(K(188))}function Vt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Mt(e)))throw Error(K(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ut(i),e;if(s===r)return Ut(i),t;s=s.sibling}throw Error(K(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(3!==n.tag)throw Error(K(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function jt(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var Bt,qt,zt,$t,Ht=!1,Kt=[],Wt=null,Gt=null,Qt=null,Yt=new Map,Xt=new Map,Jt=[],Zt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function en(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function tn(e,t){switch(e){case"focusin":case"focusout":Wt=null;break;case"dragenter":case"dragleave":Gt=null;break;case"mouseover":case"mouseout":Qt=null;break;case"pointerover":case"pointerout":Yt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xt.delete(t.pointerId)}}function nn(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e=en(t,n,r,i,s),null!==t&&(null!==(t=ji(t))&&qt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function rn(e){var t=Vi(e.target);if(null!==t){var n=Mt(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ft(n)))return e.blockedOn=t,void $t(e.lanePriority,(function(){H.unstable_runWithPriority(e.priority,(function(){zt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function sn(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=jn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ji(n))&&qt(t),e.blockedOn=n,!1;t.shift()}return!0}function on(e,t,n){sn(e)&&n.delete(t)}function an(){for(Ht=!1;0<Kt.length;){var e=Kt[0];if(null!==e.blockedOn){null!==(e=ji(e.blockedOn))&&Bt(e);break}for(var t=e.targetContainers;0<t.length;){var n=jn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&Kt.shift()}null!==Wt&&sn(Wt)&&(Wt=null),null!==Gt&&sn(Gt)&&(Gt=null),null!==Qt&&sn(Qt)&&(Qt=null),Yt.forEach(on),Xt.forEach(on)}function ln(e,t){e.blockedOn===t&&(e.blockedOn=null,Ht||(Ht=!0,H.unstable_scheduleCallback(H.unstable_NormalPriority,an)))}function un(e){function t(t){return ln(t,e)}if(0<Kt.length){ln(Kt[0],e);for(var n=1;n<Kt.length;n++){var r=Kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Wt&&ln(Wt,e),null!==Gt&&ln(Gt,e),null!==Qt&&ln(Qt,e),Yt.forEach(t),Xt.forEach(t),n=0;n<Jt.length;n++)(r=Jt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Jt.length&&null===(n=Jt[0]).blockedOn;)rn(n),null===n.blockedOn&&Jt.shift()}function cn(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hn={animationend:cn("Animation","AnimationEnd"),animationiteration:cn("Animation","AnimationIteration"),animationstart:cn("Animation","AnimationStart"),transitionend:cn("Transition","TransitionEnd")},fn={},dn={};function pn(e){if(fn[e])return fn[e];if(!hn[e])return e;var t,n=hn[e];for(t in n)if(n.hasOwnProperty(t)&&t in dn)return fn[e]=n[t];return e}X&&(dn=document.createElement("div").style,"AnimationEvent"in window||(delete hn.animationend.animation,delete hn.animationiteration.animation,delete hn.animationstart.animation),"TransitionEvent"in window||delete hn.transitionend.transition);var mn=pn("animationend"),gn=pn("animationiteration"),yn=pn("animationstart"),vn=pn("transitionend"),wn=new Map,bn=new Map,En=["abort","abort",mn,"animationEnd",gn,"animationIteration",yn,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",vn,"transitionEnd","waiting","waiting"];function Sn(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),bn.set(r,t),wn.set(r,i),Q(i,[r])}}(0,H.unstable_now)();var kn=8;function xn(e){if(0!=(1&e))return kn=15,1;if(0!=(2&e))return kn=14,2;if(0!=(4&e))return kn=13,4;var t=24&e;return 0!==t?(kn=12,t):0!=(32&e)?(kn=11,32):0!==(t=192&e)?(kn=10,t):0!=(256&e)?(kn=9,256):0!==(t=3584&e)?(kn=8,t):0!=(4096&e)?(kn=7,4096):0!==(t=4186112&e)?(kn=6,t):0!==(t=62914560&e)?(kn=5,t):67108864&e?(kn=4,67108864):0!=(134217728&e)?(kn=3,134217728):0!==(t=805306368&e)?(kn=2,t):0!=(1073741824&e)?(kn=1,1073741824):(kn=8,e)}function Tn(e,t){var n=e.pendingLanes;if(0===n)return kn=0;var r=0,i=0,s=e.expiredLanes,o=e.suspendedLanes,a=e.pingedLanes;if(0!==s)r=s,i=kn=15;else if(0!==(s=134217727&n)){var l=s&~o;0!==l?(r=xn(l),i=kn):0!==(a&=s)&&(r=xn(a),i=kn)}else 0!==(s=n&~o)?(r=xn(s),i=kn):0!==a&&(r=xn(a),i=kn);if(0===r)return 0;if(r=n&((0>(r=31-Ln(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&o)){if(xn(t),i<=kn)return t;kn=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Ln(t)),r|=e[n],t&=~i;return r}function Cn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function In(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=_n(24&~t))?In(10,t):e;case 10:return 0===(e=_n(192&~t))?In(8,t):e;case 8:return 0===(e=_n(3584&~t))&&(0===(e=_n(4186112&~t))&&(e=512)),e;case 2:return 0===(t=_n(805306368&~t))&&(t=268435456),t}throw Error(K(358,e))}function _n(e){return e&-e}function Nn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Dn(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Ln(t)]=n}var Ln=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(An(e)/On|0)|0},An=Math.log,On=Math.LN2;var Rn=H.unstable_UserBlockingPriority,Pn=H.unstable_runWithPriority,Mn=!0;function Fn(e,t,n,r){kt||Et();var i=Vn,s=kt;kt=!0;try{bt(i,e,t,n,r)}finally{(kt=s)||Tt()}}function Un(e,t,n,r){Pn(Rn,Vn.bind(null,e,t,n,r))}function Vn(e,t,n,r){var i;if(Mn)if((i=0==(4&t))&&0<Kt.length&&-1<Zt.indexOf(e))e=en(null,e,t,n,r),Kt.push(e);else{var s=jn(e,t,n,r);if(null===s)i&&tn(e,r);else{if(i){if(-1<Zt.indexOf(e))return e=en(s,e,t,n,r),void Kt.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return Wt=nn(Wt,e,t,n,r,i),!0;case"dragenter":return Gt=nn(Gt,e,t,n,r,i),!0;case"mouseover":return Qt=nn(Qt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Yt.set(s,nn(Yt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Xt.set(s,nn(Xt.get(s)||null,e,t,n,r,i)),!0}return!1}(s,e,t,n,r))return;tn(e,r)}vi(e,t,r,null,n)}}}function jn(e,t,n,r){var i=ft(r);if(null!==(i=Vi(i))){var s=Mt(i);if(null===s)i=null;else{var o=s.tag;if(13===o){if(null!==(i=Ft(s)))return i;i=null}else if(3===o){if(s.stateNode.hydrate)return 3===s.tag?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return vi(e,t,r,i,n),null}var Bn=null,qn=null,zn=null;function $n(){if(zn)return zn;var e,t,n=qn,r=n.length,i="value"in Bn?Bn.value:Bn.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return zn=i.slice(e,1<t?1-t:void 0)}function Hn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kn(){return!0}function Wn(){return!1}function Gn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Kn:Wn,this.isPropagationStopped=Wn,this}return $(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kn)},persist:function(){},isPersistent:Kn}),t}var Qn,Yn,Xn,Jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zn=Gn(Jn),er=$({},Jn,{view:0,detail:0}),tr=Gn(er),nr=$({},er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xn&&(Xn&&"mousemove"===e.type?(Qn=e.screenX-Xn.screenX,Yn=e.screenY-Xn.screenY):Yn=Qn=0,Xn=e),Qn)},movementY:function(e){return"movementY"in e?e.movementY:Yn}}),rr=Gn(nr),ir=Gn($({},nr,{dataTransfer:0})),sr=Gn($({},er,{relatedTarget:0})),or=Gn($({},Jn,{animationName:0,elapsedTime:0,pseudoElement:0})),ar=Gn($({},Jn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),lr=Gn($({},Jn,{data:0})),ur={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hr[e])&&!!t[e]}function dr(){return fr}var pr=Gn($({},er,{key:function(e){if(e.key){var t=ur[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Hn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?cr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dr,charCode:function(e){return"keypress"===e.type?Hn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Hn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mr=Gn($({},nr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gr=Gn($({},er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dr})),yr=Gn($({},Jn,{propertyName:0,elapsedTime:0,pseudoElement:0})),vr=Gn($({},nr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wr=[9,13,27,32],br=X&&"CompositionEvent"in window,Er=null;X&&"documentMode"in document&&(Er=document.documentMode);var Sr=X&&"TextEvent"in window&&!Er,kr=X&&(!br||Er&&8<Er&&11>=Er),xr=String.fromCharCode(32),Tr=!1;function Cr(e,t){switch(e){case"keyup":return-1!==wr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ir(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var _r=!1;var Nr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Nr[e.type]:"textarea"===t}function Lr(e,t,n,r){yt(r),0<(t=bi(t,"onChange")).length&&(n=new Zn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ar=null,Or=null;function Rr(e){fi(e,0)}function Pr(e){if(Fe(Bi(e)))return e}function Mr(e,t){if("change"===e)return t}var Fr=!1;if(X){var Ur;if(X){var Vr="oninput"in document;if(!Vr){var jr=document.createElement("div");jr.setAttribute("oninput","return;"),Vr="function"==typeof jr.oninput}Ur=Vr}else Ur=!1;Fr=Ur&&(!document.documentMode||9<document.documentMode)}function Br(){Ar&&(Ar.detachEvent("onpropertychange",qr),Or=Ar=null)}function qr(e){if("value"===e.propertyName&&Pr(Or)){var t=[];if(Lr(t,Or,e,ft(e)),e=Rr,kt)e(t);else{kt=!0;try{wt(e,t)}finally{kt=!1,Tt()}}}}function zr(e,t,n){"focusin"===e?(Br(),Or=n,(Ar=t).attachEvent("onpropertychange",qr)):"focusout"===e&&Br()}function $r(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Pr(Or)}function Hr(e,t){if("click"===e)return Pr(t)}function Kr(e,t){if("input"===e||"change"===e)return Pr(t)}var Wr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Gr=Object.prototype.hasOwnProperty;function Qr(e,t){if(Wr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Gr.call(t,n[r])||!Wr(e[n[r]],t[n[r]]))return!1;return!0}function Yr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xr(e,t){var n,r=Yr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Yr(r)}}function Jr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Jr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Zr(){for(var e=window,t=Ue();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Ue((e=t.contentWindow).document)}return t}function ei(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ti=X&&"documentMode"in document&&11>=document.documentMode,ni=null,ri=null,ii=null,si=!1;function oi(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;si||null==ni||ni!==Ue(r)||("selectionStart"in(r=ni)&&ei(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ii&&Qr(ii,r)||(ii=r,0<(r=bi(ri,"onSelect")).length&&(t=new Zn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ni)))}Sn("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Sn("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Sn(En,2);for(var ai="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),li=0;li<ai.length;li++)bn.set(ai[li],0);Y("onMouseEnter",["mouseout","mouseover"]),Y("onMouseLeave",["mouseout","mouseover"]),Y("onPointerEnter",["pointerout","pointerover"]),Y("onPointerLeave",["pointerout","pointerover"]),Q("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Q("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Q("onBeforeInput",["compositionend","keypress","textInput","paste"]),Q("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Q("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Q("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ui="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ci=new Set("cancel close invalid load scroll toggle".split(" ").concat(ui));function hi(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,o,a,l){if(Pt.apply(this,arguments),Dt){if(!Dt)throw Error(K(198));var u=Lt;Dt=!1,Lt=null,At||(At=!0,Ot=u)}}(r,t,void 0,e),e.currentTarget=null}function fi(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;hi(i,a,u),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;hi(i,a,u),s=l}}}if(At)throw e=Ot,At=!1,Ot=null,e}function di(e,t){var n=zi(t),r=e+"__bubble";n.has(r)||(yi(t,e,2,!1),n.add(r))}var pi="_reactListening"+Math.random().toString(36).slice(2);function mi(e){e[pi]||(e[pi]=!0,W.forEach((function(t){ci.has(t)||gi(t,!1,e,null),gi(t,!0,e,null)})))}function gi(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=n;if("selectionchange"===e&&9!==n.nodeType&&(s=n.ownerDocument),null!==r&&!t&&ci.has(e)){if("scroll"!==e)return;i|=2,s=r}var o=zi(s),a=e+"__"+(t?"capture":"bubble");o.has(a)||(t&&(i|=4),yi(s,e,i,t),o.add(a))}function yi(e,t,n,r){var i=bn.get(t);switch(void 0===i?2:i){case 0:i=Fn;break;case 1:i=Un;break;default:i=Vn}n=i.bind(null,t,n,e),i=void 0,!It||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function vi(e,t,n,r,i){var s=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=Vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}!function(e,t,n){if(xt)return e(t,n);xt=!0;try{St(e,t,n)}finally{xt=!1,Tt()}}((function(){var r=s,i=ft(n),o=[];e:{var a=wn.get(e);if(void 0!==a){var l=Zn,u=e;switch(e){case"keypress":if(0===Hn(n))break e;case"keydown":case"keyup":l=pr;break;case"focusin":u="focus",l=sr;break;case"focusout":u="blur",l=sr;break;case"beforeblur":case"afterblur":l=sr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=rr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=ir;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=gr;break;case mn:case gn:case yn:l=or;break;case vn:l=yr;break;case"scroll":l=tr;break;case"wheel":l=vr;break;case"copy":case"cut":case"paste":l=ar;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=mr}var c=0!=(4&t),h=!c&&"scroll"===e,f=c?null!==a?a+"Capture":null:a;c=[];for(var d,p=r;null!==p;){var m=(d=p).stateNode;if(5===d.tag&&null!==m&&(d=m,null!==f&&(null!=(m=Ct(p,f))&&c.push(wi(p,m,d)))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(u=n.relatedTarget||n.fromElement)||!Vi(u)&&!u[Fi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?Vi(u):null)&&(u!==(h=Mt(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=rr,m="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=mr,m="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==l?a:Bi(l),d=null==u?a:Bi(u),(a=new c(m,p+"leave",l,n,i)).target=h,a.relatedTarget=d,m=null,Vi(i)===r&&((c=new c(f,p+"enter",u,n,i)).target=d,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(f=u,p=0,d=c=l;d;d=Ei(d))p++;for(d=0,m=f;m;m=Ei(m))d++;for(;0<p-d;)c=Ei(c),p--;for(;0<d-p;)f=Ei(f),d--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=Ei(c),f=Ei(f)}c=null}else c=null;null!==l&&Si(o,a,l,c,!1),null!==u&&null!==h&&Si(o,h,u,c,!0)}if("select"===(l=(a=r?Bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Mr;else if(Dr(a))if(Fr)g=Kr;else{g=$r;var y=zr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=Hr);switch(g&&(g=g(e,r))?Lr(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&$e(a,"number",a.value)),y=r?Bi(r):window,e){case"focusin":(Dr(y)||"true"===y.contentEditable)&&(ni=y,ri=r,ii=null);break;case"focusout":ii=ri=ni=null;break;case"mousedown":si=!0;break;case"contextmenu":case"mouseup":case"dragend":si=!1,oi(o,n,i);break;case"selectionchange":if(ti)break;case"keydown":case"keyup":oi(o,n,i)}var v;if(br)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else _r?Cr(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(kr&&"ko"!==n.locale&&(_r||"onCompositionStart"!==w?"onCompositionEnd"===w&&_r&&(v=$n()):(qn="value"in(Bn=i)?Bn.value:Bn.textContent,_r=!0)),0<(y=bi(r,w)).length&&(w=new lr(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=Ir(n))&&(w.data=v))),(v=Sr?function(e,t){switch(e){case"compositionend":return Ir(t);case"keypress":return 32!==t.which?null:(Tr=!0,xr);case"textInput":return(e=t.data)===xr&&Tr?null:e;default:return null}}(e,n):function(e,t){if(_r)return"compositionend"===e||!br&&Cr(e,t)?(e=$n(),zn=qn=Bn=null,_r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kr&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=bi(r,"onBeforeInput")).length&&(i=new lr("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}fi(o,t)}))}function wi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function bi(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ct(e,n))&&r.unshift(wi(e,s,i)),null!=(s=Ct(e,t))&&r.push(wi(e,s,i))),e=e.return}return r}function Ei(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Si(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Ct(n,s))&&o.unshift(wi(n,l,a)):i||null!=(l=Ct(n,s))&&o.push(wi(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function ki(){}var xi=null,Ti=null;function Ci(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ii(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var _i="function"==typeof setTimeout?setTimeout:void 0,Ni="function"==typeof clearTimeout?clearTimeout:void 0;function Di(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Ai(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Oi=0;var Ri=Math.random().toString(36).slice(2),Pi="__reactFiber$"+Ri,Mi="__reactProps$"+Ri,Fi="__reactContainer$"+Ri,Ui="__reactEvents$"+Ri;function Vi(e){var t=e[Pi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Fi]||n[Pi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ai(e);null!==e;){if(n=e[Pi])return n;e=Ai(e)}return t}n=(e=n).parentNode}return null}function ji(e){return!(e=e[Pi]||e[Fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(K(33))}function qi(e){return e[Mi]||null}function zi(e){var t=e[Ui];return void 0===t&&(t=e[Ui]=new Set),t}var $i=[],Hi=-1;function Ki(e){return{current:e}}function Wi(e){0>Hi||(e.current=$i[Hi],$i[Hi]=null,Hi--)}function Gi(e,t){Hi++,$i[Hi]=e.current,e.current=t}var Qi={},Yi=Ki(Qi),Xi=Ki(!1),Ji=Qi;function Zi(e,t){var n=e.type.contextTypes;if(!n)return Qi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function es(e){return null!=(e=e.childContextTypes)}function ts(){Wi(Xi),Wi(Yi)}function ns(e,t,n){if(Yi.current!==Qi)throw Error(K(168));Gi(Yi,t),Gi(Xi,n)}function rs(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(K(108,Oe(t)||"Unknown",i));return $({},n,r)}function is(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qi,Ji=Yi.current,Gi(Yi,e),Gi(Xi,Xi.current),!0}function ss(e,t,n){var r=e.stateNode;if(!r)throw Error(K(169));n?(e=rs(e,t,Ji),r.__reactInternalMemoizedMergedChildContext=e,Wi(Xi),Wi(Yi),Gi(Yi,e)):Wi(Xi),Gi(Xi,n)}var os=null,as=null,ls=H.unstable_runWithPriority,us=H.unstable_scheduleCallback,cs=H.unstable_cancelCallback,hs=H.unstable_shouldYield,fs=H.unstable_requestPaint,ds=H.unstable_now,ps=H.unstable_getCurrentPriorityLevel,ms=H.unstable_ImmediatePriority,gs=H.unstable_UserBlockingPriority,ys=H.unstable_NormalPriority,vs=H.unstable_LowPriority,ws=H.unstable_IdlePriority,bs={},Es=void 0!==fs?fs:function(){},Ss=null,ks=null,xs=!1,Ts=ds(),Cs=1e4>Ts?ds:function(){return ds()-Ts};function Is(){switch(ps()){case ms:return 99;case gs:return 98;case ys:return 97;case vs:return 96;case ws:return 95;default:throw Error(K(332))}}function _s(e){switch(e){case 99:return ms;case 98:return gs;case 97:return ys;case 96:return vs;case 95:return ws;default:throw Error(K(332))}}function Ns(e,t){return e=_s(e),ls(e,t)}function Ds(e,t,n){return e=_s(e),us(e,t,n)}function Ls(){if(null!==ks){var e=ks;ks=null,cs(e)}As()}function As(){if(!xs&&null!==Ss){xs=!0;var e=0;try{var t=Ss;Ns(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ss=null}catch(t){throw null!==Ss&&(Ss=Ss.slice(e+1)),us(ms,Ls),t}finally{xs=!1}}}var Os=ae.ReactCurrentBatchConfig;function Rs(e,t){if(e&&e.defaultProps){for(var n in t=$({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ps=Ki(null),Ms=null,Fs=null,Us=null;function Vs(){Us=Fs=Ms=null}function js(e){var t=Ps.current;Wi(Ps),e.type._context._currentValue=t}function Bs(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function qs(e,t){Ms=e,Us=Fs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(ba=!0),e.firstContext=null)}function zs(e,t){if(Us!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Us=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Fs){if(null===Ms)throw Error(K(308));Fs=t,Ms.dependencies={lanes:0,firstContext:t,responders:null}}else Fs=Fs.next=t;return e._currentValue}var $s=!1;function Hs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Ks(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ws(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Gs(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function Qs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ys(e,t,n,r){var i=e.updateQueue;$s=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;if(null!==c){var h=(c=c.updateQueue).lastBaseUpdate;h!==o&&(null===h?c.firstBaseUpdate=u:h.next=u,c.lastBaseUpdate=l)}}if(null!==s){for(h=i.baseState,o=0,c=u=l=null;;){a=s.lane;var f=s.eventTime;if((r&a)===a){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var d=e,p=s;switch(a=t,f=n,p.tag){case 1:if("function"==typeof(d=p.payload)){h=d.call(f,h,a);break e}h=d;break e;case 3:d.flags=-4097&d.flags|64;case 0:if(null==(a="function"==typeof(d=p.payload)?d.call(f,h,a):d))break e;h=$({},h,a);break e;case 2:$s=!0}}null!==s.callback&&(e.flags|=32,null===(a=i.effects)?i.effects=[s]:a.push(s))}else f={eventTime:f,lane:a,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,o|=a;if(null===(s=s.next)){if(null===(a=i.shared.pending))break;s=a.next,a.next=null,i.lastBaseUpdate=a,i.shared.pending=null}}null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,kl|=o,e.lanes=o,e.memoizedState=h}}function Xs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(K(191,i));i.call(r)}}}var Js=(new z.Component).refs;function Zs(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:$({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var eo={isMounted:function(e){return!!(e=e._reactInternals)&&Mt(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Gl(),i=Ql(e),s=Ws(r,i);s.payload=t,null!=n&&(s.callback=n),Gs(e,s),Yl(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Gl(),i=Ql(e),s=Ws(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),Gs(e,s),Yl(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gl(),r=Ql(e),i=Ws(n,r);i.tag=2,null!=t&&(i.callback=t),Gs(e,i),Yl(e,r,n)}};function to(e,t,n,r,i,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!Qr(n,r)||!Qr(i,s))}function no(e,t,n){var r=!1,i=Qi,s=t.contextType;return"object"==typeof s&&null!==s?s=zs(s):(i=es(t)?Ji:Yi.current,s=(r=null!=(r=t.contextTypes))?Zi(e,i):Qi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=eo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ro(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&eo.enqueueReplaceState(t,t.state,null)}function io(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Js,Hs(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=zs(s):(s=es(t)?Ji:Yi.current,i.context=Zi(e,s)),Ys(e,n,i,r),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(Zs(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&eo.enqueueReplaceState(i,i.state,null),Ys(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var so=Array.isArray;function oo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===Js&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(K(284));if(!n._owner)throw Error(K(290,e))}return e}function ao(e,t){if("textarea"!==e.type)throw Error(K(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function lo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=_u(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function o(t){return e&&null===t.alternate&&(t.flags=2),t}function a(e,t,n,r){return null===t||6!==t.tag?((t=Au(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=oo(e,t,n),r.return=e,r):((r=Nu(n.type,n.key,n.props,null,e.mode,r)).ref=oo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ou(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function c(e,t,n,r,s){return null===t||7!==t.tag?((t=Du(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Au(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case le:return(n=Nu(t.type,t.key,t.props,null,e.mode,n)).ref=oo(e,null,t),n.return=e,n;case ue:return(t=Ou(t,e.mode,n)).return=e,t}if(so(t)||_e(t))return(t=Du(t,e.mode,n,null)).return=e,t;ao(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:a(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case le:return n.key===i?n.type===ce?c(e,t,n.props.children,r,i):l(e,t,n,r):null;case ue:return n.key===i?u(e,t,n,r):null}if(so(n)||_e(n))return null!==i?null:c(e,t,n,r,null);ao(e,n)}return null}function d(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return a(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case le:return e=e.get(null===r.key?n:r.key)||null,r.type===ce?c(t,e,r.props.children,i,r.key):l(t,e,r,i);case ue:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(so(r)||_e(r))return c(t,e=e.get(n)||null,r,i,null);ao(t,r)}return null}function p(i,o,a,l){for(var u=null,c=null,p=o,m=o=0,g=null;null!==p&&m<a.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var y=f(i,p,a[m],l);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(i,p),o=s(y,o,m),null===c?u=y:c.sibling=y,c=y,p=g}if(m===a.length)return n(i,p),u;if(null===p){for(;m<a.length;m++)null!==(p=h(i,a[m],l))&&(o=s(p,o,m),null===c?u=p:c.sibling=p,c=p);return u}for(p=r(i,p);m<a.length;m++)null!==(g=d(p,i,m,a[m],l))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),o=s(g,o,m),null===c?u=g:c.sibling=g,c=g);return e&&p.forEach((function(e){return t(i,e)})),u}function m(i,o,a,l){var u=_e(a);if("function"!=typeof u)throw Error(K(150));if(null==(a=u.call(a)))throw Error(K(151));for(var c=u=null,p=o,m=o=0,g=null,y=a.next();null!==p&&!y.done;m++,y=a.next()){p.index>m?(g=p,p=null):g=p.sibling;var v=f(i,p,y.value,l);if(null===v){null===p&&(p=g);break}e&&p&&null===v.alternate&&t(i,p),o=s(v,o,m),null===c?u=v:c.sibling=v,c=v,p=g}if(y.done)return n(i,p),u;if(null===p){for(;!y.done;m++,y=a.next())null!==(y=h(i,y.value,l))&&(o=s(y,o,m),null===c?u=y:c.sibling=y,c=y);return u}for(p=r(i,p);!y.done;m++,y=a.next())null!==(y=d(p,i,m,y.value,l))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),o=s(y,o,m),null===c?u=y:c.sibling=y,c=y);return e&&p.forEach((function(e){return t(i,e)})),u}return function(e,r,s,a){var l="object"==typeof s&&null!==s&&s.type===ce&&null===s.key;l&&(s=s.props.children);var u="object"==typeof s&&null!==s;if(u)switch(s.$$typeof){case le:e:{for(u=s.key,l=r;null!==l;){if(l.key===u){switch(l.tag){case 7:if(s.type===ce){n(e,l.sibling),(r=i(l,s.props.children)).return=e,e=r;break e}break;default:if(l.elementType===s.type){n(e,l.sibling),(r=i(l,s.props)).ref=oo(e,l,s),r.return=e,e=r;break e}}n(e,l);break}t(e,l),l=l.sibling}s.type===ce?((r=Du(s.props.children,e.mode,a,s.key)).return=e,e=r):((a=Nu(s.type,s.key,s.props,null,e.mode,a)).ref=oo(e,r,s),a.return=e,e=a)}return o(e);case ue:e:{for(l=s.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===s.containerInfo&&r.stateNode.implementation===s.implementation){n(e,r.sibling),(r=i(r,s.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ou(s,e.mode,a)).return=e,e=r}return o(e)}if("string"==typeof s||"number"==typeof s)return s=""+s,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,s)).return=e,e=r):(n(e,r),(r=Au(s,e.mode,a)).return=e,e=r),o(e);if(so(s))return p(e,r,s,a);if(_e(s))return m(e,r,s,a);if(u&&ao(e,s),void 0===s&&!l)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(K(152,Oe(e.type)||"Component"))}return n(e,r)}}var uo=lo(!0),co=lo(!1),ho={},fo=Ki(ho),po=Ki(ho),mo=Ki(ho);function go(e){if(e===ho)throw Error(K(174));return e}function yo(e,t){switch(Gi(mo,t),Gi(po,e),Gi(fo,ho),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:et(null,"");break;default:t=et(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Wi(fo),Gi(fo,t)}function vo(){Wi(fo),Wi(po),Wi(mo)}function wo(e){go(mo.current);var t=go(fo.current),n=et(t,e.type);t!==n&&(Gi(po,e),Gi(fo,n))}function bo(e){po.current===e&&(Wi(fo),Wi(po))}var Eo=Ki(0);function So(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ko=null,xo=null,To=!1;function Co(e,t){var n=Cu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Io(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function _o(e){if(To){var t=xo;if(t){var n=t;if(!Io(e,t)){if(!(t=Li(n.nextSibling))||!Io(e,t))return e.flags=-1025&e.flags|2,To=!1,void(ko=e);Co(ko,n)}ko=e,xo=Li(t.firstChild)}else e.flags=-1025&e.flags|2,To=!1,ko=e}}function No(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ko=e}function Do(e){if(e!==ko)return!1;if(!To)return No(e),To=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ii(t,e.memoizedProps))for(t=xo;t;)Co(e,t),t=Li(t.nextSibling);if(No(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){xo=Li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}xo=null}}else xo=ko?Li(e.stateNode.nextSibling):null;return!0}function Lo(){xo=ko=null,To=!1}var Ao=[];function Oo(){for(var e=0;e<Ao.length;e++)Ao[e]._workInProgressVersionPrimary=null;Ao.length=0}var Ro=ae.ReactCurrentDispatcher,Po=ae.ReactCurrentBatchConfig,Mo=0,Fo=null,Uo=null,Vo=null,jo=!1,Bo=!1;function qo(){throw Error(K(321))}function zo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Wr(e[n],t[n]))return!1;return!0}function $o(e,t,n,r,i,s){if(Mo=s,Fo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ro.current=null===e||null===e.memoizedState?ga:ya,e=n(r,i),Bo){s=0;do{if(Bo=!1,!(25>s))throw Error(K(301));s+=1,Vo=Uo=null,t.updateQueue=null,Ro.current=va,e=n(r,i)}while(Bo)}if(Ro.current=ma,t=null!==Uo&&null!==Uo.next,Mo=0,Vo=Uo=Fo=null,jo=!1,t)throw Error(K(300));return e}function Ho(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Vo?Fo.memoizedState=Vo=e:Vo=Vo.next=e,Vo}function Ko(){if(null===Uo){var e=Fo.alternate;e=null!==e?e.memoizedState:null}else e=Uo.next;var t=null===Vo?Fo.memoizedState:Vo.next;if(null!==t)Vo=t,Uo=e;else{if(null===e)throw Error(K(310));e={memoizedState:(Uo=e).memoizedState,baseState:Uo.baseState,baseQueue:Uo.baseQueue,queue:Uo.queue,next:null},null===Vo?Fo.memoizedState=Vo=e:Vo=Vo.next=e}return Vo}function Wo(e,t){return"function"==typeof t?t(e):t}function Go(e){var t=Ko(),n=t.queue;if(null===n)throw Error(K(311));n.lastRenderedReducer=e;var r=Uo,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var a=o=s=null,l=i;do{var u=l.lane;if((Mo&u)===u)null!==a&&(a=a.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===e?l.eagerState:e(r,l.action);else{var c={lane:u,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===a?(o=a=c,s=r):a=a.next=c,Fo.lanes|=u,kl|=u}l=l.next}while(null!==l&&l!==i);null===a?s=r:a.next=o,Wr(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=a,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function Qo(e){var t=Ko(),n=t.queue;if(null===n)throw Error(K(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);Wr(s,t.memoizedState)||(ba=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Yo(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Mo&e)===e)&&(t._workInProgressVersionPrimary=r,Ao.push(t))),e)return n(t._source);throw Ao.push(t),Error(K(350))}function Xo(e,t,n,r){var i=ml;if(null===i)throw Error(K(349));var s=t._getVersion,o=s(t._source),a=Ro.current,l=a.useState((function(){return Yo(i,t,n)})),u=l[1],c=l[0];l=Vo;var h=e.memoizedState,f=h.refs,d=f.getSnapshot,p=h.source;h=h.subscribe;var m=Fo;return e.memoizedState={refs:f,source:t,subscribe:r},a.useEffect((function(){f.getSnapshot=n,f.setSnapshot=u;var e=s(t._source);if(!Wr(o,e)){e=n(t._source),Wr(c,e)||(u(e),e=Ql(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,a=e;0<a;){var l=31-Ln(a),h=1<<l;r[l]|=e,a&=~h}}}),[n,t,r]),a.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=Ql(m);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),Wr(d,n)&&Wr(p,t)&&Wr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:c}).dispatch=u=pa.bind(null,Fo,e),l.queue=e,l.baseQueue=null,c=Yo(i,t,n),l.memoizedState=l.baseState=c),c}function Jo(e,t,n){return Xo(Ko(),e,t,n)}function Zo(e){var t=Ho();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:e}).dispatch=pa.bind(null,Fo,e),[t.memoizedState,e]}function ea(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Fo.updateQueue)?(t={lastEffect:null},Fo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ta(e){return e={current:e},Ho().memoizedState=e}function na(){return Ko().memoizedState}function ra(e,t,n,r){var i=Ho();Fo.flags|=e,i.memoizedState=ea(1|t,n,void 0,void 0===r?null:r)}function ia(e,t,n,r){var i=Ko();r=void 0===r?null:r;var s=void 0;if(null!==Uo){var o=Uo.memoizedState;if(s=o.destroy,null!==r&&zo(r,o.deps))return void ea(t,n,s,r)}Fo.flags|=e,i.memoizedState=ea(1|t,n,s,r)}function sa(e,t){return ra(516,4,e,t)}function oa(e,t){return ia(516,4,e,t)}function aa(e,t){return ia(4,2,e,t)}function la(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ua(e,t,n){return n=null!=n?n.concat([e]):null,ia(4,2,la.bind(null,t,e),n)}function ca(){}function ha(e,t){var n=Ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&zo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function fa(e,t){var n=Ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&zo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function da(e,t){var n=Is();Ns(98>n?98:n,(function(){e(!0)})),Ns(97<n?97:n,(function(){var n=Po.transition;Po.transition=1;try{e(!1),t()}finally{Po.transition=n}}))}function pa(e,t,n){var r=Gl(),i=Ql(e),s={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?s.next=s:(s.next=o.next,o.next=s),t.pending=s,o=e.alternate,e===Fo||null!==o&&o===Fo)Bo=jo=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,l=o(a,n);if(s.eagerReducer=o,s.eagerState=l,Wr(l,a))return}catch(e){}Yl(e,i,r)}}var ma={readContext:zs,useCallback:qo,useContext:qo,useEffect:qo,useImperativeHandle:qo,useLayoutEffect:qo,useMemo:qo,useReducer:qo,useRef:qo,useState:qo,useDebugValue:qo,useDeferredValue:qo,useTransition:qo,useMutableSource:qo,useOpaqueIdentifier:qo,unstable_isNewReconciler:!1},ga={readContext:zs,useCallback:function(e,t){return Ho().memoizedState=[e,void 0===t?null:t],e},useContext:zs,useEffect:sa,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ra(4,2,la.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ra(4,2,e,t)},useMemo:function(e,t){var n=Ho();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ho();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=pa.bind(null,Fo,e),[r.memoizedState,e]},useRef:ta,useState:Zo,useDebugValue:ca,useDeferredValue:function(e){var t=Zo(e),n=t[0],r=t[1];return sa((function(){var t=Po.transition;Po.transition=1;try{r(e)}finally{Po.transition=t}}),[e]),n},useTransition:function(){var e=Zo(!1),t=e[0];return ta(e=da.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=Ho();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},Xo(r,e,t,n)},useOpaqueIdentifier:function(){if(To){var e=!1,t=function(e){return{$$typeof:Ee,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Oi++).toString(36))),Error(K(355))})),n=Zo(t)[1];return 0==(2&Fo.mode)&&(Fo.flags|=516,ea(5,(function(){n("r:"+(Oi++).toString(36))}),void 0,null)),t}return Zo(t="r:"+(Oi++).toString(36)),t},unstable_isNewReconciler:!1},ya={readContext:zs,useCallback:ha,useContext:zs,useEffect:oa,useImperativeHandle:ua,useLayoutEffect:aa,useMemo:fa,useReducer:Go,useRef:na,useState:function(){return Go(Wo)},useDebugValue:ca,useDeferredValue:function(e){var t=Go(Wo),n=t[0],r=t[1];return oa((function(){var t=Po.transition;Po.transition=1;try{r(e)}finally{Po.transition=t}}),[e]),n},useTransition:function(){var e=Go(Wo)[0];return[na().current,e]},useMutableSource:Jo,useOpaqueIdentifier:function(){return Go(Wo)[0]},unstable_isNewReconciler:!1},va={readContext:zs,useCallback:ha,useContext:zs,useEffect:oa,useImperativeHandle:ua,useLayoutEffect:aa,useMemo:fa,useReducer:Qo,useRef:na,useState:function(){return Qo(Wo)},useDebugValue:ca,useDeferredValue:function(e){var t=Qo(Wo),n=t[0],r=t[1];return oa((function(){var t=Po.transition;Po.transition=1;try{r(e)}finally{Po.transition=t}}),[e]),n},useTransition:function(){var e=Qo(Wo)[0];return[na().current,e]},useMutableSource:Jo,useOpaqueIdentifier:function(){return Qo(Wo)[0]},unstable_isNewReconciler:!1},wa=ae.ReactCurrentOwner,ba=!1;function Ea(e,t,n,r){t.child=null===e?co(t,null,n,r):uo(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var s=t.ref;return qs(t,i),r=$o(e,t,n,r,s,i),null===e||ba?(t.flags|=1,Ea(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,qa(e,t,i))}function ka(e,t,n,r,i,s){if(null===e){var o=n.type;return"function"!=typeof o||Iu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Nu(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,xa(e,t,o,r,i,s))}return o=e.child,0==(i&s)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:Qr)(i,r)&&e.ref===t.ref)?qa(e,t,s):(t.flags|=1,(e=_u(o,r)).ref=t.ref,e.return=t,t.child=e)}function xa(e,t,n,r,i,s){if(null!==e&&Qr(e.memoizedProps,r)&&e.ref===t.ref){if(ba=!1,0==(s&i))return t.lanes=e.lanes,qa(e,t,s);0!=(16384&e.flags)&&(ba=!0)}return Ia(e,t,n,r,s)}function Ta(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},iu(t,n);else{if(0==(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},iu(t,e),null;t.memoizedState={baseLanes:0},iu(t,null!==s?s.baseLanes:n)}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,iu(t,r);return Ea(e,t,i,n),t.child}function Ca(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ia(e,t,n,r,i){var s=es(n)?Ji:Yi.current;return s=Zi(t,s),qs(t,i),n=$o(e,t,n,r,s,i),null===e||ba?(t.flags|=1,Ea(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,qa(e,t,i))}function _a(e,t,n,r,i){if(es(n)){var s=!0;is(t)}else s=!1;if(qs(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),no(t,n,r),io(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;"object"==typeof u&&null!==u?u=zs(u):u=Zi(t,u=es(n)?Ji:Yi.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;h||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||l!==u)&&ro(t,o,r,u),$s=!1;var f=t.memoizedState;o.state=f,Ys(t,r,o,i),l=t.memoizedState,a!==r||f!==l||Xi.current||$s?("function"==typeof c&&(Zs(t,n,c,r),l=t.memoizedState),(a=$s||to(t,n,a,r,f,l,u))?(h||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4)):("function"==typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"==typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,Ks(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Rs(t.type,a),o.props=u,h=t.pendingProps,f=o.context,"object"==typeof(l=n.contextType)&&null!==l?l=zs(l):l=Zi(t,l=es(n)?Ji:Yi.current);var d=n.getDerivedStateFromProps;(c="function"==typeof d||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==h||f!==l)&&ro(t,o,r,l),$s=!1,f=t.memoizedState,o.state=f,Ys(t,r,o,i);var p=t.memoizedState;a!==h||f!==p||Xi.current||$s?("function"==typeof d&&(Zs(t,n,d,r),p=t.memoizedState),(u=$s||to(t,n,u,r,f,p,l))?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return Na(e,t,n,r,s,i)}function Na(e,t,n,r,i,s){Ca(e,t);var o=0!=(64&t.flags);if(!r&&!o)return i&&ss(t,n,!1),qa(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=uo(t,e.child,null,s),t.child=uo(t,null,a,s)):Ea(e,t,a,s),t.memoizedState=r.state,i&&ss(t,n,!0),t.child}function Da(e){var t=e.stateNode;t.pendingContext?ns(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ns(0,t.context,!1),yo(e,t.containerInfo)}var La,Aa,Oa,Ra={dehydrated:null,retryLane:0};function Pa(e,t,n){var r,i=t.pendingProps,s=Eo.current,o=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&s)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(s|=1),Gi(Eo,1&s),null===e?(void 0!==i.fallback&&_o(t),e=i.children,s=i.fallback,o?(e=Ma(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ra,e):"number"==typeof i.unstable_expectedLoadTime?(e=Ma(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ra,t.lanes=33554432,e):((n=Lu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=Ua(e,t,i.children,i.fallback,n),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?{baseLanes:n}:{baseLanes:s.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Ra,i):(n=Fa(e,t,i.children,n),t.memoizedState=null,n))}function Ma(e,t,n,r){var i=e.mode,s=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==s?(s.childLanes=0,s.pendingProps=t):s=Lu(t,i,0,null),n=Du(n,i,r,null),s.return=e,n.return=e,s.sibling=n,e.child=s,n}function Fa(e,t,n,r){var i=e.child;return e=i.sibling,n=_u(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Ua(e,t,n,r,i){var s=t.mode,o=e.child;e=o.sibling;var a={mode:"hidden",children:n};return 0==(2&s)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=a,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=_u(o,a),null!==e?r=_u(e,r):(r=Du(r,s,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Va(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Bs(e.return,t)}function ja(e,t,n,r,i,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=s)}function Ba(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ea(e,t,r.children,n),0!=(2&(r=Eo.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n);else if(19===e.tag)Va(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Gi(Eo,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===So(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ja(t,!1,i,n,s,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===So(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ja(t,!0,n,null,s,t.lastEffect);break;case"together":ja(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),kl|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(K(153));if(null!==t.child){for(n=_u(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=_u(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function za(e,t){if(!To)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $a(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return es(t.type)&&ts(),null;case 3:return vo(),Wi(Xi),Wi(Yi),Oo(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Do(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:bo(t);var i=go(mo.current);if(n=t.type,null!==e&&null!=t.stateNode)Aa(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(K(166));return null}if(e=go(fo.current),Do(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Pi]=t,r[Mi]=s,n){case"dialog":di("cancel",r),di("close",r);break;case"iframe":case"object":case"embed":di("load",r);break;case"video":case"audio":for(e=0;e<ui.length;e++)di(ui[e],r);break;case"source":di("error",r);break;case"img":case"image":case"link":di("error",r),di("load",r);break;case"details":di("toggle",r);break;case"input":je(r,s),di("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},di("invalid",r);break;case"textarea":Ge(r,s),di("invalid",r)}for(var o in ct(n,s),e=null,s)s.hasOwnProperty(o)&&(i=s[o],"children"===o?"string"==typeof i?r.textContent!==i&&(e=["children",i]):"number"==typeof i&&r.textContent!==""+i&&(e=["children",""+i]):G.hasOwnProperty(o)&&null!=i&&"onScroll"===o&&di("scroll",r));switch(n){case"input":Me(r),ze(r,s,!0);break;case"textarea":Me(r),Ye(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=ki)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(o=9===i.nodeType?i:i.ownerDocument,e===Xe&&(e=Ze(n)),e===Xe?"script"===n?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),"select"===n&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Pi]=t,e[Mi]=r,La(e,t),t.stateNode=e,o=ht(n,r),n){case"dialog":di("cancel",e),di("close",e),i=r;break;case"iframe":case"object":case"embed":di("load",e),i=r;break;case"video":case"audio":for(i=0;i<ui.length;i++)di(ui[i],e);i=r;break;case"source":di("error",e),i=r;break;case"img":case"image":case"link":di("error",e),di("load",e),i=r;break;case"details":di("toggle",e),i=r;break;case"input":je(e,r),i=Ve(e,r),di("invalid",e);break;case"option":i=He(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=$({},r,{value:void 0}),di("invalid",e);break;case"textarea":Ge(e,r),i=We(e,r),di("invalid",e);break;default:i=r}ct(n,i);var a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];"style"===s?lt(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&rt(e,l):"children"===s?"string"==typeof l?("textarea"!==n||""!==l)&&it(e,l):"number"==typeof l&&it(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(G.hasOwnProperty(s)?null!=l&&"onScroll"===s&&di("scroll",e):null!=l&&oe(e,s,l,o))}switch(n){case"input":Me(e),ze(e,r,!1);break;case"textarea":Me(e),Ye(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Re(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?Ke(e,!!r.multiple,s,!1):null!=r.defaultValue&&Ke(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=ki)}Ci(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Oa(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(K(166));n=go(mo.current),go(fo.current),Do(t)?(r=t.stateNode,n=t.memoizedProps,r[Pi]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Pi]=t,t.stateNode=r)}return null;case 13:return Wi(Eo),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Do(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Eo.current)?0===bl&&(bl=3):(0!==bl&&3!==bl||(bl=4),null===ml||0==(134217727&kl)&&0==(134217727&xl)||eu(ml,yl))),(r||n)&&(t.flags|=4),null);case 4:return vo(),null===e&&mi(t.stateNode.containerInfo),null;case 10:return js(t),null;case 17:return es(t.type)&&ts(),null;case 19:if(Wi(Eo),null===(r=t.memoizedState))return null;if(s=0!=(64&t.flags),null===(o=r.rendering))if(s)za(r,!1);else{if(0!==bl||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(o=So(e))){for(t.flags|=64,za(r,!1),null!==(s=o.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(o=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Gi(Eo,1&Eo.current|2),t.child}e=e.sibling}null!==r.tail&&Cs()>_l&&(t.flags|=64,s=!0,za(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=So(o))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),za(r,!0),null===r.tail&&"hidden"===r.tailMode&&!o.alternate&&!To)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Cs()-r.renderingStartTime>_l&&1073741824!==n&&(t.flags|=64,s=!0,za(r,!1),t.lanes=33554432);r.isBackwards?(o.sibling=t.child,t.child=o):(null!==(n=r.last)?n.sibling=o:t.child=o,r.last=o)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Cs(),n.sibling=null,t=Eo.current,Gi(Eo,s?1&t|2:1&t),n):null;case 23:case 24:return su(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(K(156,t.tag))}function Ha(e){switch(e.tag){case 1:es(e.type)&&ts();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(vo(),Wi(Xi),Wi(Yi),Oo(),0!=(64&(t=e.flags)))throw Error(K(285));return e.flags=-4097&t|64,e;case 5:return bo(e),null;case 13:return Wi(Eo),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return Wi(Eo),null;case 4:return vo(),null;case 10:return js(e),null;case 23:case 24:return su(),null;default:return null}}function Ka(e,t){try{var n="",r=t;do{n+=Ae(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}La=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Aa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,go(fo.current);var s,o=null;switch(n){case"input":i=Ve(e,i),r=Ve(e,r),o=[];break;case"option":i=He(e,i),r=He(e,r),o=[];break;case"select":i=$({},i,{value:void 0}),r=$({},r,{value:void 0}),o=[];break;case"textarea":i=We(e,i),r=We(e,r),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=ki)}for(u in ct(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(G.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(null!=l||null!=a))if("style"===u)if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,a=a?a.__html:void 0,null!=l&&a!==l&&(o=o||[]).push(u,l)):"children"===u?"string"!=typeof l&&"number"!=typeof l||(o=o||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(G.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&di("scroll",e),o||a===l||(o=[])):"object"==typeof l&&null!==l&&l.$$typeof===Ee?l.toString():(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Oa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Wa="function"==typeof WeakMap?WeakMap:Map;function Ga(e,t,n){(n=Ws(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Al||(Al=!0,Ol=r)},n}function Qa(e,t,n){(n=Ws(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Rl?Rl=new Set([this]):Rl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var Ya="function"==typeof WeakSet?WeakSet:Set;function Xa(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Su(e,t)}else t.current=null}function Ja(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Rs(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Di(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(K(163))}function Za(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(wu(n,e),vu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Rs(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&Xs(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}Xs(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Ci(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&un(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(K(163))}function el(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=at("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function tl(e,t){if(as&&"function"==typeof as.onCommitFiberUnmount)try{as.onCommitFiberUnmount(os,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))wu(t,n);else{r=t;try{i()}catch(e){Su(r,e)}}n=n.next}while(n!==e)}break;case 1:if(Xa(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Su(t,e)}break;case 5:Xa(t);break;case 4:al(e,t)}}function nl(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function rl(e){return 5===e.tag||3===e.tag||4===e.tag}function il(e){e:{for(var t=e.return;null!==t;){if(rl(t))break e;t=t.return}throw Error(K(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(K(161))}16&n.flags&&(it(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||rl(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?sl(e,n,t):ol(e,n,t)}function sl(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=ki));else if(4!==r&&null!==(e=e.child))for(sl(e,t,n),e=e.sibling;null!==e;)sl(e,t,n),e=e.sibling}function ol(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ol(e,t,n),e=e.sibling;null!==e;)ol(e,t,n),e=e.sibling}function al(e,t){for(var n,r,i=t,s=!1;;){if(!s){s=i.return;e:for(;;){if(null===s)throw Error(K(160));switch(n=s.stateNode,s.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}s=s.return}s=!0}if(5===i.tag||6===i.tag){e:for(var o=e,a=i,l=a;;)if(tl(o,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===a)break e;for(;null===l.sibling;){if(null===l.return||l.return===a)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}r?(o=n,a=i.stateNode,8===o.nodeType?o.parentNode.removeChild(a):o.removeChild(a)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(tl(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(s=!1)}i.sibling.return=i.return,i=i.sibling}}function ll(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for(n[Mi]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Be(n,r),ht(e,i),t=ht(e,r),i=0;i<s.length;i+=2){var o=s[i],a=s[i+1];"style"===o?lt(n,a):"dangerouslySetInnerHTML"===o?rt(n,a):"children"===o?it(n,a):oe(n,o,a,t)}switch(e){case"input":qe(n,r);break;case"textarea":Qe(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(s=r.value)?Ke(n,!!r.multiple,s,!1):e!==!!r.multiple&&(null!=r.defaultValue?Ke(n,!!r.multiple,r.defaultValue,!0):Ke(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(K(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,un(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Il=Cs(),el(t.child,!0)),void ul(t);case 19:return void ul(t);case 17:return;case 23:case 24:return void el(t,null!==t.memoizedState)}throw Error(K(163))}function ul(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ya),t.forEach((function(t){var r=xu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function cl(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var hl=Math.ceil,fl=ae.ReactCurrentDispatcher,dl=ae.ReactCurrentOwner,pl=0,ml=null,gl=null,yl=0,vl=0,wl=Ki(0),bl=0,El=null,Sl=0,kl=0,xl=0,Tl=0,Cl=null,Il=0,_l=1/0;function Nl(){_l=Cs()+500}var Dl,Ll=null,Al=!1,Ol=null,Rl=null,Pl=!1,Ml=null,Fl=90,Ul=[],Vl=[],jl=null,Bl=0,ql=null,zl=-1,$l=0,Hl=0,Kl=null,Wl=!1;function Gl(){return 0!=(48&pl)?Cs():-1!==zl?zl:zl=Cs()}function Ql(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Is()?1:2;if(0===$l&&($l=Sl),0!==Os.transition){0!==Hl&&(Hl=null!==Cl?Cl.pendingLanes:0),e=$l;var t=4186112&~Hl;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Is(),0!=(4&pl)&&98===e?e=In(12,$l):e=In(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),$l),e}function Yl(e,t,n){if(50<Bl)throw Bl=0,ql=null,Error(K(185));if(null===(e=Xl(e,t)))return null;Dn(e,t,n),e===ml&&(xl|=t,4===bl&&eu(e,yl));var r=Is();1===t?0!=(8&pl)&&0==(48&pl)?tu(e):(Jl(e,n),0===pl&&(Nl(),Ls())):(0==(4&pl)||98!==r&&99!==r||(null===jl?jl=new Set([e]):jl.add(e)),Jl(e,n)),Cl=e}function Xl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Jl(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Ln(o),l=1<<a,u=s[a];if(-1===u){if(0==(l&r)||0!=(l&i)){u=t,xn(l);var c=kn;s[a]=10<=c?u+250:6<=c?u+5e3:-1}}else u<=t&&(e.expiredLanes|=l);o&=~l}if(r=Tn(e,e===ml?yl:0),t=kn,0===r)null!==n&&(n!==bs&&cs(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==bs&&cs(n)}15===t?(n=tu.bind(null,e),null===Ss?(Ss=[n],ks=us(ms,As)):Ss.push(n),n=bs):14===t?n=Ds(99,tu.bind(null,e)):n=Ds(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(K(358,e))}}(t),Zl.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function Zl(e){if(zl=-1,Hl=$l=0,0!=(48&pl))throw Error(K(327));var t=e.callbackNode;if(yu()&&e.callbackNode!==t)return null;var n=Tn(e,e===ml?yl:0);if(0===n)return null;var r=n,i=pl;pl|=16;var s=lu();for(ml===e&&yl===r||(Nl(),ou(e,r));;)try{hu();break}catch(t){au(e,t)}if(Vs(),fl.current=s,pl=i,null!==gl?r=0:(ml=null,yl=0,r=bl),0!=(Sl&xl))ou(e,0);else if(0!==r){if(2===r&&(pl|=64,e.hydrate&&(e.hydrate=!1,Di(e.containerInfo)),0!==(n=Cn(e))&&(r=uu(e,n))),1===r)throw t=El,ou(e,0),eu(e,n),Jl(e,Cs()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(K(345));case 2:pu(e);break;case 3:if(eu(e,n),(62914560&n)===n&&10<(r=Il+500-Cs())){if(0!==Tn(e,0))break;if(((i=e.suspendedLanes)&n)!==n){Gl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=_i(pu.bind(null,e),r);break}pu(e);break;case 4:if(eu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var o=31-Ln(n);s=1<<o,(o=r[o])>i&&(i=o),n&=~s}if(n=i,10<(n=(120>(n=Cs()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*hl(n/1960))-n)){e.timeoutHandle=_i(pu.bind(null,e),n);break}pu(e);break;case 5:pu(e);break;default:throw Error(K(329))}}return Jl(e,Cs()),e.callbackNode===t?Zl.bind(null,e):null}function eu(e,t){for(t&=~Tl,t&=~xl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ln(t),r=1<<n;e[n]=-1,t&=~r}}function tu(e){if(0!=(48&pl))throw Error(K(327));if(yu(),e===ml&&0!=(e.expiredLanes&yl)){var t=yl,n=uu(e,t);0!=(Sl&xl)&&(n=uu(e,t=Tn(e,t)))}else n=uu(e,t=Tn(e,0));if(0!==e.tag&&2===n&&(pl|=64,e.hydrate&&(e.hydrate=!1,Di(e.containerInfo)),0!==(t=Cn(e))&&(n=uu(e,t))),1===n)throw n=El,ou(e,0),eu(e,t),Jl(e,Cs()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,pu(e),Jl(e,Cs()),null}function nu(e,t){var n=pl;pl|=1;try{return e(t)}finally{0===(pl=n)&&(Nl(),Ls())}}function ru(e,t){var n=pl;pl&=-2,pl|=8;try{return e(t)}finally{0===(pl=n)&&(Nl(),Ls())}}function iu(e,t){Gi(wl,vl),vl|=t,Sl|=t}function su(){vl=wl.current,Wi(wl)}function ou(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Ni(n)),null!==gl)for(n=gl.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&ts();break;case 3:vo(),Wi(Xi),Wi(Yi),Oo();break;case 5:bo(r);break;case 4:vo();break;case 13:case 19:Wi(Eo);break;case 10:js(r);break;case 23:case 24:su()}n=n.return}ml=e,gl=_u(e.current,null),yl=vl=Sl=t,bl=0,El=null,Tl=xl=kl=0}function au(e,t){for(;;){var n=gl;try{if(Vs(),Ro.current=ma,jo){for(var r=Fo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}jo=!1}if(Mo=0,Vo=Uo=Fo=null,Bo=!1,dl.current=null,null===n||null===n.return){bl=1,El=t,gl=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=yl,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l;if(0==(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.lanes=c.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=0!=(1&Eo.current),f=o;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var m=f.memoizedProps;d=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(d){var g=f.updateQueue;if(null===g){var y=new Set;y.add(u),f.updateQueue=y}else g.add(u);if(0==(2&f.mode)){if(f.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var v=Ws(-1,1);v.tag=2,Gs(a,v)}a.lanes|=1;break e}l=void 0,a=t;var w=s.pingCache;if(null===w?(w=s.pingCache=new Wa,l=new Set,w.set(u,l)):void 0===(l=w.get(u))&&(l=new Set,w.set(u,l)),!l.has(a)){l.add(a);var b=ku.bind(null,s,u,a);u.then(b,b)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);l=Error((Oe(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==bl&&(bl=2),l=Ka(l,a),f=o;do{switch(f.tag){case 3:s=l,f.flags|=4096,t&=-t,f.lanes|=t,Qs(f,Ga(0,s,t));break e;case 1:s=l;var E=f.type,S=f.stateNode;if(0==(64&f.flags)&&("function"==typeof E.getDerivedStateFromError||null!==S&&"function"==typeof S.componentDidCatch&&(null===Rl||!Rl.has(S)))){f.flags|=4096,t&=-t,f.lanes|=t,Qs(f,Qa(f,s,t));break e}}f=f.return}while(null!==f)}du(n)}catch(e){t=e,gl===n&&null!==n&&(gl=n=n.return);continue}break}}function lu(){var e=fl.current;return fl.current=ma,null===e?ma:e}function uu(e,t){var n=pl;pl|=16;var r=lu();for(ml===e&&yl===t||ou(e,t);;)try{cu();break}catch(t){au(e,t)}if(Vs(),pl=n,fl.current=r,null!==gl)throw Error(K(261));return ml=null,yl=0,bl}function cu(){for(;null!==gl;)fu(gl)}function hu(){for(;null!==gl&&!hs();)fu(gl)}function fu(e){var t=Dl(e.alternate,e,vl);e.memoizedProps=e.pendingProps,null===t?du(e):gl=t,dl.current=null}function du(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=$a(n,t,vl)))return void(gl=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&vl)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=Ha(t)))return n.flags&=2047,void(gl=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(gl=t);gl=t=e}while(null!==t);0===bl&&(bl=5)}function pu(e){var t=Is();return Ns(99,mu.bind(null,e,t)),null}function mu(e,t){do{yu()}while(null!==Ml);if(0!=(48&pl))throw Error(K(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(K(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,s=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var o=e.eventTimes,a=e.expirationTimes;0<s;){var l=31-Ln(s),u=1<<l;i[l]=0,o[l]=-1,a[l]=-1,s&=~u}if(null!==jl&&0==(24&r)&&jl.has(e)&&jl.delete(e),e===ml&&(gl=ml=null,yl=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=pl,pl|=32,dl.current=null,xi=Mn,ei(o=Zr())){if("selectionStart"in o)a={start:o.selectionStart,end:o.selectionEnd};else e:if(a=(a=o.ownerDocument)&&a.defaultView||window,(u=a.getSelection&&a.getSelection())&&0!==u.rangeCount){a=u.anchorNode,s=u.anchorOffset,l=u.focusNode,u=u.focusOffset;try{a.nodeType,l.nodeType}catch(e){a=null;break e}var c=0,h=-1,f=-1,d=0,p=0,m=o,g=null;t:for(;;){for(var y;m!==a||0!==s&&3!==m.nodeType||(h=c+s),m!==l||0!==u&&3!==m.nodeType||(f=c+u),3===m.nodeType&&(c+=m.nodeValue.length),null!==(y=m.firstChild);)g=m,m=y;for(;;){if(m===o)break t;if(g===a&&++d===s&&(h=c),g===l&&++p===u&&(f=c),null!==(y=m.nextSibling))break;g=(m=g).parentNode}m=y}a=-1===h||-1===f?null:{start:h,end:f}}else a=null;a=a||{start:0,end:0}}else a=null;Ti={focusedElem:o,selectionRange:a},Mn=!1,Kl=null,Wl=!1,Ll=r;do{try{gu()}catch(e){if(null===Ll)throw Error(K(330));Su(Ll,e),Ll=Ll.nextEffect}}while(null!==Ll);Kl=null,Ll=r;do{try{for(o=e;null!==Ll;){var v=Ll.flags;if(16&v&&it(Ll.stateNode,""),128&v){var w=Ll.alternate;if(null!==w){var b=w.ref;null!==b&&("function"==typeof b?b(null):b.current=null)}}switch(1038&v){case 2:il(Ll),Ll.flags&=-3;break;case 6:il(Ll),Ll.flags&=-3,ll(Ll.alternate,Ll);break;case 1024:Ll.flags&=-1025;break;case 1028:Ll.flags&=-1025,ll(Ll.alternate,Ll);break;case 4:ll(Ll.alternate,Ll);break;case 8:al(o,a=Ll);var E=a.alternate;nl(a),null!==E&&nl(E)}Ll=Ll.nextEffect}}catch(e){if(null===Ll)throw Error(K(330));Su(Ll,e),Ll=Ll.nextEffect}}while(null!==Ll);if(b=Ti,w=Zr(),v=b.focusedElem,o=b.selectionRange,w!==v&&v&&v.ownerDocument&&Jr(v.ownerDocument.documentElement,v)){null!==o&&ei(v)&&(w=o.start,void 0===(b=o.end)&&(b=w),"selectionStart"in v?(v.selectionStart=w,v.selectionEnd=Math.min(b,v.value.length)):(b=(w=v.ownerDocument||document)&&w.defaultView||window).getSelection&&(b=b.getSelection(),a=v.textContent.length,E=Math.min(o.start,a),o=void 0===o.end?E:Math.min(o.end,a),!b.extend&&E>o&&(a=o,o=E,E=a),a=Xr(v,E),s=Xr(v,o),a&&s&&(1!==b.rangeCount||b.anchorNode!==a.node||b.anchorOffset!==a.offset||b.focusNode!==s.node||b.focusOffset!==s.offset)&&((w=w.createRange()).setStart(a.node,a.offset),b.removeAllRanges(),E>o?(b.addRange(w),b.extend(s.node,s.offset)):(w.setEnd(s.node,s.offset),b.addRange(w))))),w=[];for(b=v;b=b.parentNode;)1===b.nodeType&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"==typeof v.focus&&v.focus(),v=0;v<w.length;v++)(b=w[v]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Mn=!!xi,Ti=xi=null,e.current=n,Ll=r;do{try{for(v=e;null!==Ll;){var S=Ll.flags;if(36&S&&Za(v,Ll.alternate,Ll),128&S){w=void 0;var k=Ll.ref;if(null!==k){var x=Ll.stateNode;switch(Ll.tag){case 5:w=x;break;default:w=x}"function"==typeof k?k(w):k.current=w}}Ll=Ll.nextEffect}}catch(e){if(null===Ll)throw Error(K(330));Su(Ll,e),Ll=Ll.nextEffect}}while(null!==Ll);Ll=null,Es(),pl=i}else e.current=n;if(Pl)Pl=!1,Ml=e,Fl=t;else for(Ll=r;null!==Ll;)t=Ll.nextEffect,Ll.nextEffect=null,8&Ll.flags&&((S=Ll).sibling=null,S.stateNode=null),Ll=t;if(0===(r=e.pendingLanes)&&(Rl=null),1===r?e===ql?Bl++:(Bl=0,ql=e):Bl=0,n=n.stateNode,as&&"function"==typeof as.onCommitFiberRoot)try{as.onCommitFiberRoot(os,n,void 0,64==(64&n.current.flags))}catch(e){}if(Jl(e,Cs()),Al)throw Al=!1,e=Ol,Ol=null,e;return 0!=(8&pl)||Ls(),null}function gu(){for(;null!==Ll;){var e=Ll.alternate;Wl||null===Kl||(0!=(8&Ll.flags)?jt(Ll,Kl)&&(Wl=!0):13===Ll.tag&&cl(e,Ll)&&jt(Ll,Kl)&&(Wl=!0));var t=Ll.flags;0!=(256&t)&&Ja(e,Ll),0==(512&t)||Pl||(Pl=!0,Ds(97,(function(){return yu(),null}))),Ll=Ll.nextEffect}}function yu(){if(90!==Fl){var e=97<Fl?97:Fl;return Fl=90,Ns(e,bu)}return!1}function vu(e,t){Ul.push(t,e),Pl||(Pl=!0,Ds(97,(function(){return yu(),null})))}function wu(e,t){Vl.push(t,e),Pl||(Pl=!0,Ds(97,(function(){return yu(),null})))}function bu(){if(null===Ml)return!1;var e=Ml;if(Ml=null,0!=(48&pl))throw Error(K(331));var t=pl;pl|=32;var n=Vl;Vl=[];for(var r=0;r<n.length;r+=2){var i=n[r],s=n[r+1],o=i.destroy;if(i.destroy=void 0,"function"==typeof o)try{o()}catch(e){if(null===s)throw Error(K(330));Su(s,e)}}for(n=Ul,Ul=[],r=0;r<n.length;r+=2){i=n[r],s=n[r+1];try{var a=i.create;i.destroy=a()}catch(e){if(null===s)throw Error(K(330));Su(s,e)}}for(a=e.current.firstEffect;null!==a;)e=a.nextEffect,a.nextEffect=null,8&a.flags&&(a.sibling=null,a.stateNode=null),a=e;return pl=t,Ls(),!0}function Eu(e,t,n){Gs(e,t=Ga(0,t=Ka(n,t),1)),t=Gl(),null!==(e=Xl(e,1))&&(Dn(e,1,t),Jl(e,t))}function Su(e,t){if(3===e.tag)Eu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Eu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Rl||!Rl.has(r))){var i=Qa(n,e=Ka(t,e),1);if(Gs(n,i),i=Gl(),null!==(n=Xl(n,1)))Dn(n,1,i),Jl(n,i);else if("function"==typeof r.componentDidCatch&&(null===Rl||!Rl.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function ku(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Gl(),e.pingedLanes|=e.suspendedLanes&n,ml===e&&(yl&n)===n&&(4===bl||3===bl&&(62914560&yl)===yl&&500>Cs()-Il?ou(e,0):Tl|=n),Jl(e,t)}function xu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Is()?1:2:(0===$l&&($l=Sl),0===(t=_n(62914560&~$l))&&(t=4194304))),n=Gl(),null!==(e=Xl(e,t))&&(Dn(e,t,n),Jl(e,n))}function Tu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Cu(e,t,n,r){return new Tu(e,t,n,r)}function Iu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function _u(e,t){var n=e.alternate;return null===n?((n=Cu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nu(e,t,n,r,i,s){var o=2;if(r=e,"function"==typeof e)Iu(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case ce:return Du(n.children,i,s,t);case Se:o=8,i|=16;break;case he:o=8,i|=1;break;case fe:return(e=Cu(12,n,t,8|i)).elementType=fe,e.type=fe,e.lanes=s,e;case ge:return(e=Cu(13,n,t,i)).type=ge,e.elementType=ge,e.lanes=s,e;case ye:return(e=Cu(19,n,t,i)).elementType=ye,e.lanes=s,e;case ke:return Lu(n,i,s,t);case xe:return(e=Cu(24,n,t,i)).elementType=xe,e.lanes=s,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case de:o=10;break e;case pe:o=9;break e;case me:o=11;break e;case ve:o=14;break e;case we:o=16,r=null;break e;case be:o=22;break e}throw Error(K(130,null==e?e:typeof e,""))}return(t=Cu(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Du(e,t,n,r){return(e=Cu(7,e,r,t)).lanes=n,e}function Lu(e,t,n,r){return(e=Cu(23,e,r,t)).elementType=ke,e.lanes=n,e}function Au(e,t,n){return(e=Cu(6,e,null,t)).lanes=n,e}function Ou(e,t,n){return(t=Cu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ru(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Nn(0),this.expirationTimes=Nn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nn(0),this.mutableSourceEagerHydrationData=null}function Pu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ue,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Mu(e,t,n,r){var i=t.current,s=Gl(),o=Ql(i);e:if(n){t:{if(Mt(n=n._reactInternals)!==n||1!==n.tag)throw Error(K(170));var a=n;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(es(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(null!==a);throw Error(K(171))}if(1===n.tag){var l=n.type;if(es(l)){n=rs(n,l,a);break e}}n=a}else n=Qi;return null===t.context?t.context=n:t.pendingContext=n,(t=Ws(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),Gs(i,t),Yl(i,o,s),o}function Fu(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Uu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vu(e,t){Uu(e,t),(e=e.alternate)&&Uu(e,t)}function ju(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ru(e,t,null!=n&&!0===n.hydrate),t=Cu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,Hs(t),e[Fi]=n.current,mi(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function Bu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function qu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if("function"==typeof i){var a=i;i=function(){var e=Fu(o);a.call(e)}}Mu(t,o,e,i)}else{if(s=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ju(e,0,t?{hydrate:!0}:void 0)}(n,r),o=s._internalRoot,"function"==typeof i){var l=i;i=function(){var e=Fu(o);l.call(e)}}ru((function(){Mu(t,o,e,i)}))}return Fu(o)}function zu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Bu(t))throw Error(K(200));return Pu(e,t,null,n)}Dl=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||Xi.current)ba=!0;else{if(0==(n&r)){switch(ba=!1,t.tag){case 3:Da(t),Lo();break;case 5:wo(t);break;case 1:es(t.type)&&is(t);break;case 4:yo(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;Gi(Ps,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Pa(e,t,n):(Gi(Eo,1&Eo.current),null!==(t=qa(e,t,n))?t.sibling:null);Gi(Eo,1&Eo.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return Ba(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Gi(Eo,Eo.current),r)break;return null;case 23:case 24:return t.lanes=0,Ta(e,t,n)}return qa(e,t,n)}ba=0!=(16384&e.flags)}else ba=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=Zi(t,Yi.current),qs(t,n),i=$o(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,es(r)){var s=!0;is(t)}else s=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Hs(t);var o=r.getDerivedStateFromProps;"function"==typeof o&&Zs(t,r,o,e),i.updater=eo,t.stateNode=i,i._reactInternals=t,io(t,r,e,n),t=Na(null,t,r,!0,s,n)}else t.tag=0,Ea(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"==typeof e)return Iu(e)?1:0;if(null!=e){if((e=e.$$typeof)===me)return 11;if(e===ve)return 14}return 2}(i),e=Rs(i,e),s){case 0:t=Ia(null,t,i,e,n);break e;case 1:t=_a(null,t,i,e,n);break e;case 11:t=Sa(null,t,i,e,n);break e;case 14:t=ka(null,t,i,Rs(i.type,e),r,n);break e}throw Error(K(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:Rs(r,i),n);case 1:return r=t.type,i=t.pendingProps,_a(e,t,r,i=t.elementType===r?i:Rs(r,i),n);case 3:if(Da(t),r=t.updateQueue,null===e||null===r)throw Error(K(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,Ks(e,t),Ys(t,r,null,n),(r=t.memoizedState.element)===i)Lo(),t=qa(e,t,n);else{if((s=(i=t.stateNode).hydrate)&&(xo=Li(t.stateNode.containerInfo.firstChild),ko=t,s=To=!0),s){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(s=e[i])._workInProgressVersionPrimary=e[i+1],Ao.push(s);for(n=co(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ea(e,t,r,n),Lo();t=t.child}return t;case 5:return wo(t),null===e&&_o(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,o=i.children,Ii(r,i)?o=null:null!==s&&Ii(r,s)&&(t.flags|=16),Ca(e,t),Ea(e,t,o,n),t.child;case 6:return null===e&&_o(t),null;case 13:return Pa(e,t,n);case 4:return yo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=uo(t,null,r,n):Ea(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:Rs(r,i),n);case 7:return Ea(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ea(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value;var a=t.type._context;if(Gi(Ps,a._currentValue),a._currentValue=s,null!==o)if(a=o.value,0===(s=Wr(a,s)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(a,s):1073741823))){if(o.children===i.children&&!Xi.current){t=qa(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r&&0!=(u.observedBits&s)){1===a.tag&&((u=Ws(-1,n&-n)).tag=2,Gs(a,u)),a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),Bs(a.return,n),l.lanes|=n;break}u=u.next}}else o=10===a.tag&&a.type===t.type?null:a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}Ea(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(s=t.pendingProps).children,qs(t,n),r=r(i=zs(i,s.unstable_observedBits)),t.flags|=1,Ea(e,t,r,n),t.child;case 14:return s=Rs(i=t.type,t.pendingProps),ka(e,t,i,s=Rs(i.type,s),r,n);case 15:return xa(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Rs(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,es(r)?(e=!0,is(t)):e=!1,qs(t,n),no(t,r,i),io(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return Ba(e,t,n);case 23:case 24:return Ta(e,t,n)}throw Error(K(156,t.tag))},ju.prototype.render=function(e){Mu(e,this._internalRoot,null,null)},ju.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Mu(null,e,null,(function(){t[Fi]=null}))},Bt=function(e){13===e.tag&&(Yl(e,4,Gl()),Vu(e,4))},qt=function(e){13===e.tag&&(Yl(e,67108864,Gl()),Vu(e,67108864))},zt=function(e){if(13===e.tag){var t=Gl(),n=Ql(e);Yl(e,n,t),Vu(e,n)}},$t=function(e,t){return t()},dt=function(e,t,n){switch(t){case"input":if(qe(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=qi(r);if(!i)throw Error(K(90));Fe(r),qe(r,i)}}}break;case"textarea":Qe(e,n);break;case"select":null!=(t=n.value)&&Ke(e,!!n.multiple,t,!1)}},wt=nu,bt=function(e,t,n,r,i){var s=pl;pl|=4;try{return Ns(98,e.bind(null,t,n,r,i))}finally{0===(pl=s)&&(Nl(),Ls())}},Et=function(){0==(49&pl)&&(function(){if(null!==jl){var e=jl;jl=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,Jl(e,Cs())}))}Ls()}(),yu())},St=function(e,t){var n=pl;pl|=2;try{return e(t)}finally{0===(pl=n)&&(Nl(),Ls())}};var $u={Events:[ji,Bi,qi,yt,vt,yu,{current:!1}]},Hu={findFiberByHostInstance:Vi,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},Ku={bundleType:Hu.bundleType,version:Hu.version,rendererPackageName:Hu.rendererPackageName,rendererConfig:Hu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ae.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Vt(e))?null:e.stateNode},findFiberByHostInstance:Hu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wu.isDisabled&&Wu.supportsFiber)try{os=Wu.inject(Ku),as=Wu}catch(nt){}}j.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$u,j.createPortal=zu,j.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(K(188));throw Error(K(268,Object.keys(e)))}return e=null===(e=Vt(t))?null:e.stateNode},j.flushSync=function(e,t){var n=pl;if(0!=(48&n))return e(t);pl|=1;try{if(e)return Ns(99,e.bind(null,t))}finally{pl=n,Ls()}},j.hydrate=function(e,t,n){if(!Bu(t))throw Error(K(200));return qu(null,e,t,!0,n)},j.render=function(e,t,n){if(!Bu(t))throw Error(K(200));return qu(null,e,t,!1,n)},j.unmountComponentAtNode=function(e){if(!Bu(e))throw Error(K(40));return!!e._reactRootContainer&&(ru((function(){qu(null,null,e,!1,(function(){e._reactRootContainer=null,e[Fi]=null}))})),!0)},j.unstable_batchedUpdates=nu,j.unstable_createPortal=function(e,t){return zu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},j.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Bu(n))throw Error(K(200));if(null==e||void 0===e._reactInternals)throw Error(K(38));return qu(e,t,n,!1,r)},j.version="17.0.2",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){}}(),V.exports=j;var Gu=V.exports,Qu=function(e,t){return(Qu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Yu(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))}function Xu(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function Ju(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zu(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function ec(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||t)}var tc=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function nc(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function rc(){return!function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var ic=function(e){function t(n,r,i){var s=e.call(this,r)||this;return s.code=n,s.customData=i,s.name="FirebaseError",Object.setPrototypeOf(s,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,sc.prototype.create),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Qu(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error),sc=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,s=this.errors[e],o=s?oc(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").",l=new ic(i,a,r);return l},e}();function oc(e,t){return e.replace(ac,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var ac=/\{\$([^}]+)}/g;function lc(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,s=n;i<s.length;i++){var o=s[i];if(!r.includes(o))return!1;var a=e[o],l=t[o];if(uc(a)&&uc(l)){if(!lc(a,l))return!1}else if(a!==l)return!1}for(var u=0,c=r;u<c.length;u++){o=c[u];if(!n.includes(o))return!1}return!0}function uc(e){return null!==e&&"object"==typeof e}function cc(e,t,n){void 0===t&&(t=1e3),void 0===n&&(n=2);var r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function hc(e){return e&&e._delegate?e._delegate:e}var fc=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),dc="[DEFAULT]",pc=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new tc;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:dc})}catch(e){}try{for(var r=Ju(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var s=Zu(i.value,2),o=s[0],a=s[1],l=this.normalizeInstanceIdentifier(o);try{var u=this.getOrInitializeService({instanceIdentifier:l});a.resolve(u)}catch(e){}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=dc),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return Yu(this,void 0,void 0,(function(){var e;return Xu(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(ec(ec([],Zu(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),Zu(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=dc),this.instances.has(e)},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var r=e.options,i=void 0===r?{}:r,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var o=this.getOrInitializeService({instanceIdentifier:s,options:i});try{for(var a=Ju(this.instancesDeferred.entries()),l=a.next();!l.done;l=a.next()){var u=Zu(l.value,2),c=u[0],h=u[1];s===this.normalizeInstanceIdentifier(c)&&h.resolve(o)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var s=this.instances.get(r);return s&&e(s,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,r,i=this.onInitCallbacks.get(t);if(i)try{for(var s=Ju(i),o=s.next();!o.done;o=s.next()){var a=o.value;try{a(e,t)}catch(e){}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===dc?void 0:t),options:i}),this.instances.set(n,s),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(e){}return s||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=dc),this.component?this.component.multipleInstances?e:dc:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();var mc,gc,yc=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new pc(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();function vc(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(gc||(gc={}));var wc={debug:gc.DEBUG,verbose:gc.VERBOSE,info:gc.INFO,warn:gc.WARN,error:gc.ERROR,silent:gc.SILENT},bc=gc.INFO,Ec=((mc={})[gc.DEBUG]="log",mc[gc.VERBOSE]="log",mc[gc.INFO]="info",mc[gc.WARN]="warn",mc[gc.ERROR]="error",mc),Sc=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){(new Date).toISOString();var i=Ec[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}},kc=function(){function e(e){this.name=e,this._logLevel=bc,this._logHandler=Sc,this._userLogHandler=null}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in gc))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?wc[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,vc([this,gc.DEBUG],e)),this._logHandler.apply(this,vc([this,gc.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,vc([this,gc.VERBOSE],e)),this._logHandler.apply(this,vc([this,gc.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,vc([this,gc.INFO],e)),this._logHandler.apply(this,vc([this,gc.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,vc([this,gc.WARN],e)),this._logHandler.apply(this,vc([this,gc.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,vc([this,gc.ERROR],e)),this._logHandler.apply(this,vc([this,gc.ERROR],e))},e}();class xc{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Tc="@firebase/app-exp",Cc=new kc("@firebase/app"),Ic="[DEFAULT]",_c={[Tc]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics-exp":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check-exp":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth-exp":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions-exp":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations-exp":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging-exp":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance-exp":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config-exp":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js","firebase-exp":"fire-js-all"},Nc=new Map,Dc=new Map;function Lc(e,t){try{e.container.addComponent(t)}catch(n){Cc.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ac(e){const t=e.name;if(Dc.has(t))return Cc.debug(`There were multiple attempts to register component ${t}.`),!1;Dc.set(t,e);for(const t of Nc.values())Lc(t,e);return!0}function Oc(e,t){return e.container.getProvider(t)}const Rc=new sc("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Pc{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new fc("app-exp",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rc.create("app-deleted",{appName:this._name})}}const Mc="9.0.0-beta.8";function Fc(e="[DEFAULT]"){const t=Nc.get(e);if(!t)throw Rc.create("no-app",{appName:e});return t}function Uc(e,t,n){var r;let i=null!==(r=_c[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Cc.warn(e.join(" "))}Ac(new fc(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}var Vc;Ac(new fc("platform-logger",(e=>new xc(e)),"PRIVATE")),Uc(Tc,"0.0.900-exp.8b4d7550f",Vc),Uc("fire-js","");var jc=function(e,t){return(jc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Bc(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var qc,zc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},$c=$c||{},Hc=zc||self;function Kc(){}function Wc(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Gc(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Qc="closure_uid_"+(1e9*Math.random()>>>0),Yc=0;function Xc(e,t,n){return e.call.apply(e.bind,arguments)}function Jc(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Zc(e,t,n){return(Zc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Xc:Jc).apply(null,arguments)}function eh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function th(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function nh(){this.s=this.s,this.o=this.o}var rh={};nh.prototype.s=!1,nh.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Qc)&&e[Qc]||(e[Qc]=++Yc)}(this);delete rh[e]}},nh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ih=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},sh=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function oh(e){return Array.prototype.concat.apply([],arguments)}function ah(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function lh(e){return/^[\s\xa0]*$/.test(e)}var uh,ch=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function hh(e,t){return-1!=e.indexOf(t)}function fh(e,t){return e<t?-1:e>t?1:0}e:{var dh=Hc.navigator;if(dh){var ph=dh.userAgent;if(ph){uh=ph;break e}}uh=""}function mh(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function gh(e){var t={};for(var n in e)t[n]=e[n];return t}var yh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vh(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var s=0;s<yh.length;s++)n=yh[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function wh(e){return wh[" "](e),e}wh[" "]=Kc;var bh,Eh=hh(uh,"Opera"),Sh=hh(uh,"Trident")||hh(uh,"MSIE"),kh=hh(uh,"Edge"),xh=kh||Sh,Th=hh(uh,"Gecko")&&!(hh(uh.toLowerCase(),"webkit")&&!hh(uh,"Edge"))&&!(hh(uh,"Trident")||hh(uh,"MSIE"))&&!hh(uh,"Edge"),Ch=hh(uh.toLowerCase(),"webkit")&&!hh(uh,"Edge");function Ih(){var e=Hc.document;return e?e.documentMode:void 0}e:{var _h="",Nh=function(){var e=uh;return Th?/rv:([^\);]+)(\)|;)/.exec(e):kh?/Edge\/([\d\.]+)/.exec(e):Sh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ch?/WebKit\/(\S+)/.exec(e):Eh?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Nh&&(_h=Nh?Nh[1]:""),Sh){var Dh=Ih();if(null!=Dh&&Dh>parseFloat(_h)){bh=String(Dh);break e}}bh=_h}var Lh,Ah={};function Oh(){return function(e){var t=Ah;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=ch(String(bh)).split("."),n=ch("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var s=t[i]||"",o=n[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==s[0].length&&0==o[0].length)break;e=fh(0==s[1].length?0:parseInt(s[1],10),0==o[1].length?0:parseInt(o[1],10))||fh(0==s[2].length,0==o[2].length)||fh(s[2],o[2]),s=s[3],o=o[3]}while(0==e)}return 0<=e}))}if(Hc.document&&Sh){var Rh=Ih();Lh=Rh||(parseInt(bh,10)||void 0)}else Lh=void 0;var Ph=Lh,Mh=function(){if(!Hc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Hc.addEventListener("test",Kc,t),Hc.removeEventListener("test",Kc,t)}catch(e){}return e}();function Fh(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Uh(e,t){if(Fh.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Th){e:{try{wh(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Vh[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Uh.Z.h.call(this)}}Fh.prototype.h=function(){this.defaultPrevented=!0},th(Uh,Fh);var Vh={2:"touch",3:"pen",4:"mouse"};Uh.prototype.h=function(){Uh.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var jh="closure_listenable_"+(1e6*Math.random()|0),Bh=0;function qh(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Bh,this.ca=this.fa=!1}function zh(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function $h(e){this.src=e,this.g={},this.h=0}function Hh(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=ih(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(zh(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Kh(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}$h.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Kh(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new qh(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var Wh="closure_lm_"+(1e6*Math.random()|0),Gh={};function Qh(e,t,n,r,i){if(r&&r.once)return Xh(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Qh(e,t[s],n,r,i);return null}return n=sf(n),e&&e[jh]?e.N(t,n,Gc(r)?!!r.capture:!!r,i):Yh(e,t,n,!1,r,i)}function Yh(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Gc(i)?!!i.capture:!!i,a=nf(e);if(a||(e[Wh]=a=new $h(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=tf;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Mh||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ef(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Xh(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Xh(e,t[s],n,r,i);return null}return n=sf(n),e&&e[jh]?e.O(t,n,Gc(r)?!!r.capture:!!r,i):Yh(e,t,n,!0,r,i)}function Jh(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Jh(e,t[s],n,r,i);else r=Gc(r)?!!r.capture:!!r,n=sf(n),e&&e[jh]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Kh(s=e.g[t],n,r,i))&&(zh(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=nf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Kh(t,n,r,i)),(n=-1<e?t[e]:null)&&Zh(n))}function Zh(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[jh])Hh(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ef(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=nf(t))?(Hh(n,e),0==n.h&&(n.src=null,t[Wh]=null)):zh(e)}}}function ef(e){return e in Gh?Gh[e]:Gh[e]="on"+e}function tf(e,t){if(e.ca)e=!0;else{t=new Uh(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Zh(e),e=n.call(r,t)}return e}function nf(e){return(e=e[Wh])instanceof $h?e:null}var rf="__closure_events_fn_"+(1e9*Math.random()>>>0);function sf(e){return"function"==typeof e?e:(e[rf]||(e[rf]=function(t){return e.handleEvent(t)}),e[rf])}function of(){nh.call(this),this.i=new $h(this),this.P=this,this.I=null}function af(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new Fh(t,e);else if(t instanceof Fh)t.target=t.target||e;else{var i=t;vh(t=new Fh(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=lf(o,r,!0,t)&&i}if(i=lf(o=t.g=e,r,!0,t)&&i,i=lf(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=lf(o=t.g=n[s],r,!1,t)&&i}function lf(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,l=o.ia||o.src;o.fa&&Hh(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}th(of,nh),of.prototype[jh]=!0,of.prototype.removeEventListener=function(e,t,n,r){Jh(this,e,t,n,r)},of.prototype.M=function(){if(of.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)zh(n[r]);delete t.g[e],t.h--}}this.I=null},of.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},of.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var uf=Hc.JSON.stringify;function cf(){var e=vf,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var hf,ff=function(){function e(){this.h=this.g=null}return e.prototype.add=function(e,t){var n=df.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},e}(),df=new(function(){function e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return e.prototype.get=function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e},e}())((function(){return new pf}),(function(e){return e.reset()})),pf=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function mf(e){Hc.setTimeout((function(){throw e}),0)}function gf(e,t){hf||function(){var e=Hc.Promise.resolve(void 0);hf=function(){e.then(wf)}}(),yf||(hf(),yf=!0),vf.add(e,t)}var yf=!1,vf=new ff;function wf(){for(var e;e=cf();){try{e.h.call(e.g)}catch(e){mf(e)}var t=df;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}yf=!1}function bf(e,t){of.call(this),this.h=e||1,this.g=t||Hc,this.j=Zc(this.kb,this),this.l=Date.now()}function Ef(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Sf(e,t,n){if("function"==typeof e)n&&(e=Zc(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Zc(e.handleEvent,e)}return 2147483647<Number(t)?-1:Hc.setTimeout(e,t||0)}function kf(e){e.g=Sf((function(){e.g=null,e.i&&(e.i=!1,kf(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}th(bf,of),(qc=bf.prototype).da=!1,qc.S=null,qc.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),af(this,"tick"),this.da&&(Ef(this),this.start()))}},qc.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},qc.M=function(){bf.Z.M.call(this),Ef(this),delete this.g};var xf=function(e){function t(t,n){var r=e.call(this)||this;return r.m=t,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}jc(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:kf(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(Hc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(nh);function Tf(e){nh.call(this),this.h=e,this.g={}}th(Tf,nh);var Cf=[];function If(e,t,n,r){Array.isArray(n)||(n&&(Cf[0]=n.toString()),n=Cf);for(var i=0;i<n.length;i++){var s=Qh(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function _f(e){mh(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Zh(e)}),e),e.g={}}function Nf(){this.g=!0}function Df(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return uf(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Tf.prototype.M=function(){Tf.Z.M.call(this),_f(this)},Tf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Nf.prototype.Aa=function(){this.g=!1},Nf.prototype.info=function(){};var Lf={},Af=null;function Of(){return Af=Af||new of}function Rf(e){Fh.call(this,Lf.Ma,e)}function Pf(e){var t=Of();af(t,new Rf(t,e))}function Mf(e,t){Fh.call(this,Lf.STAT_EVENT,e),this.stat=t}function Ff(e){var t=Of();af(t,new Mf(t,e))}function Uf(e,t){Fh.call(this,Lf.Na,e),this.size=t}function Vf(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Hc.setTimeout((function(){e()}),t)}Lf.Ma="serverreachability",th(Rf,Fh),Lf.STAT_EVENT="statevent",th(Mf,Fh),Lf.Na="timingevent",th(Uf,Fh);var jf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Bf={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function qf(){}function zf(e){return e.h||(e.h=e.i())}function $f(){}qf.prototype.h=null;var Hf,Kf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Wf(){Fh.call(this,"d")}function Gf(){Fh.call(this,"c")}function Qf(){}function Yf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Tf(this),this.P=Jf,e=xh?125:void 0,this.W=new bf(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Xf}function Xf(){this.i=null,this.g="",this.h=!1}th(Wf,Fh),th(Gf,Fh),th(Qf,qf),Qf.prototype.g=function(){return new XMLHttpRequest},Qf.prototype.i=function(){return{}},Hf=new Qf;var Jf=45e3,Zf={},ed={};function td(e,t,n){e.K=1,e.v=xd(vd(t)),e.s=n,e.U=!0,nd(e,null)}function nd(e,t){e.F=Date.now(),od(e),e.A=vd(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Fd(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Xf,e.g=Up(e.l,n?t:null,!e.s),0<e.O&&(e.L=new xf(Zc(e.Ia,e,e.g),e.O)),If(e.V,e.g,"readystatechange",e.gb),t=e.H?gh(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Pf(1),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function rd(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function id(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=sd(e,n))==ed){4==t&&(e.o=4,Ff(14),i=!1),Df(e.j,e.m,null,"[Incomplete Response]");break}if(r==Zf){e.o=4,Ff(15),Df(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Df(e.j,e.m,r,null),hd(e,r)}rd(e)&&r!=ed&&r!=Zf&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ff(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Dp(t),t.L=!0,Ff(11))):(Df(e.j,e.m,n,"[Invalid Chunked Response]"),cd(e),ud(e))}function sd(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?ed:(n=Number(t.substring(n,r)),isNaN(n)?Zf:(r+=1)+n>t.length?ed:(t=t.substr(r,n),e.C=r+n,t))}function od(e){e.Y=Date.now()+e.P,ad(e,e.P)}function ad(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Vf(Zc(e.eb,e),t)}function ld(e){e.B&&(Hc.clearTimeout(e.B),e.B=null)}function ud(e){0==e.l.G||e.I||Op(e.l,e)}function cd(e){ld(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Ef(e.W),_f(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function hd(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||$d(n.i,e)))if(n.I=e.N,!e.J&&$d(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(s){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Ap(n),Ep(n)}Np(n),Ff(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Vf(Zc(n.ab,n),6e3));if(1>=zd(n.i)&&n.ka){try{n.ka()}catch(s){}n.ka=void 0}}else Pp(n,11)}else if((e.J||n.g==e)&&Ap(n),!lh(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var s=i[t];if(n.U=s[0],s=s[1],2==n.G)if("c"==s[0]){n.J=s[1],n.la=s[2];var o=s[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var a=s[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var l=s[5];null!=l&&"number"==typeof l&&0<l&&(r=1.5*l,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var u=e.g;if(u){var c=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=r.i;!h.g&&(hh(c,"spdy")||hh(c,"quic")||hh(c,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Hd(h,h.h),h.h=null))}if(r.D){var f=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,kd(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Fp(r,r.H?r.la:null,r.W),d.J){Kd(r.i,d);var p=d,m=r.K;m&&p.setTimeout(m),p.B&&(ld(p),od(p)),r.g=d}else _p(r);0<n.l.length&&xp(n)}else"stop"!=s[0]&&"close"!=s[0]||Pp(n,7);else 3==n.G&&("stop"==s[0]||"close"==s[0]?"stop"==s[0]?Pp(n,7):bp(n):"noop"!=s[0]&&n.j&&n.j.wa(s),n.A=0)}Pf(4)}catch(s){}}function fd(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Wc(e)||"string"==typeof e)sh(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Wc(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(Wc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function dd(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof dd)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function pd(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];md(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)md(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function md(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(qc=Yf.prototype).setTimeout=function(e){this.P=e},qc.gb=function(e){e=e.target;var t=this.L;t&&3==mp(e)?t.l():this.Ia(e)},qc.Ia=function(e){try{if(e==this.g)e:{var t=mp(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||xh||this.g&&(this.h.h||this.g.ga()||gp(this.g)))){this.I||4!=t||7==n||Pf(8==n||0>=r?3:2),ld(this);var i=this.g.ba();this.N=i;t:if(rd(this)){var s=gp(this.g);e="";var o=s.length,a=4==mp(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){cd(this),ud(this);var l="";break t}this.h.i=new Hc.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(s[n],{stream:a&&n==o-1});s.splice(0,o),this.h.g+=e,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!lh(u)){var h=u;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,Ff(12),cd(this),ud(this);break e}Df(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,hd(this,i)}this.U?(id(this,t,l),xh&&this.i&&3==t&&(If(this.V,this.W,"tick",this.fb),this.W.start())):(Df(this.j,this.m,l,null),hd(this,l)),4==t&&cd(this),this.i&&!this.I&&(4==t?Op(this.l,this):(this.i=!1,od(this)))}else 400==i&&0<l.indexOf("Unknown SID")?(this.o=3,Ff(12)):(this.o=0,Ff(13)),cd(this),ud(this)}}}catch(t){}},qc.fb=function(){if(this.g){var e=mp(this.g),t=this.g.ga();this.C<t.length&&(ld(this),id(this,e,t),this.i&&4!=e&&od(this))}},qc.cancel=function(){this.I=!0,cd(this)},qc.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Pf(3),Ff(17)),cd(this),this.o=2,ud(this)):ad(this,this.Y-e)},(qc=dd.prototype).R=function(){pd(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},qc.T=function(){return pd(this),this.g.concat()},qc.get=function(e,t){return md(this.h,e)?this.h[e]:t},qc.set=function(e,t){md(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},qc.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};var gd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function yd(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof yd){this.g=void 0!==t?t:e.g,wd(this,e.j),this.s=e.s,bd(this,e.i),Ed(this,e.m),this.l=e.l,t=e.h;var n=new Od;n.i=t.i,t.g&&(n.g=new dd(t.g),n.h=t.h),Sd(this,n),this.o=e.o}else e&&(n=String(e).match(gd))?(this.g=!!t,wd(this,n[1]||"",!0),this.s=Td(n[2]||""),bd(this,n[3]||"",!0),Ed(this,n[4]),this.l=Td(n[5]||"",!0),Sd(this,n[6]||"",!0),this.o=Td(n[7]||"")):(this.g=!!t,this.h=new Od(null,this.g))}function vd(e){return new yd(e)}function wd(e,t,n){e.j=n?Td(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function bd(e,t,n){e.i=n?Td(t,!0):t}function Ed(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Sd(e,t,n){t instanceof Od?(e.h=t,function(e,t){t&&!e.j&&(Rd(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Pd(this,t),Fd(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Cd(t,Ld)),e.h=new Od(t,e.g))}function kd(e,t,n){e.h.set(t,n)}function xd(e){return kd(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Td(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Cd(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Id),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Id(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}yd.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Cd(t,_d,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Cd(t,_d,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Cd(n,"/"==n.charAt(0)?Dd:Nd,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Cd(n,Ad)),e.join("")};var _d=/[#\/\?@]/g,Nd=/[#\?:]/g,Dd=/[#\?]/g,Ld=/[#\?@]/g,Ad=/#/g;function Od(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Rd(e){e.g||(e.g=new dd,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Pd(e,t){Rd(e),t=Ud(e,t),md(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,md((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&pd(e)))}function Md(e,t){return Rd(e),t=Ud(e,t),md(e.g.h,t)}function Fd(e,t,n){Pd(e,t),0<n.length&&(e.i=null,e.g.set(Ud(e,t),ah(n)),e.h+=n.length)}function Ud(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(qc=Od.prototype).add=function(e,t){Rd(this),this.i=null,e=Ud(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},qc.forEach=function(e,t){Rd(this),this.g.forEach((function(n,r){sh(n,(function(n){e.call(t,n,r,this)}),this)}),this)},qc.T=function(){Rd(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},qc.R=function(e){Rd(this);var t=[];if("string"==typeof e)Md(this,e)&&(t=oh(t,this.g.get(Ud(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=oh(t,e[n])}return t},qc.set=function(e,t){return Rd(this),this.i=null,Md(this,e=Ud(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},qc.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},qc.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.i=e.join("&")};var Vd=function(e,t){this.h=e,this.g=t};function jd(e){this.l=e||Bd,Hc.PerformanceNavigationTiming?e=0<(e=Hc.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Hc.g&&Hc.g.Ea&&Hc.g.Ea()&&Hc.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Bd=10;function qd(e){return!!e.h||!!e.g&&e.g.size>=e.j}function zd(e){return e.h?1:e.g?e.g.size:0}function $d(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Hd(e,t){e.g?e.g.add(t):e.h=t}function Kd(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Wd(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var i=Bc(e.g.values()),s=i.next();!s.done;s=i.next()){var o=s.value;r=r.concat(o.D)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return ah(e.i)}function Gd(){}function Qd(){this.g=new Gd}function Yd(e,t,n){var r=n||"";try{fd(e,(function(e,n){var i=e;Gc(e)&&(i=uf(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Xd(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function Jd(e){this.l=e.$b||null,this.j=e.ib||!1}function Zd(e,t){of.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=ep,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jd.prototype.cancel=function(){var e,t;if(this.i=Wd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Bc(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},Gd.prototype.stringify=function(e){return Hc.JSON.stringify(e,void 0)},Gd.prototype.parse=function(e){return Hc.JSON.parse(e,void 0)},th(Jd,qf),Jd.prototype.g=function(){return new Zd(this.l,this.j)},Jd.prototype.i=function(e){return function(){return e}}({}),th(Zd,of);var ep=0;function tp(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function np(e){e.readyState=4,e.l=null,e.j=null,e.A=null,rp(e)}function rp(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(qc=Zd.prototype).open=function(e,t){if(this.readyState!=ep)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,rp(this)},qc.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Hc).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},qc.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,np(this)),this.readyState=ep},qc.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,rp(this)),this.g&&(this.readyState=3,rp(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Hc.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tp(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},qc.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?np(this):rp(this),3==this.readyState&&tp(this)}},qc.Ua=function(e){this.g&&(this.response=this.responseText=e,np(this))},qc.Ta=function(e){this.g&&(this.response=e,np(this))},qc.ha=function(){this.g&&np(this)},qc.setRequestHeader=function(e,t){this.v.append(e,t)},qc.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},qc.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Zd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ip=Hc.JSON.parse;function sp(e){of.call(this),this.headers=new dd,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=op,this.K=this.L=!1}th(sp,of);var op="",ap=/^https?$/i,lp=["POST","PUT"];function up(e){return"content-type"==e.toLowerCase()}function cp(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,hp(e),dp(e)}function hp(e){e.D||(e.D=!0,af(e,"complete"),af(e,"error"))}function fp(e){if(e.h&&void 0!==$c&&(!e.C[1]||4!=mp(e)||2!=e.ba()))if(e.v&&4==mp(e))Sf(e.Fa,0,e);else if(af(e,"readystatechange"),4==mp(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.H).match(gd)[1]||null;if(!s&&Hc.self&&Hc.self.location){var o=Hc.self.location.protocol;s=o.substr(0,o.length-1)}i=!ap.test(s?s.toLowerCase():"")}t=i}if(t)af(e,"complete"),af(e,"success");else{e.m=6;try{var a=2<mp(e)?e.g.statusText:""}catch(e){a=""}e.j=a+" ["+e.ba()+"]",hp(e)}}finally{dp(e)}}}function dp(e,t){if(e.g){pp(e);var n=e.g,r=e.C[0]?Kc:null;e.g=null,e.C=null,t||af(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function pp(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Hc.clearTimeout(e.A),e.A=null)}function mp(e){return e.g?e.g.readyState:0}function gp(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case op:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function yp(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return mh(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):kd(e,t,n))}function vp(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function wp(e){this.za=0,this.l=[],this.h=new Nf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=vp("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=vp("baseRetryDelayMs",5e3,e),this.$a=vp("retryDelaySeedMs",1e4,e),this.Ya=vp("forwardChannelMaxRetries",2,e),this.ra=vp("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new jd(e&&e.concurrentRequestLimit),this.Ca=new Qd,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function bp(e){if(Sp(e),3==e.G){var t=e.V++,n=vd(e.F);kd(n,"SID",e.J),kd(n,"RID",t),kd(n,"TYPE","terminate"),Cp(e,n),(t=new Yf(e,e.h,t,void 0)).K=2,t.v=xd(vd(n)),n=!1,Hc.navigator&&Hc.navigator.sendBeacon&&(n=Hc.navigator.sendBeacon(t.v.toString(),"")),!n&&Hc.Image&&((new Image).src=t.v,n=!0),n||(t.g=Up(t.l,null),t.g.ea(t.v)),t.F=Date.now(),od(t)}Mp(e)}function Ep(e){e.g&&(Dp(e),e.g.cancel(),e.g=null)}function Sp(e){Ep(e),e.u&&(Hc.clearTimeout(e.u),e.u=null),Ap(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Hc.clearTimeout(e.m),e.m=null)}function kp(e,t){e.l.push(new Vd(e.Za++,t)),3==e.G&&xp(e)}function xp(e){qd(e.i)||e.m||(e.m=!0,gf(e.Ha,e),e.C=0)}function Tp(e,t){var n;n=t?t.m:e.V++;var r=vd(e.F);kd(r,"SID",e.J),kd(r,"RID",n),kd(r,"AID",e.U),Cp(e,r),e.o&&e.s&&yp(r,e.o,e.s),n=new Yf(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Ip(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Hd(e.i,n),td(n,r,t)}function Cp(e,t){e.j&&fd({},(function(e,n){kd(t,n,e)}))}function Ip(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Zc(e.j.Oa,e.j,e):null;e:for(var i=e.l,s=-1;;){var o=["count="+n];-1==s?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);for(var a=!0,l=0;l<n;l++){var u=i[l].h,c=i[l].g;if(0>(u-=s))s=Math.max(0,i[l].h-100),a=!1;else try{Yd(c,o,"req"+u+"_")}catch(e){r&&r(c)}}if(a){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function _p(e){e.g||e.u||(e.Y=1,gf(e.Ga,e),e.A=0)}function Np(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Vf(Zc(e.Ga,e),Rp(e,e.A)),e.A++,!0)}function Dp(e){null!=e.B&&(Hc.clearTimeout(e.B),e.B=null)}function Lp(e){e.g=new Yf(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=vd(e.oa);kd(t,"RID","rpc"),kd(t,"SID",e.J),kd(t,"CI",e.N?"0":"1"),kd(t,"AID",e.U),Cp(e,t),kd(t,"TYPE","xmlhttp"),e.o&&e.s&&yp(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=xd(vd(t)),n.s=null,n.U=!0,nd(n,e)}function Ap(e){null!=e.v&&(Hc.clearTimeout(e.v),e.v=null)}function Op(e,t){var n=null;if(e.g==t){Ap(e),Dp(e),e.g=null;var r=2}else{if(!$d(e.i,t))return;n=t.D,Kd(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;af(r=Of(),new Uf(r,n,t,i)),xp(e)}else _p(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(zd(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=Vf(Zc(e.Ha,e,t),Rp(e,e.C)),e.C++,0)))}(e,t)||2==r&&Np(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Pp(e,5);break;case 4:Pp(e,10);break;case 3:Pp(e,6);break;default:Pp(e,2)}}function Rp(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Pp(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Zc(e.jb,e);n||(n=new yd("//www.google.com/images/cleardot.gif"),Hc.location&&"http"==Hc.location.protocol||wd(n,"https"),xd(n)),function(e,t){var n=new Nf;if(Hc.Image){var r=new Image;r.onload=eh(Xd,n,r,"TestLoadImage: loaded",!0,t),r.onerror=eh(Xd,n,r,"TestLoadImage: error",!1,t),r.onabort=eh(Xd,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=eh(Xd,n,r,"TestLoadImage: timeout",!1,t),Hc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ff(2);e.G=0,e.j&&e.j.va(t),Mp(e),Sp(e)}function Mp(e){e.G=0,e.I=-1,e.j&&(0==Wd(e.i).length&&0==e.l.length||(e.i.i.length=0,ah(e.l),e.l.length=0),e.j.ua())}function Fp(e,t,n){var r=function(e){return e instanceof yd?vd(e):new yd(e,void 0)}(n);if(""!=r.i)t&&bd(r,t+"."+r.i),Ed(r,r.m);else{var i=Hc.location;r=function(e,t,n,r){var i=new yd(null,void 0);return e&&wd(i,e),t&&bd(i,t),n&&Ed(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&mh(e.aa,(function(e,t){kd(r,t,e)})),t=e.D,n=e.sa,t&&n&&kd(r,t,n),kd(r,"VER",e.ma),Cp(e,r),r}function Up(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new sp(new Jd({ib:!0})):new sp(e.qa)).L=e.H,t}function Vp(){}function jp(){if(Sh&&!(10<=Number(Ph)))throw Error("Environmental error: no available transport.")}function Bp(e,t){of.call(this),this.g=new wp(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!lh(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!lh(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new $p(this)}function qp(e){Wf.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function zp(){Gf.call(this),this.status=1}function $p(e){this.g=e}(qc=sp.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Hf.g(),this.C=this.u?zf(this.u):zf(Hf),this.g.onreadystatechange=Zc(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void cp(this,e)}e=n||"";var i=new dd(this.headers);r&&fd(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=up,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=Hc.FormData&&e instanceof Hc.FormData,!(0<=ih(lp,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pp(this),0<this.B&&((this.K=function(e){return Sh&&Oh()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zc(this.pa,this)):this.A=Sf(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){cp(this,e)}},qc.pa=function(){void 0!==$c&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,af(this,"timeout"),this.abort(8))},qc.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,af(this,"complete"),af(this,"abort"),dp(this))},qc.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),dp(this,!0)),sp.Z.M.call(this)},qc.Fa=function(){this.s||(this.F||this.v||this.l?fp(this):this.cb())},qc.cb=function(){fp(this)},qc.ba=function(){try{return 2<mp(this)?this.g.status:-1}catch(e){return-1}},qc.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},qc.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ip(t)}},qc.Da=function(){return this.m},qc.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(qc=wp.prototype).ma=8,qc.G=1,qc.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},qc.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Yf(this,this.h,e,void 0),n=this.s;if(this.P&&(n?vh(n=gh(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var s=this.l[i];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(r+=s)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ip(this,t,r),kd(i=vd(this.F),"RID",e),kd(i,"CVER",22),this.D&&kd(i,"X-HTTP-Session-Id",this.D),Cp(this,i),this.o&&n&&yp(i,this.o,n),Hd(this.i,t),this.Ra&&kd(i,"TYPE","init"),this.ja?(kd(i,"$req",r),kd(i,"SID","null"),t.$=!0,td(t,i,null)):td(t,i,r),this.G=2}}else 3==this.G&&(e?Tp(this,e):0==this.l.length||qd(this.i)||Tp(this))},qc.Ga=function(){if(this.u=null,Lp(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Vf(Zc(this.bb,this),e)}},qc.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ff(10),Ep(this),Lp(this))},qc.ab=function(){null!=this.v&&(this.v=null,Ep(this),Np(this),Ff(19))},qc.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Ff(2)):(this.h.info("Failed to ping google.com"),Ff(1))},(qc=Vp.prototype).xa=function(){},qc.wa=function(){},qc.va=function(){},qc.ua=function(){},qc.Oa=function(){},jp.prototype.g=function(e,t){return new Bp(e,t)},th(Bp,of),Bp.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),gf(Zc(e.hb,e,t))),Ff(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Fp(e,null,e.W),xp(e)},Bp.prototype.close=function(){bp(this.g)},Bp.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,kp(this.g,t)}else this.v?((t={}).__data__=uf(e),kp(this.g,t)):kp(this.g,e)},Bp.prototype.M=function(){this.g.j=null,delete this.j,bp(this.g),delete this.g,Bp.Z.M.call(this)},th(qp,Wf),th(zp,Gf),th($p,Vp),$p.prototype.xa=function(){af(this.g,"a")},$p.prototype.wa=function(e){af(this.g,new qp(e))},$p.prototype.va=function(e){af(this.g,new zp(e))},$p.prototype.ua=function(){af(this.g,"b")},jp.prototype.createWebChannel=jp.prototype.g,Bp.prototype.send=Bp.prototype.u,Bp.prototype.open=Bp.prototype.m,Bp.prototype.close=Bp.prototype.close,jf.NO_ERROR=0,jf.TIMEOUT=8,jf.HTTP_ERROR=6,Bf.COMPLETE="complete",$f.EventType=Kf,Kf.OPEN="a",Kf.CLOSE="b",Kf.ERROR="c",Kf.MESSAGE="d",of.prototype.listen=of.prototype.N,sp.prototype.listenOnce=sp.prototype.O,sp.prototype.getLastError=sp.prototype.La,sp.prototype.getLastErrorCode=sp.prototype.Da,sp.prototype.getStatus=sp.prototype.ba,sp.prototype.getResponseJson=sp.prototype.Qa,sp.prototype.getResponseText=sp.prototype.ga,sp.prototype.send=sp.prototype.ea;var Hp=jf,Kp=Bf,Wp=Lf,Gp=10,Qp=11,Yp=Jd,Xp=$f,Jp=sp;let Zp="8.8.1";class em{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.t(e),this.i=e=>t.writeSequenceNumber(e))}t(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.i&&this.i(e),e}}em.o=-1;const tm={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nm extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}const rm=new kc("@firebase/firestore");function im(){return rm.logLevel}function sm(e,...t){if(rm.logLevel<=gc.DEBUG){const n=t.map(lm);rm.debug(`Firestore (${Zp}): ${e}`,...n)}}function om(e,...t){if(rm.logLevel<=gc.ERROR){const n=t.map(lm);rm.error(`Firestore (${Zp}): ${e}`,...n)}}function am(e,...t){if(rm.logLevel<=gc.WARN){const n=t.map(lm);rm.warn(`Firestore (${Zp}): ${e}`,...n)}}function lm(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function um(e="Unexpected state"){const t=`FIRESTORE (${Zp}) INTERNAL ASSERTION FAILED: `+e;throw om(t),new Error(t)}function cm(e,t){e||um()}function hm(e,t){return e}function fm(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class dm{static u(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=fm(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function pm(e,t){return e<t?-1:e>t?1:0}function mm(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function gm(e){return e+"\0"}class ym{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new nm(tm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new nm(tm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new nm(tm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new nm(tm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ym.fromMillis(Date.now())}static fromDate(e){return ym.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ym(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pm(this.nanoseconds,e.nanoseconds):pm(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vm{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vm(e)}static min(){return new vm(new ym(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function wm(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function bm(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Em(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Sm{constructor(e,t,n){void 0===t?t=0:t>e.length&&um(),void 0===n?n=e.length-t:n>e.length-t&&um(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Sm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Sm?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class km extends Sm{construct(e,t,n){return new km(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new nm(tm.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new km(t)}static emptyPath(){return new km([])}}const xm=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tm extends Sm{construct(e,t,n){return new Tm(e,t,n)}static isValidIdentifier(e){return xm.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tm.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Tm(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new nm(tm.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new nm(tm.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new nm(tm.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new nm(tm.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tm(t)}static emptyPath(){return new Tm([])}}class Cm{constructor(e){this.fields=e,e.sort(Tm.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mm(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Im{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Im(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Im(t)}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pm(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Im.EMPTY_BYTE_STRING=new Im("");const _m=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nm(e){if(cm(!!e),"string"==typeof e){let t=0;const n=_m.exec(e);if(cm(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Dm(e.seconds),nanos:Dm(e.nanos)}}function Dm(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Lm(e){return"string"==typeof e?Im.fromBase64String(e):Im.fromUint8Array(e)}function Am(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Om(e){const t=e.mapValue.fields.__previous_value__;return Am(t)?Om(t):t}function Rm(e){const t=Nm(e.mapValue.fields.__local_write_time__.timestampValue);return new ym(t.seconds,t.nanos)}function Pm(e){return null==e}function Mm(e){return 0===e&&1/e==-1/0}class Fm{constructor(e){this.path=e}static fromPath(e){return new Fm(km.fromString(e))}static fromName(e){return new Fm(km.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===km.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return km.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fm(new km(e.slice()))}}function Um(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Am(e)?4:10:um()}function Vm(e,t){const n=Um(e);if(n!==Um(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Rm(e).isEqual(Rm(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Nm(e.timestampValue),r=Nm(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Lm(e.bytesValue).isEqual(Lm(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Dm(e.geoPointValue.latitude)===Dm(t.geoPointValue.latitude)&&Dm(e.geoPointValue.longitude)===Dm(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Dm(e.integerValue)===Dm(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Dm(e.doubleValue),r=Dm(t.doubleValue);return n===r?Mm(n)===Mm(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return mm(e.arrayValue.values||[],t.arrayValue.values||[],Vm);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(wm(n)!==wm(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!Vm(n[e],r[e])))return!1;return!0}(e,t);default:return um()}}function jm(e,t){return void 0!==(e.values||[]).find((e=>Vm(e,t)))}function Bm(e,t){const n=Um(e),r=Um(t);if(n!==r)return pm(n,r);switch(n){case 0:return 0;case 1:return pm(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Dm(e.integerValue||e.doubleValue),r=Dm(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return qm(e.timestampValue,t.timestampValue);case 4:return qm(Rm(e),Rm(t));case 5:return pm(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Lm(e),r=Lm(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=pm(n[e],r[e]);if(0!==t)return t}return pm(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=pm(Dm(e.latitude),Dm(t.latitude));return 0!==n?n:pm(Dm(e.longitude),Dm(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=Bm(n[e],r[e]);if(t)return t}return pm(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=pm(r[e],s[e]);if(0!==t)return t;const o=Bm(n[r[e]],i[s[e]]);if(0!==o)return o}return pm(r.length,s.length)}(e.mapValue,t.mapValue);default:throw um()}}function qm(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return pm(e,t);const n=Nm(e),r=Nm(t),i=pm(n.seconds,r.seconds);return 0!==i?i:pm(n.nanos,r.nanos)}function zm(e){return $m(e)}function $m(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Nm(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Lm(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Fm.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=$m(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${$m(e.fields[i])}`;return n+"}"}(e.mapValue):um();var t,n}function Hm(e){return!!e&&"integerValue"in e}function Km(e){return!!e&&"arrayValue"in e}function Wm(e){return!!e&&"nullValue"in e}function Gm(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Qm(e){return!!e&&"mapValue"in e}function Ym(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return bm(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Ym(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ym(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Xm{constructor(e){this.value=e}static empty(){return new Xm({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Qm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ym(t)}setAll(e){let t=Tm.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ym(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Qm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vm(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Qm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){bm(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new Xm(Ym(this.value))}}function Jm(e){const t=[];return bm(e.fields,((e,n)=>{const r=new Tm([e]);if(Qm(n)){const e=Jm(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Cm(t)}class Zm{constructor(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}static newInvalidDocument(e){return new Zm(e,0,vm.min(),Xm.empty(),0)}static newFoundDocument(e,t,n){return new Zm(e,1,t,n,0)}static newNoDocument(e,t){return new Zm(e,2,t,Xm.empty(),0)}static newUnknownDocument(e,t){return new Zm(e,3,t,Xm.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xm.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xm.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Zm&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Zm(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class eg{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.h=null}}function tg(e,t=null,n=[],r=[],i=null,s=null,o=null){return new eg(e,t,n,r,i,s,o)}function ng(e){const t=hm(e);if(null===t.h){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>function(e){return e.field.canonicalString()+e.op.toString()+zm(e.value)}(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Pm(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=mg(t.startAt)),t.endAt&&(e+="|ub:",e+=mg(t.endAt)),t.h=e}return t.h}function rg(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!yg(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(n=e.filters[i],r=t.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!Vm(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!wg(e.startAt,t.startAt)&&wg(e.endAt,t.endAt)}function ig(e){return Fm.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class sg extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.l(e,t,n):new og(e,t,n):"array-contains"===t?new cg(e,n):"in"===t?new hg(e,n):"not-in"===t?new fg(e,n):"array-contains-any"===t?new dg(e,n):new sg(e,t,n)}static l(e,t,n){return"in"===t?new ag(e,n):new lg(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.m(Bm(t,this.value)):null!==t&&Um(this.value)===Um(t)&&this.m(Bm(t,this.value))}m(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return um()}}g(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class og extends sg{constructor(e,t,n){super(e,t,n),this.key=Fm.fromName(n.referenceValue)}matches(e){const t=Fm.comparator(e.key,this.key);return this.m(t)}}class ag extends sg{constructor(e,t){super(e,"in",t),this.keys=ug("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lg extends sg{constructor(e,t){super(e,"not-in",t),this.keys=ug("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ug(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Fm.fromName(e.referenceValue)))}class cg extends sg{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Km(t)&&jm(t.arrayValue,this.value)}}class hg extends sg{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&jm(this.value.arrayValue,t)}}class fg extends sg{constructor(e,t){super(e,"not-in",t)}matches(e){if(jm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!jm(this.value.arrayValue,t)}}class dg extends sg{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Km(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>jm(this.value.arrayValue,e)))}}class pg{constructor(e,t){this.position=e,this.before=t}}function mg(e){return`${e.before?"b":"a"}:${e.position.map((e=>zm(e))).join(",")}`}class gg{constructor(e,t="asc"){this.field=e,this.dir=t}}function yg(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function vg(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Fm.comparator(Fm.fromName(o.referenceValue),n.key):Bm(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function wg(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Vm(e.position[n],t.position[n]))return!1;return!0}class bg{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt}}function Eg(e){return new bg(e)}function Sg(e){return!Pm(e.limit)&&"F"===e.limitType}function kg(e){return!Pm(e.limit)&&"L"===e.limitType}function xg(e){const t=hm(e);if(null===t.p){t.p=[];const e=function(e){for(const t of e.filters)if(t.g())return t.field;return null}(t),n=function(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}(t);if(null!==e&&null===n)e.isKeyField()||t.p.push(new gg(e)),t.p.push(new gg(Tm.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.p.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new gg(Tm.keyField(),e))}}}return t.p}function Tg(e){const t=hm(e);if(!t.T)if("F"===t.limitType)t.T=tg(t.path,t.collectionGroup,xg(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const n of xg(t)){const t="desc"===n.dir?"asc":"desc";e.push(new gg(n.field,t))}const n=t.endAt?new pg(t.endAt.position,!t.endAt.before):null,r=t.startAt?new pg(t.startAt.position,!t.startAt.before):null;t.T=tg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.T}function Cg(e,t){return rg(Tg(e),Tg(t))&&e.limitType===t.limitType}function Ig(e){return`${ng(Tg(e))}|lt:${e.limitType}`}function _g(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>{return`${(t=e).field.canonicalString()} ${t.op} ${zm(t.value)}`;var t})).join(", ")}]`),Pm(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: "+mg(e.startAt)),e.endAt&&(t+=", endAt: "+mg(e.endAt)),`Target(${t})`}(Tg(e))}; limitType=${e.limitType})`}function Ng(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Fm.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!vg(e.startAt,xg(e),t))&&(!e.endAt||!vg(e.endAt,xg(e),t))}(e,t)}function Dg(e){return(t,n)=>{let r=!1;for(const i of xg(e)){const e=Lg(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Lg(e,t,n){const r=e.field.isKeyField()?Fm.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Bm(r,i):um()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return um()}}function Ag(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mm(t)?"-0":t}}function Og(e){return{integerValue:""+e}}function Rg(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!Mm(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?Og(t):Ag(e,t)}class Pg{constructor(){this._=void 0}}function Mg(e,t,n){return e instanceof Vg?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof jg?Bg(e,t):e instanceof qg?zg(e,t):function(e,t){const n=Ug(e,t),r=Hg(n)+Hg(e.A);return Hm(n)&&Hm(e.A)?Og(r):Ag(e.R,r)}(e,t)}function Fg(e,t,n){return e instanceof jg?Bg(e,t):e instanceof qg?zg(e,t):n}function Ug(e,t){return e instanceof $g?Hm(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Vg extends Pg{}class jg extends Pg{constructor(e){super(),this.elements=e}}function Bg(e,t){const n=Kg(t);for(const t of e.elements)n.some((e=>Vm(e,t)))||n.push(t);return{arrayValue:{values:n}}}class qg extends Pg{constructor(e){super(),this.elements=e}}function zg(e,t){let n=Kg(t);for(const t of e.elements)n=n.filter((e=>!Vm(e,t)));return{arrayValue:{values:n}}}class $g extends Pg{constructor(e,t){super(),this.R=e,this.A=t}}function Hg(e){return Dm(e.integerValue||e.doubleValue)}function Kg(e){return Km(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Wg{constructor(e,t){this.field=e,this.transform=t}}class Gg{constructor(e,t){this.version=e,this.transformResults=t}}class Qg{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qg}static exists(e){return new Qg(void 0,e)}static updateTime(e){return new Qg(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yg(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Xg{}function Jg(e,t,n){e instanceof ry?function(e,t,n){const r=e.value.clone(),i=oy(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof iy?function(e,t,n){if(!Yg(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=oy(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(sy(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Zg(e,t,n){e instanceof ry?function(e,t,n){if(!Yg(e.precondition,t))return;const r=e.value.clone(),i=ay(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(ny(t),r).setHasLocalMutations()}(e,t,n):e instanceof iy?function(e,t,n){if(!Yg(e.precondition,t))return;const r=ay(e.fieldTransforms,n,t),i=t.data;i.setAll(sy(e)),i.setAll(r),t.convertToFoundDocument(ny(t),i).setHasLocalMutations()}(e,t,n):function(e,t){Yg(e.precondition,t)&&t.convertToNoDocument(vm.min())}(e,t)}function ey(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Ug(r.transform,e||null);null!=i&&(null==n&&(n=Xm.empty()),n.set(r.field,i))}return n||null}function ty(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&mm(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof jg&&t instanceof jg||e instanceof qg&&t instanceof qg?mm(e.elements,t.elements,Vm):e instanceof $g&&t instanceof $g?Vm(e.A,t.A):e instanceof Vg&&t instanceof Vg}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function ny(e){return e.isFoundDocument()?e.version:vm.min()}class ry extends Xg{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class iy extends Xg{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function sy(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function oy(e,t,n){const r=new Map;cm(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Fg(o,a,n[i]))}return r}function ay(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Mg(e,s,t))}return r}class ly extends Xg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class uy extends Xg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class cy{constructor(e){this.count=e}}var hy,fy;function dy(e){if(void 0===e)return om("GRPC error has no .code"),tm.UNKNOWN;switch(e){case hy.OK:return tm.OK;case hy.CANCELLED:return tm.CANCELLED;case hy.UNKNOWN:return tm.UNKNOWN;case hy.DEADLINE_EXCEEDED:return tm.DEADLINE_EXCEEDED;case hy.RESOURCE_EXHAUSTED:return tm.RESOURCE_EXHAUSTED;case hy.INTERNAL:return tm.INTERNAL;case hy.UNAVAILABLE:return tm.UNAVAILABLE;case hy.UNAUTHENTICATED:return tm.UNAUTHENTICATED;case hy.INVALID_ARGUMENT:return tm.INVALID_ARGUMENT;case hy.NOT_FOUND:return tm.NOT_FOUND;case hy.ALREADY_EXISTS:return tm.ALREADY_EXISTS;case hy.PERMISSION_DENIED:return tm.PERMISSION_DENIED;case hy.FAILED_PRECONDITION:return tm.FAILED_PRECONDITION;case hy.ABORTED:return tm.ABORTED;case hy.OUT_OF_RANGE:return tm.OUT_OF_RANGE;case hy.UNIMPLEMENTED:return tm.UNIMPLEMENTED;case hy.DATA_LOSS:return tm.DATA_LOSS;default:return um()}}(fy=hy||(hy={}))[fy.OK=0]="OK",fy[fy.CANCELLED=1]="CANCELLED",fy[fy.UNKNOWN=2]="UNKNOWN",fy[fy.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fy[fy.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fy[fy.NOT_FOUND=5]="NOT_FOUND",fy[fy.ALREADY_EXISTS=6]="ALREADY_EXISTS",fy[fy.PERMISSION_DENIED=7]="PERMISSION_DENIED",fy[fy.UNAUTHENTICATED=16]="UNAUTHENTICATED",fy[fy.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fy[fy.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fy[fy.ABORTED=10]="ABORTED",fy[fy.OUT_OF_RANGE=11]="OUT_OF_RANGE",fy[fy.UNIMPLEMENTED=12]="UNIMPLEMENTED",fy[fy.INTERNAL=13]="INTERNAL",fy[fy.UNAVAILABLE=14]="UNAVAILABLE",fy[fy.DATA_LOSS=15]="DATA_LOSS";class py{constructor(e,t){this.comparator=e,this.root=t||gy.EMPTY}insert(e,t){return new py(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gy.BLACK,null,null))}remove(e){return new py(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gy.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new my(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new my(this.root,e,this.comparator,!1)}getReverseIterator(){return new my(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new my(this.root,e,this.comparator,!0)}}class my{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gy{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:gy.RED,this.left=null!=r?r:gy.EMPTY,this.right=null!=i?i:gy.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new gy(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return gy.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return gy.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gy.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gy.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw um();if(this.right.isRed())throw um();const e=this.left.check();if(e!==this.right.check())throw um();return e+(this.isRed()?0:1)}}gy.EMPTY=null,gy.RED=!0,gy.BLACK=!1,gy.EMPTY=new class{constructor(){this.size=0}get key(){throw um()}get value(){throw um()}get color(){throw um()}get left(){throw um()}get right(){throw um()}copy(e,t,n,r,i){return this}insert(e,t,n){return new gy(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yy{constructor(e){this.comparator=e,this.data=new py(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vy(this.data.getIterator())}getIteratorFrom(e){return new vy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof yy))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new yy(this.comparator);return t.data=e,t}}class vy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const wy=new py(Fm.comparator);function by(){return wy}const Ey=new py(Fm.comparator);function Sy(){return Ey}const ky=new py(Fm.comparator);const xy=new yy(Fm.comparator);function Ty(...e){let t=xy;for(const n of e)t=t.add(n);return t}const Cy=new yy(pm);function Iy(){return Cy}class _y{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,Ny.createSynthesizedTargetChangeForCurrentChange(e,t)),new _y(vm.min(),n,Iy(),by(),Ty())}}class Ny{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Ny(Im.EMPTY_BYTE_STRING,t,Ty(),Ty(),Ty())}}class Dy{constructor(e,t,n,r){this.P=e,this.removedTargetIds=t,this.key=n,this.v=r}}class Ly{constructor(e,t){this.targetId=e,this.V=t}}class Ay{constructor(e,t,n=Im.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Oy{constructor(){this.S=0,this.D=My(),this.C=Im.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}get current(){return this.N}get resumeToken(){return this.C}get $(){return 0!==this.S}get O(){return this.k}F(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)}M(){let e=Ty(),t=Ty(),n=Ty();return this.D.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:um()}})),new Ny(this.C,this.N,e,t,n)}L(){this.k=!1,this.D=My()}B(e,t){this.k=!0,this.D=this.D.insert(e,t)}U(e){this.k=!0,this.D=this.D.remove(e)}q(){this.S+=1}K(){this.S-=1}j(){this.k=!0,this.N=!0}}class Ry{constructor(e){this.W=e,this.G=new Map,this.H=by(),this.J=Py(),this.Y=new yy(pm)}X(e){for(const t of e.P)e.v&&e.v.isFoundDocument()?this.Z(t,e.v):this.tt(t,e.key,e.v);for(const t of e.removedTargetIds)this.tt(t,e.key,e.v)}et(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.st(t)&&n.F(e.resumeToken);break;case 1:n.K(),n.$||n.L(),n.F(e.resumeToken);break;case 2:n.K(),n.$||this.removeTarget(t);break;case 3:this.st(t)&&(n.j(),n.F(e.resumeToken));break;case 4:this.st(t)&&(this.it(t),n.F(e.resumeToken));break;default:um()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.G.forEach(((e,n)=>{this.st(n)&&t(n)}))}rt(e){const t=e.targetId,n=e.V.count,r=this.ot(t);if(r){const e=r.target;if(ig(e))if(0===n){const n=new Fm(e.path);this.tt(t,n,Zm.newNoDocument(n,vm.min()))}else cm(1===n);else this.ct(t)!==n&&(this.it(t),this.Y=this.Y.add(t))}}ut(e){const t=new Map;this.G.forEach(((n,r)=>{const i=this.ot(r);if(i){if(n.current&&ig(i.target)){const t=new Fm(i.target.path);null!==this.H.get(t)||this.at(r,t)||this.tt(r,t,Zm.newNoDocument(t,e))}n.O&&(t.set(r,n.M()),n.L())}}));let n=Ty();this.J.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.ot(e);return!t||2===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))}));const r=new _y(e,t,this.Y,this.H,n);return this.H=by(),this.J=Py(),this.Y=new yy(pm),r}Z(e,t){if(!this.st(e))return;const n=this.at(e,t.key)?2:0;this.nt(e).B(t.key,n),this.H=this.H.insert(t.key,t),this.J=this.J.insert(t.key,this.ht(t.key).add(e))}tt(e,t,n){if(!this.st(e))return;const r=this.nt(e);this.at(e,t)?r.B(t,1):r.U(t),this.J=this.J.insert(t,this.ht(t).delete(e)),n&&(this.H=this.H.insert(t,n))}removeTarget(e){this.G.delete(e)}ct(e){const t=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}q(e){this.nt(e).q()}nt(e){let t=this.G.get(e);return t||(t=new Oy,this.G.set(e,t)),t}ht(e){let t=this.J.get(e);return t||(t=new yy(pm),this.J=this.J.insert(e,t)),t}st(e){const t=null!==this.ot(e);return t||sm("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.G.get(e);return t&&t.$?null:this.W.lt(e)}it(e){this.G.set(e,new Oy),this.W.getRemoteKeysForTarget(e).forEach((t=>{this.tt(e,t,null)}))}at(e,t){return this.W.getRemoteKeysForTarget(e).has(t)}}function Py(){return new py(Fm.comparator)}function My(){return new py(Fm.comparator)}const Fy={asc:"ASCENDING",desc:"DESCENDING"},Uy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Vy{constructor(e,t){this.databaseId=e,this.I=t}}function jy(e,t){return e.I?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function By(e,t){return e.I?t.toBase64():t.toUint8Array()}function qy(e,t){return jy(e,t.toTimestamp())}function zy(e){return cm(!!e),vm.fromTimestamp(function(e){const t=Nm(e);return new ym(t.seconds,t.nanos)}(e))}function $y(e,t){return function(e){return new km(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Hy(e){const t=km.fromString(e);return cm(pv(t)),t}function Ky(e,t){return $y(e.databaseId,t.path)}function Wy(e,t){const n=Hy(t);if(n.get(1)!==e.databaseId.projectId)throw new nm(tm.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new nm(tm.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Fm(Xy(n))}function Gy(e,t){return $y(e.databaseId,t)}function Qy(e){const t=Hy(e);return 4===t.length?km.emptyPath():Xy(t)}function Yy(e){return new km(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Xy(e){return cm(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Jy(e,t,n){return{name:Ky(e,t),fields:n.value.mapValue.fields}}function Zy(e,t){let n;if(t instanceof ry)n={update:Jy(e,t.key,t.value)};else if(t instanceof ly)n={delete:Ky(e,t.key)};else if(t instanceof iy)n={update:Jy(e,t.key,t.data),updateMask:dv(t.fieldMask)};else{if(!(t instanceof uy))return um();n={verify:Ky(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Vg)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof jg)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof qg)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof $g)return{fieldPath:t.field.canonicalString(),increment:n.A};throw um()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:qy(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:um()}(e,t.precondition)),n}function ev(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Qg.updateTime(zy(e.updateTime)):void 0!==e.exists?Qg.exists(e.exists):Qg.none()}(t.currentDocument):Qg.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)cm("REQUEST_TIME"===t.setToServerValue),n=new Vg;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new jg(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new qg(e)}else"increment"in t?n=new $g(e,t.increment):um();const r=Tm.fromServerFormat(t.fieldPath);return new Wg(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Wy(e,t.update.name),s=new Xm({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Cm(t.map((e=>Tm.fromServerFormat(e))))}(t.updateMask);return new iy(i,s,e,n,r)}return new ry(i,s,n,r)}if(t.delete){const r=Wy(e,t.delete);return new ly(r,n)}if(t.verify){const r=Wy(e,t.verify);return new uy(r,n)}return um()}function tv(e,t){return{documents:[Gy(e,t.path)]}}function nv(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Gy(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Gy(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map((e=>function(e){if("=="===e.op){if(Gm(e.value))return{unaryFilter:{field:uv(e.field),op:"IS_NAN"}};if(Wm(e.value))return{unaryFilter:{field:uv(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Gm(e.value))return{unaryFilter:{field:uv(e.field),op:"IS_NOT_NAN"}};if(Wm(e.value))return{unaryFilter:{field:uv(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uv(e.field),op:lv(e.op),value:e.value}}}(e)));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:uv(e.field),direction:av(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.I||Pm(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=sv(t.startAt)),t.endAt&&(n.structuredQuery.endAt=sv(t.endAt)),n}function rv(e){let t=Qy(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){cm(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=iv(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new gg(cv(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Pm(t)?null:t}(n.limit));let l=null;n.startAt&&(l=ov(n.startAt));let u=null;return n.endAt&&(u=ov(n.endAt)),function(e,t,n,r,i,s,o,a){return new bg(e,t,n,r,i,s,o,a)}(t,i,o,s,a,"F",l,u)}function iv(e){return e?void 0!==e.unaryFilter?[fv(e)]:void 0!==e.fieldFilter?[hv(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((e=>iv(e))).reduce(((e,t)=>e.concat(t))):um():[]}function sv(e){return{before:e.before,values:e.position}}function ov(e){const t=!!e.before,n=e.values||[];return new pg(n,t)}function av(e){return Fy[e]}function lv(e){return Uy[e]}function uv(e){return{fieldPath:e.canonicalString()}}function cv(e){return Tm.fromServerFormat(e.fieldPath)}function hv(e){return sg.create(cv(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return um()}}(e.fieldFilter.op),e.fieldFilter.value)}function fv(e){switch(e.unaryFilter.op){case"IS_NAN":const t=cv(e.unaryFilter.field);return sg.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=cv(e.unaryFilter.field);return sg.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=cv(e.unaryFilter.field);return sg.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=cv(e.unaryFilter.field);return sg.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return um()}}function dv(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function pv(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function mv(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=yv(t)),t=gv(e.get(n),t);return yv(t)}function gv(e,t){let n=t;const r=e.length;for(let t=0;t<r;t++){const r=e.charAt(t);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function yv(e){return e+""}function vv(e){const t=e.length;if(cm(t>=2),2===t)return cm(""===e.charAt(0)&&""===e.charAt(1)),km.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("",s);switch((t<0||t>n)&&um(),e.charAt(t+1)){case"":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"":i+=e.substring(s,t),i+="\0";break;case"":i+=e.substring(s,t+1);break;default:um()}s=t+2}return new km(r)}class wv{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class bv{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}bv.store="owner",bv.key="owner";class Ev{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}Ev.store="mutationQueues",Ev.keyPath="userId";class Sv{constructor(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}Sv.store="mutations",Sv.keyPath="batchId",Sv.userMutationsIndex="userMutationsIndex",Sv.userMutationsKeyPath=["userId","batchId"];class kv{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,mv(t)]}static key(e,t,n){return[e,mv(t),n]}}kv.store="documentMutations",kv.PLACEHOLDER=new kv;class xv{constructor(e,t){this.path=e,this.readTime=t}}class Tv{constructor(e,t){this.path=e,this.version=t}}class Cv{constructor(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}}Cv.store="remoteDocuments",Cv.readTimeIndex="readTimeIndex",Cv.readTimeIndexPath="readTime",Cv.collectionReadTimeIndex="collectionReadTimeIndex",Cv.collectionReadTimeIndexPath=["parentPath","readTime"];class Iv{constructor(e){this.byteSize=e}}Iv.store="remoteDocumentGlobal",Iv.key="remoteDocumentGlobalKey";class _v{constructor(e,t,n,r,i,s,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}}_v.store="targets",_v.keyPath="targetId",_v.queryTargetsIndexName="queryTargetsIndex",_v.queryTargetsKeyPath=["canonicalId","targetId"];class Nv{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}Nv.store="targetDocuments",Nv.keyPath=["targetId","path"],Nv.documentTargetsIndex="documentTargetsIndex",Nv.documentTargetsKeyPath=["path","targetId"];class Dv{constructor(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}Dv.key="targetGlobalKey",Dv.store="targetGlobal";class Lv{constructor(e,t){this.collectionId=e,this.parent=t}}Lv.store="collectionParents",Lv.keyPath=["collectionId","parent"];class Av{constructor(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}}Av.store="clientMetadata",Av.keyPath="clientId";class Ov{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}Ov.store="bundles",Ov.keyPath="bundleId";class Rv{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}Rv.store="namedQueries",Rv.keyPath="name";const Pv=[Ev.store,Sv.store,kv.store,Cv.store,_v.store,bv.store,Dv.store,Nv.store,Av.store,Iv.store,Lv.store,Ov.store,Rv.store],Mv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Fv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}class Uv{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Vv{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&um(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Vv(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Vv?t:Vv.resolve(t)}catch(e){return Vv.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Vv.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Vv.reject(t)}static resolve(e){return new Vv(((t,n)=>{t(e)}))}static reject(e){return new Vv(((t,n)=>{n(e)}))}static waitFor(e){return new Vv(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Vv.resolve(!1);for(const n of e)t=t.next((e=>e?Vv.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}}class jv{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.ft=new Uv,this.transaction.oncomplete=()=>{this.ft.resolve()},this.transaction.onabort=()=>{t.error?this.ft.reject(new zv(e,t.error)):this.ft.resolve()},this.transaction.onerror=t=>{const n=Gv(t.target.error);this.ft.reject(new zv(e,n))}}static open(e,t,n,r){try{return new jv(t,e.transaction(r,n))}catch(e){throw new zv(t,e)}}get dt(){return this.ft.promise}abort(e){e&&this.ft.reject(e),this.aborted||(sm("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new Hv(t)}}class Bv{constructor(e,t,n){this.name=e,this.version=t,this.wt=n,12.2===Bv._t(nc())&&om("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return sm("SimpleDb","Removing database:",e),Kv(window.indexedDB.deleteDatabase(e)).toPromise()}static gt(){if("undefined"==typeof indexedDB)return!1;if(Bv.yt())return!0;const e=nc(),t=Bv._t(e),n=0<t&&t<10,r=Bv.Et(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static yt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Tt)}static It(e,t){return e.store(t)}static _t(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static Et(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async At(e){return this.db||(sm("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new zv(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new nm(tm.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new zv(e,r))},r.onupgradeneeded=e=>{sm("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.wt.Rt(t,r.transaction,e.oldVersion,this.version).next((()=>{sm("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.Pt&&(this.db.onversionchange=e=>this.Pt(e)),this.db}bt(e){this.Pt=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.At(e);const t=jv.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).catch((e=>(t.abort(e),Vv.reject(e)))).toPromise();return s.catch((()=>{})),await t.dt,s}catch(e){const t="FirebaseError"!==e.name&&s<3;if(sm("SimpleDb","Transaction failed with error:",e.message,"Retrying:",t),this.close(),!t)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class qv{constructor(e){this.vt=e,this.Vt=!1,this.St=null}get isDone(){return this.Vt}get Dt(){return this.St}set cursor(e){this.vt=e}done(){this.Vt=!0}Ct(e){this.St=e}delete(){return Kv(this.vt.delete())}}class zv extends nm{constructor(e,t){super(tm.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function $v(e){return"IndexedDbTransactionError"===e.name}class Hv{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(sm("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(sm("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Kv(n)}add(e){return sm("SimpleDb","ADD",this.store.name,e,e),Kv(this.store.add(e))}get(e){return Kv(this.store.get(e)).next((t=>(void 0===t&&(t=null),sm("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return sm("SimpleDb","DELETE",this.store.name,e),Kv(this.store.delete(e))}count(){return sm("SimpleDb","COUNT",this.store.name),Kv(this.store.count())}Nt(e,t){const n=this.cursor(this.options(e,t)),r=[];return this.xt(n,((e,t)=>{r.push(t)})).next((()=>r))}kt(e,t){sm("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.$t=!1;const r=this.cursor(n);return this.xt(r,((e,t,n)=>n.delete()))}Ot(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.xt(r,t)}Ft(e){const t=this.cursor({});return new Vv(((n,r)=>{t.onerror=e=>{const t=Gv(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}xt(e,t){const n=[];return new Vv(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new qv(i),o=t(i.primaryKey,i.value,s);if(o instanceof Vv){const e=o.catch((e=>(s.done(),Vv.reject(e))));n.push(e)}s.isDone?r():null===s.Dt?i.continue():i.continue(s.Dt)}})).next((()=>Vv.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.$t?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Kv(e){return new Vv(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Gv(e.target.error);n(t)}}))}let Wv=!1;function Gv(e){const t=Bv._t(nc());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new nm("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Wv||(Wv=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Qv extends Fv{constructor(e,t){super(),this.Mt=e,this.currentSequenceNumber=t}}function Yv(e,t){const n=hm(e);return Bv.It(n.Mt,t)}class Xv{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&Jg(r,e,n[t])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Zg(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Zg(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach((t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(vm.min())}))}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ty())}isEqual(e){return this.batchId===e.batchId&&mm(this.mutations,e.mutations,((e,t)=>ty(e,t)))&&mm(this.baseMutations,e.baseMutations,((e,t)=>ty(e,t)))}}class Jv{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){cm(e.mutations.length===n.length);let r=ky;const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new Jv(e,t,n,r)}}class Zv{constructor(e,t,n,r,i=vm.min(),s=vm.min(),o=Im.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new Zv(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Zv(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Zv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ew{constructor(e){this.Lt=e}}function tw(e,t){if(t.document)return function(e,t,n){const r=Wy(e,t.name),i=zy(t.updateTime),s=new Xm({mapValue:{fields:t.fields}}),o=Zm.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){const e=Fm.fromSegments(t.noDocument.path),n=sw(t.noDocument.readTime),r=Zm.newNoDocument(e,n);return t.hasCommittedMutations?r.setHasCommittedMutations():r}if(t.unknownDocument){const e=Fm.fromSegments(t.unknownDocument.path),n=sw(t.unknownDocument.version);return Zm.newUnknownDocument(e,n)}return um()}function nw(e,t,n){const r=rw(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){const n=function(e,t){return{name:Ky(e,t.key),fields:t.data.value.mapValue.fields,updateTime:jy(e,t.version.toTimestamp())}}(e.Lt,t),s=t.hasCommittedMutations;return new Cv(null,null,n,s,r,i)}if(t.isNoDocument()){const e=t.key.path.toArray(),n=iw(t.version),s=t.hasCommittedMutations;return new Cv(null,new xv(e,n),null,s,r,i)}if(t.isUnknownDocument()){const e=t.key.path.toArray(),n=iw(t.version);return new Cv(new Tv(e,n),null,null,!0,r,i)}return um()}function rw(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function iw(e){const t=e.toTimestamp();return new wv(t.seconds,t.nanoseconds)}function sw(e){const t=new ym(e.seconds,e.nanoseconds);return vm.fromTimestamp(t)}function ow(e,t){const n=(t.baseMutations||[]).map((t=>ev(e.Lt,t)));for(let e=0;e<t.mutations.length-1;++e){const n=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){const r=t.mutations[e+1];n.updateTransforms=r.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}const r=t.mutations.map((t=>ev(e.Lt,t))),i=ym.fromMillis(t.localWriteTimeMs);return new Xv(t.batchId,i,n,r)}function aw(e){const t=sw(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?sw(e.lastLimboFreeSnapshotVersion):vm.min();let r;var i;return void 0!==e.query.documents?(cm(1===(i=e.query).documents.length),r=Tg(Eg(Qy(i.documents[0])))):r=function(e){return Tg(rv(e))}(e.query),new Zv(r,e.targetId,0,e.lastListenSequenceNumber,t,n,Im.fromBase64String(e.resumeToken))}function lw(e,t){const n=iw(t.snapshotVersion),r=iw(t.lastLimboFreeSnapshotVersion);let i;i=ig(t.target)?tv(e.Lt,t.target):nv(e.Lt,t.target);const s=t.resumeToken.toBase64();return new _v(t.targetId,ng(t.target),n,s,t.sequenceNumber,r,i)}function uw(e){const t=rv({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?function(e,t,n){return new bg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}(t,t.limit,"L"):t}class cw{getBundleMetadata(e,t){return hw(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:sw(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return hw(e).put({bundleId:(n=t).id,createTime:iw(zy(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return fw(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:uw(t.bundledQuery),readTime:sw(t.readTime)};var t}))}saveNamedQuery(e,t){return fw(e).put(function(e){return{name:e.name,readTime:iw(zy(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function hw(e){return Yv(e,Ov.store)}function fw(e){return Yv(e,Rv.store)}class dw{constructor(){this.Bt=new pw}addToCollectionParentIndex(e,t){return this.Bt.add(t),Vv.resolve()}getCollectionParents(e,t){return Vv.resolve(this.Bt.getEntries(t))}}class pw{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new yy(km.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new yy(km.comparator)).toArray()}}class mw{constructor(){this.Ut=new pw}addToCollectionParentIndex(e,t){if(!this.Ut.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.Ut.add(t)}));const i={collectionId:n,parent:mv(r)};return gw(e).put(i)}return Vv.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[gm(t),""],!1,!0);return gw(e).Nt(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(vv(r.parent))}return n}))}}function gw(e){return Yv(e,Lv.store)}const yw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class vw{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new vw(e,vw.DEFAULT_COLLECTION_PERCENTILE,vw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ww(e,t,n){const r=e.store(Sv.store),i=e.store(kv.store),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Ot({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{cm(1===a)})));const u=[];for(const e of n.mutations){const r=kv.key(t,e.key.path,n.batchId);s.push(i.delete(r)),u.push(e.key)}return Vv.waitFor(s).next((()=>u))}function bw(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw um();t=e.noDocument}return JSON.stringify(t).length}vw.DEFAULT_COLLECTION_PERCENTILE=10,vw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vw.DEFAULT=new vw(41943040,vw.DEFAULT_COLLECTION_PERCENTILE,vw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vw.DISABLED=new vw(-1,0,0);class Ew{constructor(e,t,n,r){this.userId=e,this.R=t,this.qt=n,this.referenceDelegate=r,this.Kt={}}static jt(e,t,n,r){cm(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Ew(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return kw(e).Ot({index:Sv.userMutationsIndex,range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=xw(e),s=kw(e);return s.add({}).next((o=>{cm("number"==typeof o);const a=new Xv(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Zy(e.Lt,t))),i=n.mutations.map((t=>Zy(e.Lt,t)));return new Sv(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(this.R,this.userId,a),u=[];let c=new yy(((e,t)=>pm(e.canonicalString(),t.canonicalString())));for(const e of r){const t=kv.key(this.userId,e.key.path,o);c=c.add(e.key.path.popLast()),u.push(s.put(l)),u.push(i.put(t,kv.PLACEHOLDER))}return c.forEach((t=>{u.push(this.qt.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Kt[o]=a.keys()})),Vv.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return kw(e).get(t).next((e=>e?(cm(e.userId===this.userId),ow(this.R,e)):null))}Qt(e,t){return this.Kt[t]?Vv.resolve(this.Kt[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Kt[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return kw(e).Ot({index:Sv.userMutationsIndex,range:r},((e,t,r)=>{t.userId===this.userId&&(cm(t.batchId>=n),i=ow(this.R,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return kw(e).Ot({index:Sv.userMutationsIndex,range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return kw(e).Nt(Sv.userMutationsIndex,t).next((e=>e.map((e=>ow(this.R,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=kv.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return xw(e).Ot({range:r},((n,r,s)=>{const[o,a,l]=n,u=vv(a);if(o===this.userId&&t.path.isEqual(u))return kw(e).get(l).next((e=>{if(!e)throw um();cm(e.userId===this.userId),i.push(ow(this.R,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new yy(pm);const r=[];return t.forEach((t=>{const i=kv.prefixForPath(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=xw(e).Ot({range:s},((e,r,i)=>{const[s,o,a]=e,l=vv(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),Vv.waitFor(r).next((()=>this.Wt(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=kv.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new yy(pm);return xw(e).Ot({range:s},((e,t,i)=>{const[s,a,l]=e,u=vv(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(l)):i.done()})).next((()=>this.Wt(e,o)))}Wt(e,t){const n=[],r=[];return t.forEach((t=>{r.push(kw(e).get(t).next((e=>{if(null===e)throw um();cm(e.userId===this.userId),n.push(ow(this.R,e))})))})),Vv.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return ww(e.Mt,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Gt(t.batchId)})),Vv.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Gt(e){delete this.Kt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Vv.resolve();const n=IDBKeyRange.lowerBound(kv.prefixForUser(this.userId)),r=[];return xw(e).Ot({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=vv(e[1]);r.push(t)}else n.done()})).next((()=>{cm(0===r.length)}))}))}containsKey(e,t){return Sw(e,this.userId,t)}zt(e){return Tw(e).get(this.userId).next((e=>e||new Ev(this.userId,-1,"")))}}function Sw(e,t,n){const r=kv.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return xw(e).Ot({range:s,$t:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function kw(e){return Yv(e,Sv.store)}function xw(e){return Yv(e,kv.store)}function Tw(e){return Yv(e,Ev.store)}class Cw{constructor(e){this.Ht=e}next(){return this.Ht+=2,this.Ht}static Jt(){return new Cw(0)}static Yt(){return new Cw(-1)}}class Iw{constructor(e,t){this.referenceDelegate=e,this.R=t}allocateTargetId(e){return this.Xt(e).next((t=>{const n=new Cw(t.highestTargetId);return t.highestTargetId=n.next(),this.Zt(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Xt(e).next((e=>vm.fromTimestamp(new ym(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Xt(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Xt(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Zt(e,r))))}addTargetData(e,t){return this.te(e,t).next((()=>this.Xt(e).next((n=>(n.targetCount+=1,this.ee(t,n),this.Zt(e,n))))))}updateTargetData(e,t){return this.te(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>_w(e).delete(t.targetId))).next((()=>this.Xt(e))).next((t=>(cm(t.targetCount>0),t.targetCount-=1,this.Zt(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return _w(e).Ot(((s,o)=>{const a=aw(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Vv.waitFor(i))).next((()=>r))}forEachTarget(e,t){return _w(e).Ot(((e,n)=>{const r=aw(n);t(r)}))}Xt(e){return Nw(e).get(Dv.key).next((e=>(cm(null!==e),e)))}Zt(e,t){return Nw(e).put(Dv.key,t)}te(e,t){return _w(e).put(lw(this.R,t))}ee(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Xt(e).next((e=>e.targetCount))}getTargetData(e,t){const n=ng(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return _w(e).Ot({range:r,index:_v.queryTargetsIndexName},((e,n,r)=>{const s=aw(n);rg(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Dw(e);return t.forEach((t=>{const s=mv(t.path);r.push(i.put(new Nv(n,s))),r.push(this.referenceDelegate.addReference(e,n,t))})),Vv.waitFor(r)}removeMatchingKeys(e,t,n){const r=Dw(e);return Vv.forEach(t,(t=>{const i=mv(t.path);return Vv.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Dw(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Dw(e);let i=Ty();return r.Ot({range:n,$t:!0},((e,t,n)=>{const r=vv(e[1]),s=new Fm(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=mv(t.path),r=IDBKeyRange.bound([n],[gm(n)],!1,!0);let i=0;return Dw(e).Ot({index:Nv.documentTargetsIndex,$t:!0,range:r},(([e,t],n,r)=>{0!==e&&(i++,r.done())})).next((()=>i>0))}lt(e,t){return _w(e).get(t).next((e=>e?aw(e):null))}}function _w(e){return Yv(e,_v.store)}function Nw(e){return Yv(e,Dv.store)}function Dw(e){return Yv(e,Nv.store)}async function Lw(e){if(e.code!==tm.FAILED_PRECONDITION||e.message!==Mv)throw e;sm("LocalStore","Unexpectedly lost primary lease")}function Aw([e,t],[n,r]){const i=pm(e,n);return 0===i?pm(t,r):i}class Ow{constructor(e){this.ne=e,this.buffer=new yy(Aw),this.se=0}ie(){return++this.se}re(e){const t=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Aw(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Rw{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.oe=!1,this.ce=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)}stop(){this.ce&&(this.ce.cancel(),this.ce=null)}get started(){return null!==this.ce}ue(e){const t=this.oe?3e5:6e4;sm("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.ce=null,this.oe=!0;try{await e.collectGarbage(this.garbageCollector)}catch(e){$v(e)?sm("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Lw(e)}await this.ue(e)}))}}class Pw{constructor(e,t){this.ae=e,this.params=t}calculateTargetCount(e,t){return this.ae.he(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Vv.resolve(em.o);const n=new Ow(t);return this.ae.forEachTarget(e,(e=>n.re(e.sequenceNumber))).next((()=>this.ae.le(e,(e=>n.re(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.ae.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.ae.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(sm("LruGarbageCollector","Garbage collection skipped; disabled"),Vv.resolve(yw)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(sm("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yw):this.fe(e,t)))}getCacheSize(e){return this.ae.getCacheSize(e)}fe(e,t){let n,r,i,s,o,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(sm("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),im()<=gc.DEBUG&&sm("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-u}ms`),Vv.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}class Mw{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new Pw(e,t)}(this,t)}he(e){const t=this.de(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}de(e){let t=0;return this.le(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}le(e,t){return this.we(e,((e,n)=>t(n)))}addReference(e,t,n){return Fw(e,n)}removeReference(e,t,n){return Fw(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Fw(e,t)}_e(e,t){return function(e,t){let n=!1;return Tw(e).Ft((r=>Sw(e,r,t).next((e=>(e&&(n=!0),Vv.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.we(e,((s,o)=>{if(o<=t){const t=this._e(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s),Dw(e).delete([0,mv(s.path)]))))}));r.push(t)}})).next((()=>Vv.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Fw(e,t)}we(e,t){const n=Dw(e);let r,i=em.o;return n.Ot({index:Nv.documentTargetsIndex},(([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==em.o&&t(new Fm(vv(r)),i),i=o,r=s):i=em.o})).next((()=>{i!==em.o&&t(new Fm(vv(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Fw(e,t){return Dw(e).put(function(e,t){return new Nv(0,mv(e.path),t)}(t,e.currentSequenceNumber))}class Uw{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}forEach(e){bm(this.inner,((t,n)=>{for(const[t,r]of n)e(t,r)}))}isEmpty(){return Em(this.inner)}}class Vw{constructor(){this.changes=new Uw((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:vm.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Zm.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Vv.resolve(n.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jw{constructor(e,t){this.R=e,this.qt=t}addEntry(e,t,n){return zw(e).put($w(t),n)}removeEntry(e,t){const n=zw(e),r=$w(t);return n.delete(r)}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.me(e,n))))}getEntry(e,t){return zw(e).get($w(t)).next((e=>this.ge(t,e)))}ye(e,t){return zw(e).get($w(t)).next((e=>({document:this.ge(t,e),size:bw(e)})))}getEntries(e,t){let n=by();return this.pe(e,t,((e,t)=>{const r=this.ge(e,t);n=n.insert(e,r)})).next((()=>n))}Ee(e,t){let n=by(),r=new py(Fm.comparator);return this.pe(e,t,((e,t)=>{const i=this.ge(e,t);n=n.insert(e,i),r=r.insert(e,bw(t))})).next((()=>({documents:n,Te:r})))}pe(e,t,n){if(t.isEmpty())return Vv.resolve();const r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator();let s=i.getNext();return zw(e).Ot({range:r},((e,t,r)=>{const o=Fm.fromSegments(e);for(;s&&Fm.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,t),s=i.hasNext()?i.getNext():null),s?r.Ct(s.path.toArray()):r.done()})).next((()=>{for(;s;)n(s,null),s=i.hasNext()?i.getNext():null}))}getDocumentsMatchingQuery(e,t,n){let r=by();const i=t.path.length+1,s={};if(n.isEqual(vm.min())){const e=t.path.toArray();s.range=IDBKeyRange.lowerBound(e)}else{const e=t.path.toArray(),r=rw(n);s.range=IDBKeyRange.lowerBound([e,r],!0),s.index=Cv.collectionReadTimeIndex}return zw(e).Ot(s,((e,n,s)=>{if(e.length!==i)return;const o=tw(this.R,n);t.path.isPrefixOf(o.key.path)?Ng(t,o)&&(r=r.insert(o.key,o)):s.done()})).next((()=>r))}newChangeBuffer(e){return new Bw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return qw(e).get(Iv.key).next((e=>(cm(!!e),e)))}me(e,t){return qw(e).put(Iv.key,t)}ge(e,t){if(t){const e=tw(this.R,t);if(!e.isNoDocument()||!e.version.isEqual(vm.min()))return e}return Zm.newInvalidDocument(e)}}class Bw extends Vw{constructor(e,t){super(),this.Ie=e,this.trackRemovals=t,this.Ae=new Uw((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new yy(((e,t)=>pm(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.Ae.get(i);if(s.document.isValidDocument()){const a=nw(this.Ie.R,s.document,this.getReadTime(i));r=r.add(i.path.popLast());const l=bw(a);n+=l-o,t.push(this.Ie.addEntry(e,i,a))}else if(n-=o,this.trackRemovals){const n=nw(this.Ie.R,Zm.newNoDocument(i,vm.min()),this.getReadTime(i));t.push(this.Ie.addEntry(e,i,n))}else t.push(this.Ie.removeEntry(e,i))})),r.forEach((n=>{t.push(this.Ie.qt.addToCollectionParentIndex(e,n))})),t.push(this.Ie.updateMetadata(e,n)),Vv.waitFor(t)}getFromCache(e,t){return this.Ie.ye(e,t).next((e=>(this.Ae.set(t,e.size),e.document)))}getAllFromCache(e,t){return this.Ie.Ee(e,t).next((({documents:e,Te:t})=>(t.forEach(((e,t)=>{this.Ae.set(e,t)})),e)))}}function qw(e){return Yv(e,Iv.store)}function zw(e){return Yv(e,Cv.store)}function $w(e){return e.path.toArray()}class Hw{constructor(e){this.R=e}Rt(e,t,n,r){cm(n<r&&n>=0&&r<=11);const i=new jv("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(bv.store)}(e),function(e){e.createObjectStore(Ev.store,{keyPath:Ev.keyPath}),e.createObjectStore(Sv.store,{keyPath:Sv.keyPath,autoIncrement:!0}).createIndex(Sv.userMutationsIndex,Sv.userMutationsKeyPath,{unique:!0}),e.createObjectStore(kv.store)}(e),Kw(e),function(e){e.createObjectStore(Cv.store)}(e));let s=Vv.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Nv.store),e.deleteObjectStore(_v.store),e.deleteObjectStore(Dv.store)}(e),Kw(e)),s=s.next((()=>function(e){const t=e.store(Dv.store),n=new Dv(0,0,vm.min().toTimestamp(),0);return t.put(Dv.key,n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store(Sv.store).Nt().next((n=>{e.deleteObjectStore(Sv.store),e.createObjectStore(Sv.store,{keyPath:Sv.keyPath,autoIncrement:!0}).createIndex(Sv.userMutationsIndex,Sv.userMutationsKeyPath,{unique:!0});const r=t.store(Sv.store),i=n.map((e=>r.put(e)));return Vv.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore(Av.store,{keyPath:Av.keyPath})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Re(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore(Iv.store)}(e),this.Pe(i))))),n<7&&r>=7&&(s=s.next((()=>this.be(i)))),n<8&&r>=8&&(s=s.next((()=>this.ve(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){const t=e.objectStore(Cv.store);t.createIndex(Cv.readTimeIndex,Cv.readTimeIndexPath,{unique:!1}),t.createIndex(Cv.collectionReadTimeIndex,Cv.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(s=s.next((()=>this.Ve(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore(Ov.store,{keyPath:Ov.keyPath})}(e),function(e){e.createObjectStore(Rv.store,{keyPath:Rv.keyPath})}(e)}))),s}Pe(e){let t=0;return e.store(Cv.store).Ot(((e,n)=>{t+=bw(n)})).next((()=>{const n=new Iv(t);return e.store(Iv.store).put(Iv.key,n)}))}Re(e){const t=e.store(Ev.store),n=e.store(Sv.store);return t.Nt().next((t=>Vv.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.Nt(Sv.userMutationsIndex,r).next((n=>Vv.forEach(n,(n=>{cm(n.userId===t.userId);const r=ow(this.R,n);return ww(e,t.userId,r).next((()=>{}))}))))}))))}be(e){const t=e.store(Nv.store),n=e.store(Cv.store);return e.store(Dv.store).get(Dv.key).next((e=>{const r=[];return n.Ot(((n,i)=>{const s=new km(n),o=function(e){return[0,mv(e)]}(s);r.push(t.get(o).next((n=>n?Vv.resolve():(n=>t.put(new Nv(0,mv(n),e.highestListenSequenceNumber)))(s))))})).next((()=>Vv.waitFor(r)))}))}ve(e,t){e.createObjectStore(Lv.store,{keyPath:Lv.keyPath});const n=t.store(Lv.store),r=new pw,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:mv(r)})}};return t.store(Cv.store).Ot({$t:!0},((e,t)=>{const n=new km(e);return i(n.popLast())})).next((()=>t.store(kv.store).Ot({$t:!0},(([e,t,n],r)=>{const s=vv(t);return i(s.popLast())}))))}Ve(e){const t=e.store(_v.store);return t.Ot(((e,n)=>{const r=aw(n),i=lw(this.R,r);return t.put(i)}))}}function Kw(e){e.createObjectStore(Nv.store,{keyPath:Nv.keyPath}).createIndex(Nv.documentTargetsIndex,Nv.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(_v.store,{keyPath:_v.keyPath}).createIndex(_v.queryTargetsIndexName,_v.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Dv.store)}const Ww="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Gw{constructor(e,t,n,r,i,s,o,a,l,u){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Se=i,this.window=s,this.document=o,this.De=l,this.Ce=u,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.$e=null,this.Oe=null,this.Fe=Number.NEGATIVE_INFINITY,this.Me=e=>Promise.resolve(),!Gw.gt())throw new nm(tm.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Mw(this,r),this.Le=t+"main",this.R=new ew(a),this.Be=new Bv(this.Le,11,new Hw(this.R)),this.Ue=new Iw(this.referenceDelegate,this.R),this.qt=new mw,this.qe=function(e,t){return new jw(e,t)}(this.R,this.qt),this.Ke=new cw,this.window&&this.window.localStorage?this.je=this.window.localStorage:(this.je=null,!1===u&&om("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Qe().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new nm(tm.FAILED_PRECONDITION,Ww);return this.We(),this.Ge(),this.ze(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ue.getHighestSequenceNumber(e)))})).then((e=>{this.Ne=new em(e,this.De)})).then((()=>{this.xe=!0})).catch((e=>(this.Be&&this.Be.close(),Promise.reject(e))))}He(e){return this.Me=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Be.bt((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget((async()=>{this.started&&await this.Qe()})))}Qe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Yw(e).put(new Av(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next((()=>{if(this.isPrimary)return this.Je(e).next((e=>{e||(this.isPrimary=!1,this.Se.enqueueRetryable((()=>this.Me(!1))))}))})).next((()=>this.Ye(e))).next((t=>this.isPrimary&&!t?this.Xe(e).next((()=>!1)):!!t&&this.Ze(e).next((()=>!0)))))).catch((e=>{if($v(e))return sm("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return sm("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Se.enqueueRetryable((()=>this.Me(e))),this.isPrimary=e}))}Je(e){return Qw(e).get(bv.key).next((e=>Vv.resolve(this.tn(e))))}en(e){return Yw(e).delete(this.clientId)}async nn(){if(this.isPrimary&&!this.sn(this.Fe,18e5)){this.Fe=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Yv(e,Av.store);return t.Nt().next((e=>{const n=this.rn(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Vv.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.je)for(const t of e)this.je.removeItem(this.on(t.clientId))}}ze(){this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Qe().then((()=>this.nn())).then((()=>this.ze()))))}tn(e){return!!e&&e.ownerId===this.clientId}Ye(e){return this.Ce?Vv.resolve(!0):Qw(e).get(bv.key).next((t=>{if(null!==t&&this.sn(t.leaseTimestampMs,5e3)&&!this.cn(t.ownerId)){if(this.tn(t)&&this.networkEnabled)return!0;if(!this.tn(t)){if(!t.allowTabSynchronization)throw new nm(tm.FAILED_PRECONDITION,Ww);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yw(e).Nt().next((e=>void 0===this.rn(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&sm("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),await this.Be.runTransaction("shutdown","readwrite",[bv.store,Av.store],(e=>{const t=new Qv(e,em.o);return this.Xe(t).next((()=>this.en(t)))})),this.Be.close(),this.ln()}rn(e,t){return e.filter((e=>this.sn(e.updateTimeMs,t)&&!this.cn(e.clientId)))}fn(){return this.runTransaction("getActiveClients","readonly",(e=>Yw(e).Nt().next((e=>this.rn(e,18e5).map((e=>e.clientId))))))}get started(){return this.xe}getMutationQueue(e){return Ew.jt(e,this.R,this.qt,this.referenceDelegate)}getTargetCache(){return this.Ue}getRemoteDocumentCache(){return this.qe}getIndexManager(){return this.qt}getBundleCache(){return this.Ke}runTransaction(e,t,n){sm("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite";let i;return this.Be.runTransaction(e,r,Pv,(r=>(i=new Qv(r,this.Ne?this.Ne.next():em.o),"readwrite-primary"===t?this.Je(i).next((e=>!!e||this.Ye(i))).next((t=>{if(!t)throw om(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Se.enqueueRetryable((()=>this.Me(!1))),new nm(tm.FAILED_PRECONDITION,Mv);return n(i)})).next((e=>this.Ze(i).next((()=>e)))):this.dn(i).next((()=>n(i)))))).then((e=>(i.raiseOnCommittedEvent(),e)))}dn(e){return Qw(e).get(bv.key).next((e=>{if(null!==e&&this.sn(e.leaseTimestampMs,5e3)&&!this.cn(e.ownerId)&&!this.tn(e)&&!(this.Ce||this.allowTabSynchronization&&e.allowTabSynchronization))throw new nm(tm.FAILED_PRECONDITION,Ww)}))}Ze(e){const t=new bv(this.clientId,this.allowTabSynchronization,Date.now());return Qw(e).put(bv.key,t)}static gt(){return Bv.gt()}Xe(e){const t=Qw(e);return t.get(bv.key).next((e=>this.tn(e)?(sm("IndexedDbPersistence","Releasing primary lease."),t.delete(bv.key)):Vv.resolve()))}sn(e,t){const n=Date.now();return!(e<n-t||e>n&&(om(`Detected an update time that is in the future: ${e} > ${n}`),1))}We(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.$e=()=>{this.Se.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Qe())))},this.document.addEventListener("visibilitychange",this.$e),this.inForeground="visible"===this.document.visibilityState)}an(){this.$e&&(this.document.removeEventListener("visibilitychange",this.$e),this.$e=null)}Ge(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ke=()=>{this.un(),rc()&&navigator.appVersion.match("Version/14")&&this.Se.enterRestrictedMode(!0),this.Se.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ke))}hn(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)}cn(e){var t;try{const n=null!==(null===(t=this.je)||void 0===t?void 0:t.getItem(this.on(e)));return sm("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return om("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}un(){if(this.je)try{this.je.setItem(this.on(this.clientId),String(Date.now()))}catch(e){om("Failed to set zombie client id.",e)}}ln(){if(this.je)try{this.je.removeItem(this.on(this.clientId))}catch(e){}}on(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qw(e){return Yv(e,bv.store)}function Yw(e){return Yv(e,Av.store)}class Xw{constructor(e,t,n){this.qe=e,this._n=t,this.qt=n}mn(e,t){return this._n.getAllMutationBatchesAffectingDocumentKey(e,t).next((n=>this.gn(e,t,n)))}gn(e,t,n){return this.qe.getEntry(e,t).next((e=>{for(const t of n)t.applyToLocalView(e);return e}))}yn(e,t){e.forEach(((e,n)=>{for(const e of t)e.applyToLocalView(n)}))}pn(e,t){return this.qe.getEntries(e,t).next((t=>this.En(e,t).next((()=>t))))}En(e,t){return this._n.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>this.yn(t,e)))}getDocumentsMatchingQuery(e,t,n){return function(e){return Fm.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Tn(e,t.path):function(e){return null!==e.collectionGroup}(t)?this.In(e,t,n):this.An(e,t,n)}Tn(e,t){return this.mn(e,new Fm(t)).next((e=>{let t=Sy();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}In(e,t,n){const r=t.collectionGroup;let i=Sy();return this.qt.getCollectionParents(e,r).next((s=>Vv.forEach(s,(s=>{const o=function(e,t){return new bg(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.An(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}An(e,t,n){let r,i;return this.qe.getDocumentsMatchingQuery(e,t,n).next((n=>(r=n,this._n.getAllMutationBatchesAffectingQuery(e,t)))).next((t=>(i=t,this.Rn(e,i,r).next((e=>{r=e;for(const e of i)for(const t of e.mutations){const n=t.key;let i=r.get(n);null==i&&(i=Zm.newInvalidDocument(n),r=r.insert(n,i)),Zg(t,i,e.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))))).next((()=>(r.forEach(((e,n)=>{Ng(t,n)||(r=r.remove(e))})),r)))}Rn(e,t,n){let r=Ty();for(const e of t)for(const t of e.mutations)t instanceof iy&&null===n.get(t.key)&&(r=r.add(t.key));let i=n;return this.qe.getEntries(e,r).next((e=>(e.forEach(((e,t)=>{t.isFoundDocument()&&(i=i.insert(e,t))})),i)))}}class Jw{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Pn=n,this.bn=r}static vn(e,t){let n=Ty(),r=Ty();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new Jw(e,t.fromCache,n,r)}}class Zw{Vn(e){this.Sn=e}getDocumentsMatchingQuery(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(vm.min())?this.Dn(e,t):this.Sn.pn(e,r).next((i=>{const s=this.Cn(t,i);return(Sg(t)||kg(t))&&this.Nn(t.limitType,s,r,n)?this.Dn(e,t):(im()<=gc.DEBUG&&sm("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),_g(t)),this.Sn.getDocumentsMatchingQuery(e,t,n).next((e=>(s.forEach((t=>{e=e.insert(t.key,t)})),e))))}))}Cn(e,t){let n=new yy(Dg(e));return t.forEach(((t,r)=>{Ng(e,r)&&(n=n.add(r))})),n}Nn(e,t,n,r){if(n.size!==t.size)return!0;const i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Dn(e,t){return im()<=gc.DEBUG&&sm("QueryEngine","Using full collection scan to execute query:",_g(t)),this.Sn.getDocumentsMatchingQuery(e,t,vm.min())}}class eb{constructor(e,t,n,r){this.persistence=e,this.xn=t,this.R=r,this.kn=new py(pm),this.$n=new Uw((e=>ng(e)),rg),this.On=vm.min(),this._n=e.getMutationQueue(n),this.Fn=e.getRemoteDocumentCache(),this.Ue=e.getTargetCache(),this.Mn=new Xw(this.Fn,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.kn)))}}function tb(e,t,n,r){return new eb(e,t,n,r)}async function nb(e,t){const n=hm(e);let r=n._n,i=n.Mn;const s=await n.persistence.runTransaction("Handle user change","readonly",(e=>{let s;return n._n.getAllMutationBatches(e).next((o=>(s=o,r=n.persistence.getMutationQueue(t),i=new Xw(n.Fn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e)))).next((t=>{const n=[],r=[];let o=Ty();for(const e of s){n.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return i.pn(e,o).next((e=>({Ln:e,removedBatchIds:n,addedBatchIds:r})))}))}));return n._n=r,n.Mn=i,n.xn.Vn(n.Mn),s}function rb(e){const t=hm(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ue.getLastRemoteSnapshotVersion(e)))}function ib(e,t){const n=hm(e),r=t.snapshotVersion;let i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Fn.newChangeBuffer({trackRemovals:!0});i=n.kn;const o=[];t.targetChanges.forEach(((t,s)=>{const a=i.get(s);if(!a)return;o.push(n.Ue.removeMatchingKeys(e,t.removedDocuments,s).next((()=>n.Ue.addMatchingKeys(e,t.addedDocuments,s))));const l=t.resumeToken;if(l.approximateByteSize()>0){const u=a.withResumeToken(l,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(s,u),function(e,t,n){return cm(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(a,u,t)&&o.push(n.Ue.updateTargetData(e,u))}}));let a=by();if(t.documentUpdates.forEach(((r,i)=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(function(e,t,n,r,i){let s=Ty();return n.forEach((e=>s=s.add(e))),t.getEntries(e,s).next((e=>{let s=by();return n.forEach(((n,o)=>{const a=e.get(n),l=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(vm.min())?(t.removeEntry(n,l),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o,l),s=s.insert(n,o)):sm("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),s}))}(e,s,t.documentUpdates,r,void 0).next((e=>{a=e}))),!r.isEqual(vm.min())){const t=n.Ue.getLastRemoteSnapshotVersion(e).next((t=>n.Ue.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Vv.waitFor(o).next((()=>s.apply(e))).next((()=>n.Mn.En(e,a))).next((()=>a))})).then((e=>(n.kn=i,e)))}function sb(e,t){const n=hm(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n._n.getNextMutationBatchAfterBatchId(e,t))))}async function ob(e,t,n){const r=hm(e),i=r.kn.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!$v(e))throw e;sm("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.kn=r.kn.remove(t),r.$n.delete(i.target)}function ab(e,t,n){const r=hm(e);let i=vm.min(),s=Ty();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=hm(e),i=r.$n.get(n);return void 0!==i?Vv.resolve(r.kn.get(i)):r.Ue.getTargetData(t,n)}(r,e,Tg(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ue.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.xn.getDocumentsMatchingQuery(e,t,n?i:vm.min(),n?s:Ty()))).next((e=>({documents:e,Bn:s})))))}async function lb(e){const t=hm(e);return t.persistence.runTransaction("Synchronize last document change read time","readonly",(e=>function(e){const t=zw(e);let n=vm.min();return t.Ot({index:Cv.readTimeIndex,reverse:!0},((e,t,r)=>{t.readTime&&(n=function(e){const t=new ym(e[0],e[1]);return vm.fromTimestamp(t)}(t.readTime)),r.done()})).next((()=>n))}(e))).then((e=>{t.On=e}))}class ub{constructor(e){this.R=e,this.jn=new Map,this.Qn=new Map}getBundleMetadata(e,t){return Vv.resolve(this.jn.get(t))}saveBundleMetadata(e,t){var n;return this.jn.set(t.id,{id:(n=t).id,version:n.version,createTime:zy(n.createTime)}),Vv.resolve()}getNamedQuery(e,t){return Vv.resolve(this.Qn.get(t))}saveNamedQuery(e,t){return this.Qn.set(t.name,function(e){return{name:e.name,query:uw(e.bundledQuery),readTime:zy(e.readTime)}}(t)),Vv.resolve()}}class cb{constructor(){this.Wn=new yy(hb.Gn),this.zn=new yy(hb.Hn)}isEmpty(){return this.Wn.isEmpty()}addReference(e,t){const n=new hb(e,t);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)}Jn(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Yn(new hb(e,t))}Xn(e,t){e.forEach((e=>this.removeReference(e,t)))}Zn(e){const t=new Fm(new km([])),n=new hb(t,e),r=new hb(t,e+1),i=[];return this.zn.forEachInRange([n,r],(e=>{this.Yn(e),i.push(e.key)})),i}ts(){this.Wn.forEach((e=>this.Yn(e)))}Yn(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)}es(e){const t=new Fm(new km([])),n=new hb(t,e),r=new hb(t,e+1);let i=Ty();return this.zn.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new hb(e,0),n=this.Wn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class hb{constructor(e,t){this.key=e,this.ns=t}static Gn(e,t){return Fm.comparator(e.key,t.key)||pm(e.ns,t.ns)}static Hn(e,t){return pm(e.ns,t.ns)||Fm.comparator(e.key,t.key)}}class fb{constructor(e,t){this.qt=e,this.referenceDelegate=t,this._n=[],this.ss=1,this.rs=new yy(hb.Gn)}checkEmpty(e){return Vv.resolve(0===this._n.length)}addMutationBatch(e,t,n,r){const i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];const s=new Xv(i,t,n,r);this._n.push(s);for(const t of r)this.rs=this.rs.add(new hb(t.key,i)),this.qt.addToCollectionParentIndex(e,t.key.path.popLast());return Vv.resolve(s)}lookupMutationBatch(e,t){return Vv.resolve(this.os(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.cs(n),i=r<0?0:r;return Vv.resolve(this._n.length>i?this._n[i]:null)}getHighestUnacknowledgedBatchId(){return Vv.resolve(0===this._n.length?-1:this.ss-1)}getAllMutationBatches(e){return Vv.resolve(this._n.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new hb(t,0),r=new hb(t,Number.POSITIVE_INFINITY),i=[];return this.rs.forEachInRange([n,r],(e=>{const t=this.os(e.ns);i.push(t)})),Vv.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new yy(pm);return t.forEach((e=>{const t=new hb(e,0),r=new hb(e,Number.POSITIVE_INFINITY);this.rs.forEachInRange([t,r],(e=>{n=n.add(e.ns)}))})),Vv.resolve(this.us(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Fm.isDocumentKey(i)||(i=i.child(""));const s=new hb(new Fm(i),0);let o=new yy(pm);return this.rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ns)),!0)}),s),Vv.resolve(this.us(o))}us(e){const t=[];return e.forEach((e=>{const n=this.os(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){cm(0===this.hs(t.batchId,"removed")),this._n.shift();let n=this.rs;return Vv.forEach(t.mutations,(r=>{const i=new hb(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.rs=n}))}Gt(e){}containsKey(e,t){const n=new hb(t,0),r=this.rs.firstAfterOrEqual(n);return Vv.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this._n.length,Vv.resolve()}hs(e,t){return this.cs(e)}cs(e){return 0===this._n.length?0:e-this._n[0].batchId}os(e){const t=this.cs(e);return t<0||t>=this._n.length?null:this._n[t]}}class db{constructor(e,t){this.qt=e,this.ls=t,this.docs=new py(Fm.comparator),this.size=0}addEntry(e,t,n){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ls(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-s,this.qt.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Vv.resolve(n?n.document.clone():Zm.newInvalidDocument(t))}getEntries(e,t){let n=by();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.clone():Zm.newInvalidDocument(e))})),Vv.resolve(n)}getDocumentsMatchingQuery(e,t,n){let r=by();const i=new Fm(t.path.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i,readTime:o}}=s.getNext();if(!t.path.isPrefixOf(e.path))break;o.compareTo(n)<=0||Ng(t,i)&&(r=r.insert(i.key,i.clone()))}return Vv.resolve(r)}fs(e,t){return Vv.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new pb(this)}getSize(e){return Vv.resolve(this.size)}}class pb extends Vw{constructor(e){super(),this.Ie=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.document.isValidDocument()?t.push(this.Ie.addEntry(e,r.document,this.getReadTime(n))):this.Ie.removeEntry(n)})),Vv.waitFor(t)}getFromCache(e,t){return this.Ie.getEntry(e,t)}getAllFromCache(e,t){return this.Ie.getEntries(e,t)}}class mb{constructor(e){this.persistence=e,this.ds=new Uw((e=>ng(e)),rg),this.lastRemoteSnapshotVersion=vm.min(),this.highestTargetId=0,this.ws=0,this._s=new cb,this.targetCount=0,this.gs=Cw.Jt()}forEachTarget(e,t){return this.ds.forEach(((e,n)=>t(n))),Vv.resolve()}getLastRemoteSnapshotVersion(e){return Vv.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Vv.resolve(this.ws)}allocateTargetId(e){return this.highestTargetId=this.gs.next(),Vv.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ws&&(this.ws=t),Vv.resolve()}te(e){this.ds.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.gs=new Cw(t),this.highestTargetId=t),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)}addTargetData(e,t){return this.te(t),this.targetCount+=1,Vv.resolve()}updateTargetData(e,t){return this.te(t),Vv.resolve()}removeTargetData(e,t){return this.ds.delete(t.target),this._s.Zn(t.targetId),this.targetCount-=1,Vv.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.ds.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.ds.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Vv.waitFor(i).next((()=>r))}getTargetCount(e){return Vv.resolve(this.targetCount)}getTargetData(e,t){const n=this.ds.get(t)||null;return Vv.resolve(n)}addMatchingKeys(e,t,n){return this._s.Jn(t,n),Vv.resolve()}removeMatchingKeys(e,t,n){this._s.Xn(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Vv.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._s.Zn(t),Vv.resolve()}getMatchingKeysForTargetId(e,t){const n=this._s.es(t);return Vv.resolve(n)}containsKey(e,t){return Vv.resolve(this._s.containsKey(t))}}class gb{constructor(e,t){this.ys={},this.Ne=new em(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.Ue=new mb(this),this.qt=new dw,this.qe=function(e,t){return new db(e,t)}(this.qt,(e=>this.referenceDelegate.ps(e))),this.R=new ew(t),this.Ke=new ub(this.R)}start(){return Promise.resolve()}shutdown(){return this.xe=!1,Promise.resolve()}get started(){return this.xe}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.qt}getMutationQueue(e){let t=this.ys[e.toKey()];return t||(t=new fb(this.qt,this.referenceDelegate),this.ys[e.toKey()]=t),t}getTargetCache(){return this.Ue}getRemoteDocumentCache(){return this.qe}getBundleCache(){return this.Ke}runTransaction(e,t,n){sm("MemoryPersistence","Starting transaction:",e);const r=new yb(this.Ne.next());return this.referenceDelegate.Es(),n(r).next((e=>this.referenceDelegate.Ts(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Is(e,t){return Vv.or(Object.values(this.ys).map((n=>()=>n.containsKey(e,t))))}}class yb extends Fv{constructor(e){super(),this.currentSequenceNumber=e}}class vb{constructor(e){this.persistence=e,this.As=new cb,this.Rs=null}static Ps(e){return new vb(e)}get bs(){if(this.Rs)return this.Rs;throw um()}addReference(e,t,n){return this.As.addReference(n,t),this.bs.delete(n.toString()),Vv.resolve()}removeReference(e,t,n){return this.As.removeReference(n,t),this.bs.add(n.toString()),Vv.resolve()}markPotentiallyOrphaned(e,t){return this.bs.add(t.toString()),Vv.resolve()}removeTarget(e,t){this.As.Zn(t.targetId).forEach((e=>this.bs.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.bs.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Es(){this.Rs=new Set}Ts(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Vv.forEach(this.bs,(n=>{const r=Fm.fromPath(n);return this.vs(e,r).next((e=>{e||t.removeEntry(r)}))})).next((()=>(this.Rs=null,t.apply(e))))}updateLimboDocument(e,t){return this.vs(e,t).next((e=>{e?this.bs.delete(t.toString()):this.bs.add(t.toString())}))}ps(e){return 0}vs(e,t){return Vv.or([()=>Vv.resolve(this.As.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Is(e,t)])}}class wb{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wb.UNAUTHENTICATED=new wb(null),wb.GOOGLE_CREDENTIALS=new wb("google-credentials-uid"),wb.FIRST_PARTY=new wb("first-party-uid");class bb{constructor(){this.activeTargetIds=Iy()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}Cs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Eb{constructor(){this.li=new bb,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.li.Ds(e),this.fi[e]||"not-current"}updateQueryState(e,t,n){this.fi[e]=t}removeLocalQueryTarget(e){this.li.Cs(e)}isLocalQueryTarget(e){return this.li.activeTargetIds.has(e)}clearQueryState(e){delete this.fi[e]}getAllActiveQueryTargets(){return this.li.activeTargetIds}isActiveQueryTarget(e){return this.li.activeTargetIds.has(e)}start(){return this.li=new bb,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Sb{di(e){}shutdown(){}}class kb{constructor(){this.wi=()=>this._i(),this.mi=()=>this.gi(),this.yi=[],this.pi()}di(e){this.yi.push(e)}shutdown(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)}pi(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)}_i(){sm("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.yi)e(0)}gi(){sm("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.yi)e(1)}static gt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const xb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Tb{constructor(e){this.Ei=e.Ei,this.Ti=e.Ti}Ii(e){this.Ai=e}Ri(e){this.Pi=e}onMessage(e){this.bi=e}close(){this.Ti()}send(e){this.Ei(e)}vi(){this.Ai()}Vi(e){this.Pi(e)}Si(e){this.bi(e)}}class Cb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.Di=t+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Ni(e,t,n,r){const i=this.xi(e,t);sm("RestConnection","Sending: ",i,n);const s={};return this.ki(s,r),this.$i(e,i,s,n).then((e=>(sm("RestConnection","Received: ",e),e)),(t=>{throw am("RestConnection",`${e} failed with error: `,t,"url: ",i,"request:",n),t}))}Oi(e,t,n,r){return this.Ni(e,t,n,r)}ki(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+Zp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])}xi(e,t){const n=xb[e];return`${this.Di}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}$i(e,t,n,r){return new Promise(((i,s)=>{const o=new Jp;o.listenOnce(Kp.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case Hp.NO_ERROR:const t=o.getResponseJson();sm("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Hp.TIMEOUT:sm("Connection",'RPC "'+e+'" timed out'),s(new nm(tm.DEADLINE_EXCEEDED,"Request time out"));break;case Hp.HTTP_ERROR:const n=o.getStatus();if(sm("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(tm).indexOf(t)>=0?t:tm.UNKNOWN}(e.status);s(new nm(t,e.message))}else s(new nm(tm.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new nm(tm.UNAVAILABLE,"Connection failed."));break;default:um()}}finally{sm("Connection",'RPC "'+e+'" completed.')}}));const a=JSON.stringify(r);o.send(t,"POST",a,n,15)}))}Fi(e,t){const n=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=new jp,i=Of(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};var o;this.useFetchStreams&&(s.xmlHttpFactory=new Yp({})),this.ki(s.initMessageHeaders,t),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nc())||"object"==typeof navigator&&"ReactNative"===navigator.product||nc().indexOf("Electron/")>=0||function(){var e=nc();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||nc().indexOf("MSAppHost/")>=0||"object"==typeof(o="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==o.id||(s.httpHeadersOverwriteParam="$httpHeaders");const a=n.join("");sm("Connection","Creating WebChannel: "+a,s);const l=r.createWebChannel(a,s);let u=!1,c=!1;const h=new Tb({Ei:e=>{c?sm("Connection","Not sending because WebChannel is closed:",e):(u||(sm("Connection","Opening WebChannel transport."),l.open(),u=!0),sm("Connection","WebChannel sending:",e),l.send(e))},Ti:()=>l.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(l,Xp.EventType.OPEN,(()=>{c||sm("Connection","WebChannel transport opened.")})),f(l,Xp.EventType.CLOSE,(()=>{c||(c=!0,sm("Connection","WebChannel transport closed"),h.Vi())})),f(l,Xp.EventType.ERROR,(e=>{c||(c=!0,am("Connection","WebChannel transport errored:",e),h.Vi(new nm(tm.UNAVAILABLE,"The operation could not be completed")))})),f(l,Xp.EventType.MESSAGE,(e=>{var t;if(!c){const n=e.data[0];cm(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){sm("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=hy[e];if(void 0!==t)return dy(t)}(e),n=i.message;void 0===t&&(t=tm.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),c=!0,h.Vi(new nm(t,n)),l.close()}else sm("Connection","WebChannel received:",n),h.Si(n)}})),f(i,Wp.STAT_EVENT,(e=>{e.stat===Gp?sm("Connection","Detected buffering proxy"):e.stat===Qp&&sm("Connection","Detected no buffering proxy")})),setTimeout((()=>{h.vi()}),0),h}}function Ib(){return"undefined"!=typeof document?document:null}function _b(e){return new Vy(e,!0)}class Nb{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Se=e,this.timerId=t,this.Mi=n,this.Li=r,this.Bi=i,this.Ui=0,this.qi=null,this.Ki=Date.now(),this.reset()}reset(){this.Ui=0}ji(){this.Ui=this.Bi}Qi(e){this.cancel();const t=Math.floor(this.Ui+this.Wi()),n=Math.max(0,Date.now()-this.Ki),r=Math.max(0,t-n);r>0&&sm("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ui} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.qi=this.Se.enqueueAfterDelay(this.timerId,r,(()=>(this.Ki=Date.now(),e()))),this.Ui*=this.Li,this.Ui<this.Mi&&(this.Ui=this.Mi),this.Ui>this.Bi&&(this.Ui=this.Bi)}Gi(){null!==this.qi&&(this.qi.skipDelay(),this.qi=null)}cancel(){null!==this.qi&&(this.qi.cancel(),this.qi=null)}Wi(){return(Math.random()-.5)*this.Ui}}class Db{constructor(e,t,n,r,i,s){this.Se=e,this.zi=n,this.Hi=r,this.Ji=i,this.listener=s,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Nb(e,t)}tr(){return 1===this.state||2===this.state||4===this.state}er(){return 2===this.state}start(){3!==this.state?this.auth():this.nr()}async stop(){this.tr()&&await this.close(0)}sr(){this.state=0,this.Zi.reset()}ir(){this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(()=>this.rr())))}cr(e){this.ur(),this.stream.send(e)}async rr(){if(this.er())return this.close(0)}ur(){this.Xi&&(this.Xi.cancel(),this.Xi=null)}async close(e,t){this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():t&&t.code===tm.RESOURCE_EXHAUSTED?(om(t.toString()),om("Using maximum backoff delay to prevent overloading the backend."),this.Zi.ji()):t&&t.code===tm.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ri(t)}ar(){}auth(){this.state=1;const e=this.hr(this.Yi),t=this.Yi;this.Ji.getToken().then((e=>{this.Yi===t&&this.lr(e)}),(t=>{e((()=>{const e=new nm(tm.UNKNOWN,"Fetching auth token failed: "+t.message);return this.dr(e)}))}))}lr(e){const t=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii((()=>{t((()=>(this.state=2,this.listener.Ii())))})),this.stream.Ri((e=>{t((()=>this.dr(e)))})),this.stream.onMessage((e=>{t((()=>this.onMessage(e)))}))}nr(){this.state=4,this.Zi.Qi((async()=>{this.state=0,this.start()}))}dr(e){return sm("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}hr(e){return t=>{this.Se.enqueueAndForget((()=>this.Yi===e?t():(sm("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Lb extends Db{constructor(e,t,n,r,i){super(e,"listen_stream_connection_backoff","listen_stream_idle",t,n,i),this.R=r}wr(e){return this.Hi.Fi("Listen",e)}onMessage(e){this.Zi.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:um()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.I?(cm(void 0===t||"string"==typeof t),Im.fromBase64String(t||"")):(cm(void 0===t||t instanceof Uint8Array),Im.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?tm.UNKNOWN:dy(e.code);return new nm(t,e.message||"")}(o);n=new Ay(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Wy(e,r.document.name),s=zy(r.document.updateTime),o=new Xm({mapValue:{fields:r.document.fields}}),a=Zm.newFoundDocument(i,s,o),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Dy(l,u,a.key,a)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Wy(e,r.document),s=r.readTime?zy(r.readTime):vm.min(),o=Zm.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Dy([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Wy(e,r.document),s=r.removedTargetIds||[];n=new Dy([],s,i,null)}else{if(!("filter"in t))return um();{t.filter;const e=t.filter;e.targetId;const r=e.count||0,i=new cy(r),s=e.targetId;n=new Ly(s,i)}}return n}(this.R,e),n=function(e){if(!("targetChange"in e))return vm.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?vm.min():t.readTime?zy(t.readTime):vm.min()}(e);return this.listener._r(t,n)}mr(e){const t={};t.database=Yy(this.R),t.addTarget=function(e,t){let n;const r=t.target;return n=ig(r)?{documents:tv(e,r)}:{query:nv(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=By(e,t.resumeToken):t.snapshotVersion.compareTo(vm.min())>0&&(n.readTime=jy(e,t.snapshotVersion.toTimestamp())),n}(this.R,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return um()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,e);n&&(t.labels=n),this.cr(t)}gr(e){const t={};t.database=Yy(this.R),t.removeTarget=e,this.cr(t)}}class Ab extends Db{constructor(e,t,n,r,i){super(e,"write_stream_connection_backoff","write_stream_idle",t,n,i),this.R=r,this.yr=!1}get pr(){return this.yr}start(){this.yr=!1,this.lastStreamToken=void 0,super.start()}ar(){this.yr&&this.Er([])}wr(e){return this.Hi.Fi("Write",e)}onMessage(e){if(cm(!!e.streamToken),this.lastStreamToken=e.streamToken,this.yr){this.Zi.reset();const t=function(e,t){return e&&e.length>0?(cm(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?zy(e.updateTime):zy(t);return n.isEqual(vm.min())&&(n=zy(t)),new Gg(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=zy(e.commitTime);return this.listener.Tr(n,t)}return cm(!e.writeResults||0===e.writeResults.length),this.yr=!0,this.listener.Ir()}Ar(){const e={};e.database=Yy(this.R),this.cr(e)}Er(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Zy(this.R,e)))};this.cr(t)}}class Ob extends class{}{constructor(e,t,n){super(),this.credentials=e,this.Hi=t,this.R=n,this.Rr=!1}Pr(){if(this.Rr)throw new nm(tm.FAILED_PRECONDITION,"The client has already been terminated.")}Ni(e,t,n){return this.Pr(),this.credentials.getToken().then((r=>this.Hi.Ni(e,t,n,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===tm.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new nm(tm.UNKNOWN,e.toString())}))}Oi(e,t,n){return this.Pr(),this.credentials.getToken().then((r=>this.Hi.Oi(e,t,n,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===tm.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new nm(tm.UNKNOWN,e.toString())}))}terminate(){this.Rr=!0}}class Rb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.br=0,this.vr=null,this.Vr=!0}Sr(){0===this.br&&(this.Dr("Unknown"),this.vr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.vr=null,this.Cr("Backend didn't respond within 10 seconds."),this.Dr("Offline"),Promise.resolve()))))}Nr(e){"Online"===this.state?this.Dr("Unknown"):(this.br++,this.br>=1&&(this.kr(),this.Cr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Dr("Offline")))}set(e){this.kr(),this.br=0,"Online"===e&&(this.Vr=!1),this.Dr(e)}Dr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Cr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(om(t),this.Vr=!1):sm("OnlineStateTracker",t)}kr(){null!==this.vr&&(this.vr.cancel(),this.vr=null)}}class Pb{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.$r=[],this.Or=new Map,this.Fr=new Set,this.Mr=[],this.Lr=i,this.Lr.di((e=>{n.enqueueAndForget((async()=>{$b(this)&&(sm("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=hm(e);t.Fr.add(4),await Fb(t),t.Br.set("Unknown"),t.Fr.delete(4),await Mb(t)}(this))}))})),this.Br=new Rb(n,r)}}async function Mb(e){if($b(e))for(const t of e.Mr)await t(!0)}async function Fb(e){for(const t of e.Mr)await t(!1)}function Ub(e,t){const n=hm(e);n.Or.has(t.targetId)||(n.Or.set(t.targetId,t),zb(n)?qb(n):oE(n).er()&&jb(n,t))}function Vb(e,t){const n=hm(e),r=oE(n);n.Or.delete(t),r.er()&&Bb(n,t),0===n.Or.size&&(r.er()?r.ir():$b(n)&&n.Br.set("Unknown"))}function jb(e,t){e.Ur.q(t.targetId),oE(e).mr(t)}function Bb(e,t){e.Ur.q(t),oE(e).gr(t)}function qb(e){e.Ur=new Ry({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.Or.get(t)||null}),oE(e).start(),e.Br.Sr()}function zb(e){return $b(e)&&!oE(e).tr()&&e.Or.size>0}function $b(e){return 0===hm(e).Fr.size}function Hb(e){e.Ur=void 0}async function Kb(e){e.Or.forEach(((t,n)=>{jb(e,t)}))}async function Wb(e,t){Hb(e),zb(e)?(e.Br.Nr(t),qb(e)):e.Br.set("Unknown")}async function Gb(e,t,n){if(e.Br.set("Online"),t instanceof Ay&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Or.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Or.delete(r),e.Ur.removeTarget(r))}(e,t)}catch(n){sm("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Qb(e,n)}else if(t instanceof Dy?e.Ur.X(t):t instanceof Ly?e.Ur.rt(t):e.Ur.et(t),!n.isEqual(vm.min()))try{const t=await rb(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Ur.ut(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Or.get(r);i&&e.Or.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((t=>{const n=e.Or.get(t);if(!n)return;e.Or.set(t,n.withResumeToken(Im.EMPTY_BYTE_STRING,n.snapshotVersion)),Bb(e,t);const r=new Zv(n.target,t,1,n.sequenceNumber);jb(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){sm("RemoteStore","Failed to raise snapshot:",t),await Qb(e,t)}}async function Qb(e,t,n){if(!$v(t))throw t;e.Fr.add(1),await Fb(e),e.Br.set("Offline"),n||(n=()=>rb(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{sm("RemoteStore","Retrying IndexedDB access"),await n(),e.Fr.delete(1),await Mb(e)}))}function Yb(e,t){return t().catch((n=>Qb(e,n,t)))}async function Xb(e){const t=hm(e),n=aE(t);let r=t.$r.length>0?t.$r[t.$r.length-1].batchId:-1;for(;Jb(t);)try{const e=await sb(t.localStore,r);if(null===e){0===t.$r.length&&n.ir();break}r=e.batchId,Zb(t,e)}catch(e){await Qb(t,e)}eE(t)&&tE(t)}function Jb(e){return $b(e)&&e.$r.length<10}function Zb(e,t){e.$r.push(t);const n=aE(e);n.er()&&n.pr&&n.Er(t.mutations)}function eE(e){return $b(e)&&!aE(e).tr()&&e.$r.length>0}function tE(e){aE(e).start()}async function nE(e){aE(e).Ar()}async function rE(e){const t=aE(e);for(const n of e.$r)t.Er(n.mutations)}async function iE(e,t,n){const r=e.$r.shift(),i=Jv.from(r,t,n);await Yb(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Xb(e)}async function sE(e,t){t&&aE(e).pr&&await async function(e,t){if(function(e){switch(e){case tm.OK:return um();case tm.CANCELLED:case tm.UNKNOWN:case tm.DEADLINE_EXCEEDED:case tm.RESOURCE_EXHAUSTED:case tm.INTERNAL:case tm.UNAVAILABLE:case tm.UNAUTHENTICATED:return!1;case tm.INVALID_ARGUMENT:case tm.NOT_FOUND:case tm.ALREADY_EXISTS:case tm.PERMISSION_DENIED:case tm.FAILED_PRECONDITION:case tm.ABORTED:case tm.OUT_OF_RANGE:case tm.UNIMPLEMENTED:case tm.DATA_LOSS:return!0;default:return um()}}(n=t.code)&&n!==tm.ABORTED){const n=e.$r.shift();aE(e).sr(),await Yb(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Xb(e)}var n}(e,t),eE(e)&&tE(e)}function oE(e){return e.qr||(e.qr=function(e,t,n){const r=hm(e);return r.Pr(),new Lb(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:Kb.bind(null,e),Ri:Wb.bind(null,e),_r:Gb.bind(null,e)}),e.Mr.push((async t=>{t?(e.qr.sr(),zb(e)?qb(e):e.Br.set("Unknown")):(await e.qr.stop(),Hb(e))}))),e.qr}function aE(e){return e.Kr||(e.Kr=function(e,t,n){const r=hm(e);return r.Pr(),new Ab(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:nE.bind(null,e),Ri:sE.bind(null,e),Ir:rE.bind(null,e),Tr:iE.bind(null,e)}),e.Mr.push((async t=>{t?(e.Kr.sr(),await Xb(e)):(await e.Kr.stop(),e.$r.length>0&&(sm("RemoteStore",`Stopping write stream with ${e.$r.length} pending writes`),e.$r=[]))}))),e.Kr}class lE{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Uv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new lE(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new nm(tm.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uE(e,t){if(om("AsyncQueue",`${t}: ${e}`),$v(e))return new nm(tm.UNAVAILABLE,`${t}: ${e}`);throw e}class cE{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Fm.comparator(t.key,n.key):(e,t)=>Fm.comparator(e.key,t.key),this.keyedMap=Sy(),this.sortedSet=new py(this.comparator)}static emptySet(e){return new cE(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cE))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new cE;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class hE{constructor(){this.jr=new py(Fm.comparator)}track(e){const t=e.doc.key,n=this.jr.get(t);n?0!==e.type&&3===n.type?this.jr=this.jr.insert(t,e):3===e.type&&1!==n.type?this.jr=this.jr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.jr=this.jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.jr=this.jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.jr=this.jr.remove(t):1===e.type&&2===n.type?this.jr=this.jr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.jr=this.jr.insert(t,{type:2,doc:e.doc}):um():this.jr=this.jr.insert(t,e)}Qr(){const e=[];return this.jr.inorderTraversal(((t,n)=>{e.push(n)})),e}}class fE{constructor(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach((e=>{i.push({type:0,doc:e})})),new fE(e,t,cE.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class dE{constructor(){this.Wr=void 0,this.listeners=[]}}class pE{constructor(){this.queries=new Uw((e=>Ig(e)),Cg),this.onlineState="Unknown",this.Gr=new Set}}function mE(e,t){const n=hm(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.listeners)t.Hr(e)&&(r=!0);i.Wr=e}}r&&yE(n)}function gE(e,t,n){const r=hm(e),i=r.queries.get(t);if(i)for(const e of i.listeners)e.onError(n);r.queries.delete(t)}function yE(e){e.Gr.forEach((e=>{e.next()}))}class vE{constructor(e,t,n){this.query=e,this.Jr=t,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}Hr(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new fE(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),t=!0):this.eo(e,this.onlineState)&&(this.no(e),t=!0),this.Xr=e,t}onError(e){this.Jr.error(e)}zr(e){this.onlineState=e;let t=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),t=!0),t}eo(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return!(this.options.so&&n||e.docs.isEmpty()&&"Offline"!==t)}Zr(e){if(e.docChanges.length>0)return!0;const t=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}no(e){e=fE.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)}}class wE{constructor(e){this.key=e}}class bE{constructor(e){this.key=e}}class EE{constructor(e,t){this.query=e,this.uo=t,this.ao=null,this.current=!1,this.ho=Ty(),this.mutatedKeys=Ty(),this.lo=Dg(e),this.fo=new cE(this.lo)}get wo(){return this.uo}_o(e,t){const n=t?t.mo:new hE,r=t?t.fo:this.fo;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=Sg(this.query)&&r.size===this.query.limit?r.last():null,l=kg(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=Ng(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),f=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let d=!1;u&&c?u.data.isEqual(c.data)?h!==f&&(n.track({type:3,doc:c}),d=!0):this.yo(u,c)||(n.track({type:2,doc:c}),d=!0,(a&&this.lo(c,a)>0||l&&this.lo(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),d=!0):u&&!c&&(n.track({type:1,doc:u}),d=!0,(a||l)&&(o=!0)),d&&(c?(s=s.add(c),i=f?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),Sg(this.query)||kg(this.query))for(;s.size>this.query.limit;){const e=Sg(this.query)?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{fo:s,mo:n,Nn:o,mutatedKeys:i}}yo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;const i=e.mo.Qr();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return um()}};return n(e)-n(t)}(e.type,t.type)||this.lo(e.doc,t.doc))),this.po(n);const s=t?this.Eo():[],o=0===this.ho.size&&this.current?1:0,a=o!==this.ao;return this.ao=o,0!==i.length||a?{snapshot:new fE(this.query,e.fo,r,i,e.mutatedKeys,0===o,a,!1),To:s}:{To:s}}zr(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new hE,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}}Io(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations}po(e){e&&(e.addedDocuments.forEach((e=>this.uo=this.uo.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.uo=this.uo.delete(e))),this.current=e.current)}Eo(){if(!this.current)return[];const e=this.ho;this.ho=Ty(),this.fo.forEach((e=>{this.Io(e.key)&&(this.ho=this.ho.add(e.key))}));const t=[];return e.forEach((e=>{this.ho.has(e)||t.push(new bE(e))})),this.ho.forEach((n=>{e.has(n)||t.push(new wE(n))})),t}Ao(e){this.uo=e.Bn,this.ho=Ty();const t=this._o(e.documents);return this.applyChanges(t,!0)}Ro(){return fE.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)}}class SE{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class kE{constructor(e){this.key=e,this.Po=!1}}class xE{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.bo={},this.vo=new Uw((e=>Ig(e)),Cg),this.Vo=new Map,this.So=new Set,this.Do=new py(Fm.comparator),this.Co=new Map,this.No=new cb,this.xo={},this.ko=new Map,this.$o=Cw.Yt(),this.onlineState="Unknown",this.Oo=void 0}get isPrimaryClient(){return!0===this.Oo}}async function TE(e,t){const n=function(e){const t=hm(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=IE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=BE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=NE.bind(null,t),t.bo._r=mE.bind(null,t.eventManager),t.bo.Mo=gE.bind(null,t.eventManager),t}(e);let r,i;const s=n.vo.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ro();else{const e=await function(e,t){const n=hm(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Ue.getTargetData(e,t).next((i=>i?(r=i,Vv.resolve(r)):n.Ue.allocateTargetId(e).next((i=>(r=new Zv(t,i,0,e.currentSequenceNumber),n.Ue.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.kn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(e.targetId,e),n.$n.set(t,e.targetId)),e}))}(n.localStore,Tg(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await async function(e,t,n,r){e.Fo=(t,n,r)=>async function(e,t,n,r){let i=t.view._o(n);i.Nn&&(i=await ab(e.localStore,t.query,!1).then((({documents:e})=>t.view._o(e,i))));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return ME(e,t.targetId,o.To),o.snapshot}(e,t,n,r);const i=await ab(e.localStore,t,!0),s=new EE(t,i.Bn),o=s._o(i.documents),a=Ny.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),l=s.applyChanges(o,e.isPrimaryClient,a);ME(e,n,l.To);const u=new SE(t,n,s);return e.vo.set(t,u),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),l.snapshot}(n,t,r,"current"===s),n.isPrimaryClient&&Ub(n.remoteStore,e)}return i}async function CE(e,t){const n=hm(e),r=n.vo.get(t),i=n.Vo.get(r.targetId);if(i.length>1)return n.Vo.set(r.targetId,i.filter((e=>!Cg(e,t)))),void n.vo.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await ob(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Vb(n.remoteStore,r.targetId),RE(n,r.targetId)})).catch(Lw)):(RE(n,r.targetId),await ob(n.localStore,r.targetId,!0))}async function IE(e,t){const n=hm(e);try{const e=await ib(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Co.get(t);r&&(cm(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Po=!0:e.modifiedDocuments.size>0?cm(r.Po):e.removedDocuments.size>0&&(cm(r.Po),r.Po=!1))})),await VE(n,e,t)}catch(e){await Lw(e)}}function _E(e,t,n){const r=hm(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.vo.forEach(((n,r)=>{const i=r.view.zr(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=hm(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const e of n.listeners)e.zr(t)&&(r=!0)})),r&&yE(n)}(r.eventManager,t),e.length&&r.bo._r(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function NE(e,t,n){const r=hm(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Co.get(t),s=i&&i.key;if(s){let e=new py(Fm.comparator);e=e.insert(s,Zm.newNoDocument(s,vm.min()));const n=Ty().add(s),i=new _y(vm.min(),new Map,new yy(pm),e,n);await IE(r,i),r.Do=r.Do.remove(s),r.Co.delete(t),UE(r)}else await ob(r.localStore,t,!1).then((()=>RE(r,t,n))).catch(Lw)}async function DE(e,t){const n=hm(e),r=t.batch.batchId;try{const e=await function(e,t){const n=hm(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Fn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Vv.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);cm(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),o.next((()=>e._n.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n._n.performConsistencyCheck(e))).next((()=>n.Mn.pn(e,r)))}))}(n.localStore,t);OE(n,r,null),AE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await VE(n,e)}catch(e){await Lw(e)}}async function LE(e,t,n){const r=hm(e);try{const e=await function(e,t){const n=hm(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n._n.lookupMutationBatch(e,t).next((t=>(cm(null!==t),r=t.keys(),n._n.removeMutationBatch(e,t)))).next((()=>n._n.performConsistencyCheck(e))).next((()=>n.Mn.pn(e,r)))}))}(r.localStore,t);OE(r,t,n),AE(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await VE(r,e)}catch(n){await Lw(n)}}function AE(e,t){(e.ko.get(t)||[]).forEach((e=>{e.resolve()})),e.ko.delete(t)}function OE(e,t,n){const r=hm(e);let i=r.xo[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function RE(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Vo.get(t))e.vo.delete(r),n&&e.bo.Mo(r,n);e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach((t=>{e.No.containsKey(t)||PE(e,t)}))}function PE(e,t){e.So.delete(t.path.canonicalString());const n=e.Do.get(t);null!==n&&(Vb(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),UE(e))}function ME(e,t,n){for(const r of n)r instanceof wE?(e.No.addReference(r.key,t),FE(e,r)):r instanceof bE?(sm("SyncEngine","Document no longer in limbo: "+r.key),e.No.removeReference(r.key,t),e.No.containsKey(r.key)||PE(e,r.key)):um()}function FE(e,t){const n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(sm("SyncEngine","New document in limbo: "+n),e.So.add(r),UE(e))}function UE(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){const t=e.So.values().next().value;e.So.delete(t);const n=new Fm(km.fromString(t)),r=e.$o.next();e.Co.set(r,new kE(n)),e.Do=e.Do.insert(n,r),Ub(e.remoteStore,new Zv(Tg(Eg(n.path)),r,2,em.o))}}async function VE(e,t,n){const r=hm(e),i=[],s=[],o=[];r.vo.isEmpty()||(r.vo.forEach(((e,a)=>{o.push(r.Fo(a,t,n).then((e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=Jw.vn(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.bo._r(i),await async function(e,t){const n=hm(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Vv.forEach(t,(t=>Vv.forEach(t.Pn,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Vv.forEach(t.bn,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!$v(e))throw e;sm("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.kn.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.kn=n.kn.insert(t,i)}}}(r.localStore,s))}async function jE(e,t){const n=hm(e);if(!n.currentUser.isEqual(t)){sm("SyncEngine","User change. New user:",t.toKey());const e=await nb(n.localStore,t);n.currentUser=t,function(e,t){e.ko.forEach((e=>{e.forEach((e=>{e.reject(new nm(tm.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ko.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await VE(n,e.Ln)}}function BE(e,t){const n=hm(e),r=n.Co.get(t);if(r&&r.Po)return Ty().add(r.key);{let e=Ty();const r=n.Vo.get(t);if(!r)return e;for(const t of r){const r=n.vo.get(t);e=e.unionWith(r.view.wo)}return e}}function qE(e){const t=hm(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=DE.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=LE.bind(null,t),t}class zE{constructor(){this.synchronizeTabs=!1}async initialize(e){this.R=_b(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.Uo(e),await this.persistence.start(),this.gcScheduler=this.qo(e),this.localStore=this.Ko(e)}qo(e){return null}Ko(e){return tb(this.persistence,new Zw,e.initialUser,this.R)}Uo(e){return new gb(vb.Ps,this.R)}Bo(e){return new Eb}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class $E extends zE{constructor(e,t,n){super(),this.jo=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await lb(this.localStore),await this.jo.initialize(this,e),await qE(this.jo.syncEngine),await Xb(this.jo.remoteStore)}Ko(e){return tb(this.persistence,new Zw,e.initialUser,this.R)}qo(e){const t=this.persistence.referenceDelegate.garbageCollector;return new Rw(t,e.asyncQueue)}Uo(e){const t=function(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?vw.withCacheSize(this.cacheSizeBytes):vw.DEFAULT;return new Gw(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,"undefined"!=typeof window?window:null,Ib(),this.R,this.sharedClientState,!!this.forceOwnership)}Bo(e){return new Eb}}class HE{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>_E(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=jE.bind(null,this.syncEngine),await async function(e,t){const n=hm(e);t?(n.Fr.delete(2),await Mb(n)):t||(n.Fr.add(2),await Fb(n),n.Br.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new pE}createDatastore(e){const t=_b(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Cb(r));var r;return function(e,t,n){return new Ob(e,t,n)}(e.credentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>_E(this.syncEngine,e,0),s=kb.gt()?new kb:new Sb,new Pb(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new xE(e,t,n,r,i,s);return o&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=hm(e);sm("RemoteStore","RemoteStore shutting down."),t.Fr.add(5),await Fb(t),t.Lr.shutdown(),t.Br.set("Unknown")}(this.remoteStore)}}class KE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Qo(this.observer.next,e)}error(e){this.observer.error&&this.Qo(this.observer.error,e)}Wo(){this.muted=!0}Qo(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class WE{constructor(e,t,n){this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=wb.UNAUTHENTICATED,this.clientId=dm.u(),this.credentialListener=()=>Promise.resolve(),this.credentials.setChangeListener(t,(async e=>{sm("FirestoreClient","Received user=",e.uid),await this.credentialListener(e),this.user=e}))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new nm(tm.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Uv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.removeChangeListener(),e.resolve()}catch(t){const n=uE(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function GE(e,t){e.asyncQueue.verifyOperationInProgress(),sm("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await nb(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e.offlineComponents=t}async function QE(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){return e.offlineComponents||(sm("FirestoreClient","Using default OfflineComponentProvider"),await GE(e,new zE)),e.offlineComponents}(e);sm("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>async function(e,t){const n=hm(e);n.asyncQueue.verifyOperationInProgress(),sm("RemoteStore","RemoteStore received new credentials");const r=$b(n);n.Fr.add(3),await Fb(n),r&&n.Br.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Fr.delete(3),await Mb(n)}(t.remoteStore,e))),e.onlineComponents=t}async function YE(e){return e.onlineComponents||(sm("FirestoreClient","Using default OnlineComponentProvider"),await QE(e,new HE)),e.onlineComponents}async function XE(e){const t=await YE(e),n=t.eventManager;return n.onListen=TE.bind(null,t.syncEngine),n.onUnlisten=CE.bind(null,t.syncEngine),n}class JE{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class ZE{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ZE&&e.projectId===this.projectId&&e.database===this.database}}const eS=new Map;class tS{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class nS{constructor(){this.changeListener=null}getToken(){return Promise.resolve(null)}invalidateToken(){}setChangeListener(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(wb.UNAUTHENTICATED)))}removeChangeListener(){this.changeListener=null}}class rS{constructor(e){this.currentUser=wb.UNAUTHENTICATED,this.oc=new Uv,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=()=>{this.cc++,this.currentUser=this.ac(),this.oc.resolve(),this.changeListener&&this.asyncQueue.enqueueRetryable((()=>this.changeListener(this.currentUser)))};const t=e=>{sm("FirebaseCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.uc)};e.onInit((e=>t(e))),setTimeout((()=>{if(!this.auth){const n=e.getImmediate({optional:!0});n?t(n):(sm("FirebaseCredentialsProvider","Auth not yet detected"),this.oc.resolve())}}),0)}getToken(){const e=this.cc,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.cc!==e?(sm("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(cm("string"==typeof t.accessToken),new tS(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}setChangeListener(e,t){this.asyncQueue=e,this.asyncQueue.enqueueRetryable((async()=>{await this.oc.promise,await t(this.currentUser),this.changeListener=t}))}removeChangeListener(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=()=>Promise.resolve()}ac(){const e=this.auth&&this.auth.getUid();return cm(null===e||"string"==typeof e),new wb(e)}}class iS{constructor(e,t,n){this.hc=e,this.lc=t,this.fc=n,this.type="FirstParty",this.user=wb.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.lc},t=this.hc.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e}}class sS{constructor(e,t,n){this.hc=e,this.lc=t,this.fc=n}getToken(){return Promise.resolve(new iS(this.hc,this.lc,this.fc))}setChangeListener(e,t){e.enqueueRetryable((()=>t(wb.FIRST_PARTY)))}removeChangeListener(){}invalidateToken(){}}function oS(e,t,n){if(!n)throw new nm(tm.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function aS(e){if(!Fm.isDocumentKey(e))throw new nm(tm.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function lS(e){if(Fm.isDocumentKey(e))throw new nm(tm.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function uS(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){if(e.constructor){const t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":um()}function cS(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new nm(tm.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=uS(e);throw new nm(tm.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class hS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new nm(tm.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new nm(tm.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new nm(tm.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fS{constructor(e,t){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hS({}),this._settingsFrozen=!1,e instanceof ZE?(this._databaseId=e,this._credentials=new nS):(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new nm(tm.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ZE(e.options.projectId)}(e),this._credentials=new rS(t))}get app(){if(!this._app)throw new nm(tm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new nm(tm.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hS(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new nS;switch(e.type){case"gapi":const t=e.client;return cm(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new sS(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new nm(tm.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=eS.get(e);t&&(sm("ComponentProvider","Removing Datastore"),eS.delete(e),t.terminate())}(this),Promise.resolve()}}class dS{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mS(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dS(this.firestore,e,this._key)}}class pS{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new pS(this.firestore,e,this._query)}}class mS extends pS{constructor(e,t,n){super(e,t,Eg(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dS(this.firestore,null,new Fm(e))}withConverter(e){return new mS(this.firestore,e,this._path)}}function gS(e,t,...n){if(e=hc(e),1===arguments.length&&(t=dm.u()),oS("doc","path",t),e instanceof fS){const r=km.fromString(t,...n);return aS(r),new dS(e,null,new Fm(r))}{if(!(e instanceof dS||e instanceof mS))throw new nm(tm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(km.fromString(t,...n));return aS(r),new dS(e.firestore,e instanceof mS?e.converter:null,new Fm(r))}}class yS{constructor(){this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.gc=null,this.yc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Nb(this,"async_queue_retry"),this.Ic=()=>{const e=Ib();e&&sm("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Zi.Gi()};const e=Ib();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}get isShuttingDown(){return this._c}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ac(),this.Rc(e)}enterRestrictedMode(e){if(!this._c){this._c=!0,this.Ec=e||!1;const t=Ib();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ic)}}enqueue(e){if(this.Ac(),this._c)return new Promise((()=>{}));const t=new Uv;return this.Rc((()=>this._c&&this.Ec?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.wc.push(e),this.Pc())))}async Pc(){if(0!==this.wc.length){try{await this.wc[0](),this.wc.shift(),this.Zi.reset()}catch(e){if(!$v(e))throw e;sm("AsyncQueue","Operation failed with retryable error: "+e)}this.wc.length>0&&this.Zi.Qi((()=>this.Pc()))}}Rc(e){const t=this.dc.then((()=>(this.yc=!0,e().catch((e=>{throw this.gc=e,this.yc=!1,om("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((e=>(this.yc=!1,e))))));return this.dc=t,t}enqueueAfterDelay(e,t,n){this.Ac(),this.Tc.indexOf(e)>-1&&(t=0);const r=lE.createAndSchedule(this,e,t,n,(e=>this.bc(e)));return this.mc.push(r),r}Ac(){this.gc&&um()}verifyOperationInProgress(){}async vc(){let e;do{e=this.dc,await e}while(e!==this.dc)}Vc(e){for(const t of this.mc)if(t.timerId===e)return!0;return!1}Sc(e){return this.vc().then((()=>{this.mc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.mc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.vc()}))}Dc(e){this.Tc.push(e)}bc(e){const t=this.mc.indexOf(e);this.mc.splice(t,1)}}function vS(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}(e)}class wS extends fS{constructor(e,t){super(e,t),this.type="firestore",this._queue=new yS,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ES(this),this._firestoreClient.terminate()}}function bS(e){return e._firestoreClient||ES(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ES(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new JE(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new WE(e._credentials,e._queue,r)}class SS{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new nm(tm.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tm(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class kS{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kS(Im.fromBase64String(e))}catch(e){throw new nm(tm.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new kS(Im.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class xS{constructor(e){this._methodName=e}}class TS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new nm(tm.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new nm(tm.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pm(this._lat,e._lat)||pm(this._long,e._long)}}const CS=/^__.*__$/;class IS{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new iy(e,this.data,this.fieldMask,t,this.fieldTransforms):new ry(e,this.data,t,this.fieldTransforms)}}class _S{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new iy(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function NS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw um()}}class DS{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Nc(){return this.settings.Nc}xc(e){return new DS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}kc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xc({path:n,$c:!1});return r.Oc(e),r}Fc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xc({path:n,$c:!1});return r.Cc(),r}Mc(e){return this.xc({path:void 0,$c:!0})}Lc(e){return qS(e,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.Uc)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Cc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Oc(this.path.get(e))}Oc(e){if(0===e.length)throw this.Lc("Document fields must not be empty");if(NS(this.Nc)&&CS.test(e))throw this.Lc('Document fields cannot begin and end with "__"')}}class LS{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.R=n||_b(e)}qc(e,t,n,r=!1){return new DS({Nc:e,methodName:t,Uc:n,path:Tm.emptyPath(),$c:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)}}function AS(e){const t=e._freezeSettings(),n=_b(e._databaseId);return new LS(e._databaseId,!!t.ignoreUndefinedProperties,n)}function OS(e,t,n,r,i,s={}){const o=e.qc(s.merge||s.mergeFields?2:0,t,n,i);US("Data must be an object, but it was:",o,r);const a=MS(r,o);let l,u;if(s.merge)l=new Cm(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=VS(t,r,n);if(!o.contains(i))throw new nm(tm.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);zS(e,i)||e.push(i)}l=new Cm(e),u=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=o.fieldTransforms;return new IS(new Xm(a),l,u)}class RS extends xS{_toFieldTransform(e){if(2!==e.Nc)throw 1===e.Nc?e.Lc(`${this._methodName}() can only appear at the top level of your update data`):e.Lc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof RS}}function PS(e,t){if(FS(e=hc(e)))return US("Unsupported field value:",t,e),MS(e,t);if(e instanceof xS)return function(e,t){if(!NS(t.Nc))throw t.Lc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Lc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.$c&&4!==t.Nc)throw t.Lc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=PS(i,t.Mc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=hc(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Rg(t.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ym.fromDate(e);return{timestampValue:jy(t.R,n)}}if(e instanceof ym){const n=new ym(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:jy(t.R,n)}}if(e instanceof TS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof kS)return{bytesValue:By(t.R,e._byteString)};if(e instanceof dS){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Lc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:$y(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Lc(`Unsupported field value: ${uS(e)}`)}(e,t)}function MS(e,t){const n={};return Em(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):bm(e,((e,r)=>{const i=PS(r,t.kc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function FS(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ym||e instanceof TS||e instanceof kS||e instanceof dS||e instanceof xS)}function US(e,t,n){if(!FS(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=uS(n);throw"an object"===r?t.Lc(e+" a custom object"):t.Lc(e+" "+r)}}function VS(e,t,n){if((t=hc(t))instanceof SS)return t._internalPath;if("string"==typeof t)return BS(e,t);throw qS("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}const jS=new RegExp("[~\\*/\\[\\]]");function BS(e,t,n){if(t.search(jS)>=0)throw qS(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new SS(...t.split("."))._internalPath}catch(r){throw qS(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function qS(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new nm(tm.INVALID_ARGUMENT,a+e+l)}function zS(e,t){return e.some((e=>e.isEqual(t)))}class $S{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new dS(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new HS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(KS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class HS extends $S{data(){return super.data()}}function KS(e,t){return"string"==typeof t?BS(e,t):t instanceof SS?t._internalPath:t._delegate._internalPath}class WS{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class GS extends $S{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new QS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(KS("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class QS extends GS{data(e={}){return super.data(e)}}class YS{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new WS(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new QS(this._firestore,this._userDataWriter,n.key,n,new WS(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new nm(tm.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>({type:"added",doc:new QS(e._firestore,e._userDataWriter,n.doc.key,n.doc,new WS(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++})))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new QS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new WS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:XS(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function XS(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return um()}}function JS(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class ZS extends class{convertValue(e,t="none"){switch(Um(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dm(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw um()}}convertObject(e,t){const n={};return bm(e.fields,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new TS(Dm(e.latitude),Dm(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Om(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Rm(e));default:return null}}convertTimestamp(e){const t=Nm(e);return new ym(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=km.fromString(e);cm(pv(n));const r=new ZE(n.get(1),n.get(3)),i=new Fm(n.popFirst(5));return r.isEqual(t)||om(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}{constructor(e){super(),this.firestore=e}convertBytes(e){return new kS(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dS(this.firestore,null,t)}}function ek(e,t,n){e=cS(e,dS);const r=cS(e.firestore,wS),i=JS(e.converter,t,n);return rk(r,[OS(AS(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Qg.none())])}function tk(e,t,n,...r){e=cS(e,dS);const i=cS(e.firestore,wS),s=AS(i);let o;return o="string"==typeof(t=hc(t))||t instanceof SS?function(e,t,n,r,i,s){const o=e.qc(1,t,n),a=[VS(t,r,n)],l=[i];if(s.length%2!=0)throw new nm(tm.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)a.push(VS(t,s[e])),l.push(s[e+1]);const u=[],c=Xm.empty();for(let e=a.length-1;e>=0;--e)if(!zS(u,a[e])){const t=a[e];let n=l[e];n=hc(n);const r=o.Fc(t);if(n instanceof RS)u.push(t);else{const e=PS(n,r);null!=e&&(u.push(t),c.set(t,e))}}const h=new Cm(u);return new _S(c,h,o.fieldTransforms)}(s,"updateDoc",e._key,t,n,r):function(e,t,n,r){const i=e.qc(1,t,n);US("Data must be an object, but it was:",i,r);const s=[],o=Xm.empty();bm(r,((e,r)=>{const a=BS(t,e,n);r=hc(r);const l=i.Fc(a);if(r instanceof RS)s.push(a);else{const e=PS(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Cm(s);return new _S(o,a,i.fieldTransforms)}(s,"updateDoc",e._key,t),rk(i,[o.toMutation(e._key,Qg.exists(!0))])}function nk(e,...t){var n,r,i;e=hc(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||vS(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(vS(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let l,u,c;if(e instanceof dS)u=cS(e.firestore,wS),c=Eg(e._key.path),l={next:n=>{t[o]&&t[o](function(e,t,n){const r=n.docs.get(t._key),i=new ZS(e);return new GS(e,i,t._key,r,new WS(n.hasPendingWrites,n.fromCache),t.converter)}(u,e,n))},error:t[o+1],complete:t[o+2]};else{const n=cS(e,pS);u=cS(n.firestore,wS),c=n._query;const r=new ZS(u);l={next:e=>{t[o]&&t[o](new YS(u,r,n,e))},error:t[o+1],complete:t[o+2]},function(e){if(kg(e)&&0===e.explicitOrderBy.length)throw new nm(tm.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query)}return function(e,t,n,r){const i=new KE(r),s=new vE(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=hm(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new dE),i)try{s.Wr=await n.onListen(r)}catch(e){const n=uE(e,`Initialization of query '${_g(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.zr(n.onlineState),s.Wr&&t.Hr(s.Wr)&&yE(n)}(await XE(e),s))),()=>{i.Wo(),e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=hm(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}(await XE(e),s)))}}(bS(u),c,a,l)}function rk(e,t){return function(e,t){const n=new Uv;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=qE(e);try{const e=await function(e,t){const n=hm(e),r=ym.now(),i=t.reduce(((e,t)=>e.add(t.key)),Ty());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>n.Mn.pn(e,i).next((i=>{s=i;const o=[];for(const e of t){const t=ey(e,s.get(e.key));null!=t&&o.push(new iy(e.key,t,Jm(t.value.mapValue),Qg.exists(!0)))}return n._n.addMutationBatch(e,r,o,t)})))).then((e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xo[e.currentUser.toKey()];r||(r=new py(pm)),r=r.insert(t,n),e.xo[e.currentUser.toKey()]=r}(r,e.batchId,n),await VE(r,e.changes),await Xb(r.remoteStore)}catch(e){const t=uE(e,"Failed to persist write");n.reject(t)}}(await function(e){return YE(e).then((e=>e.syncEngine))}(e),t,n))),n.promise}(bS(e),t)}function ik(e){return Array.prototype.slice.call(e)}function sk(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function ok(e,t,n){var r,i=new Promise((function(i,s){sk(r=e[t].apply(e,n)).then(i,s)}));return i.request=r,i}function ak(e,t,n){var r=ok(e,t,n);return r.then((function(e){if(e)return new dk(e,r.request)}))}function lk(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function uk(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return ok(this[t],r,arguments)})}))}function ck(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function hk(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return ak(this[t],r,arguments)})}))}function fk(e){this._index=e}function dk(e,t){this._cursor=e,this._request=t}function pk(e){this._store=e}function mk(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function gk(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new mk(n)}function yk(e){this._db=e}Zp="9.0.0-beta.8",Ac(new fc("firestore-exp",((e,{options:t})=>{const n=e.getProvider("app-exp").getImmediate(),r=new wS(n,e.getProvider("auth-internal"));return t=Object.assign({useFetchStreams:!0},t),r._setSettings(t),r}),"PUBLIC")),Uc("@firebase/firestore","0.0.900-exp.8b4d7550f",undefined),lk(fk,"_index",["name","keyPath","multiEntry","unique"]),uk(fk,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),hk(fk,"_index",IDBIndex,["openCursor","openKeyCursor"]),lk(dk,"_cursor",["direction","key","primaryKey","value"]),uk(dk,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(dk.prototype[e]=function(){var t=this,n=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,n),sk(t._request).then((function(e){if(e)return new dk(e,t._request)}))}))})})),pk.prototype.createIndex=function(){return new fk(this._store.createIndex.apply(this._store,arguments))},pk.prototype.index=function(){return new fk(this._store.index.apply(this._store,arguments))},lk(pk,"_store",["name","keyPath","indexNames","autoIncrement"]),uk(pk,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),hk(pk,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ck(pk,"_store",IDBObjectStore,["deleteIndex"]),mk.prototype.objectStore=function(){return new pk(this._tx.objectStore.apply(this._tx,arguments))},lk(mk,"_tx",["objectStoreNames","mode"]),ck(mk,"_tx",IDBTransaction,["abort"]),gk.prototype.createObjectStore=function(){return new pk(this._db.createObjectStore.apply(this._db,arguments))},lk(gk,"_db",["name","version","objectStoreNames"]),ck(gk,"_db",IDBDatabase,["deleteObjectStore","close"]),yk.prototype.transaction=function(){return new mk(this._db.transaction.apply(this._db,arguments))},lk(yk,"_db",["name","version","objectStoreNames"]),ck(yk,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[pk,fk].forEach((function(t){e in t.prototype&&(t.prototype[e.replace("open","iterate")]=function(){var t=ik(arguments),n=t[t.length-1],r=this._store||this._index,i=r[e].apply(r,t.slice(0,-1));i.onsuccess=function(){n(i.result)}})}))})),[fk,pk].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})}));const vk="0.0.900-exp.8b4d7550f",wk=1e4,bk=`w:${vk}`,Ek="FIS_v2",Sk=36e5,kk=new sc("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function xk(e){return e instanceof ic&&e.code.includes("request-failed")}function Tk({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function Ck(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Ik(e,t){const n=(await t.json()).error;return kk.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function _k({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Nk(e,{refreshToken:t}){const n=_k(e);return n.append("Authorization",function(e){return`FIS_v2 ${e}`}(t)),n}async function Dk(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Lk(e){return new Promise((t=>{setTimeout(t,e)}))}const Ak=/^[cdef][\w-]{21}$/;function Ok(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return Ak.test(t)?t:""}catch(e){return""}}function Rk(e){return`${e.appName}!${e.appId}`}const Pk=new Map;function Mk(e,t){const n=Rk(e);Fk(n,t),function(e,t){const n=function(){!Uk&&"BroadcastChannel"in self&&(Uk=new BroadcastChannel("[Firebase] FID Change"),Uk.onmessage=e=>{Fk(e.data.key,e.data.fid)});return Uk}();n&&n.postMessage({key:e,fid:t});0===Pk.size&&Uk&&(Uk.close(),Uk=null)}(n,t)}function Fk(e,t){const n=Pk.get(e);if(n)for(const e of n)e(t)}let Uk=null;const Vk="firebase-installations-store";let jk=null;function Bk(){return jk||(jk=function(e,t,n){var r=ok(indexedDB,"open",[e,t]),i=r.request;return i&&(i.onupgradeneeded=function(e){n&&n(new gk(i.result,e.oldVersion,i.transaction))}),r.then((function(e){return new yk(e)}))}("firebase-installations-database",1,(e=>{switch(e.oldVersion){case 0:e.createObjectStore(Vk)}}))),jk}async function qk(e,t){const n=Rk(e),r=(await Bk()).transaction(Vk,"readwrite"),i=r.objectStore(Vk),s=await i.get(n);return await i.put(t,n),await r.complete,s&&s.fid===t.fid||Mk(e,t.fid),t}async function zk(e){const t=Rk(e),n=(await Bk()).transaction(Vk,"readwrite");await n.objectStore(Vk).delete(t),await n.complete}async function $k(e,t){const n=Rk(e),r=(await Bk()).transaction(Vk,"readwrite"),i=r.objectStore(Vk),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.complete,!o||s&&s.fid===o.fid||Mk(e,o.fid),o}async function Hk(e){let t;const n=await $k(e,(n=>{const r=function(e){return Gk(e||{fid:Ok(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(kk.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:async function(e,t){try{return qk(e,await async function(e,{fid:t}){const n=Tk(e),r=_k(e),i={fid:t,authVersion:Ek,appId:e.appId,sdkVersion:bk},s={method:"POST",headers:r,body:JSON.stringify(i)},o=await Dk((()=>fetch(n,s)));if(o.ok){const e=await o.json();return{fid:e.fid||t,registrationStatus:2,refreshToken:e.refreshToken,authToken:Ck(e.authToken)}}throw await Ik("Create Installation",o)}(e,t))}catch(n){throw xk(n)&&409===n.customData.serverCode?await zk(e):await qk(e,{fid:t.fid,registrationStatus:0}),n}}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Kk(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Kk(e){let t=await Wk(e);for(;1===t.registrationStatus;)await Lk(100),t=await Wk(e);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Hk(e);return n||t}return t}function Wk(e){return $k(e,(e=>{if(!e)throw kk.create("installation-not-found");return Gk(e)}))}function Gk(e){return 1===(t=e).registrationStatus&&t.registrationTime+wk<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Qk({appConfig:e,platformLoggerProvider:t},n){const r=function(e,{fid:t}){return`${Tk(e)}/${t}/authTokens:generate`}(e,n),i=Nk(e,n),s=t.getImmediate({optional:!0});s&&i.append("x-firebase-client",s.getPlatformInfoString());const o={installation:{sdkVersion:bk}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await Dk((()=>fetch(r,a)));if(l.ok){return Ck(await l.json())}throw await Ik("Generate Auth Token",l)}async function Yk(e,t=!1){let n;const r=await $k(e.appConfig,(r=>{if(!Jk(r))throw kk.create("not-registered");const i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Sk}(e)}(i))return r;if(1===i.requestStatus)return n=async function(e,t){let n=await Xk(e.appConfig);for(;1===n.authToken.requestStatus;)await Lk(100),n=await Xk(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Yk(e,t):r}(e,t),r;{if(!navigator.onLine)throw kk.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return n=async function(e,t){try{const n=await Qk(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await qk(e.appConfig,r),n}catch(n){if(!xk(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await qk(e.appConfig,n)}else await zk(e.appConfig);throw n}}(e,t),t}}));return n?await n:r.authToken}function Xk(e){return $k(e,(e=>{if(!Jk(e))throw kk.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+wk<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function Jk(e){return void 0!==e&&2===e.registrationStatus}async function Zk(e,t=!1){const n=e;await async function(e){const{registrationPromise:t}=await Hk(e);t&&await t}(n.appConfig);return(await Yk(n,t)).token}function ex(e){return kk.create("missing-app-config-values",{valueName:e})}const tx="installations-exp",nx=e=>{const t=Oc(e.getProvider("app-exp").getImmediate(),tx).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await Hk(t.appConfig);return r?r.catch((function(){})):Yk(t).catch((function(){})),n.fid}(t),getToken:e=>Zk(t,e)}};Ac(new fc(tx,(e=>{const t=e.getProvider("app-exp").getImmediate();return{app:t,appConfig:function(e){if(!e||!e.options)throw ex("App Configuration");if(!e.name)throw ex("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw ex(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:Oc(t,"platform-logger"),_delete:()=>Promise.resolve()}}),"PUBLIC")),Ac(new fc("installations-exp-internal",nx,"PRIVATE")),Uc("@firebase/installations-exp",vk);const rx="@firebase/remote-config-exp";class ix{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}const sx="remote-config-exp",ox=new sc("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}."});const ax=["1","true","t","yes","y","on"];class lx{constructor(e,t=""){this._source=e,this._value=t}asString(){return this._value}asBoolean(){return"static"!==this._source&&ax.indexOf(this._value.toLowerCase())>=0}asNumber(){if("static"===this._source)return 0;let e=Number(this._value);return isNaN(e)&&(e=0),e}getSource(){return this._source}}async function ux(e){const t=hc(e),n=new ix;setTimeout((async()=>{n.abort()}),t.settings.fetchTimeoutMillis);try{await t._client.fetch({cacheMaxAgeMillis:t.settings.minimumFetchIntervalMillis,signal:n}),await t._storageCache.setLastFetchStatus("success")}catch(e){const n=function(e,t){return e instanceof ic&&-1!==e.code.indexOf(t)}(e,"fetch-throttle")?"throttle":"failure";throw await t._storageCache.setLastFetchStatus(n),e}}class cx{constructor(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const n=Date.now()-t,r=n<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}async fetch(e){const[t,n]=await Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(n&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return n;e.eTag=n&&n.eTag;const r=await this.client.fetch(e),i=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===r.status&&i.push(this.storage.setLastSuccessfulFetchResponse(r)),await Promise.all(i),r}}function hx(e=navigator){return e.languages&&e.languages[0]||e.language}class fx{constructor(e,t,n,r,i,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=s}async fetch(e){const[t,n]=await Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),r=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,i={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:n,app_id:this.appId,language_code:hx()},o={method:"POST",headers:i,body:JSON.stringify(s)},a=fetch(r,o),l=new Promise(((t,n)=>{e.signal.addEventListener((()=>{const e=new Error("The operation was aborted.");e.name="AbortError",n(e)}))}));let u;try{await Promise.race([a,l]),u=await a}catch(e){let t="fetch-client-network";throw"AbortError"===e.name&&(t="fetch-timeout"),ox.create(t,{originalErrorMessage:e.message})}let c=u.status;const h=u.headers.get("ETag")||void 0;let f,d;if(200===u.status){let e;try{e=await u.json()}catch(e){throw ox.create("fetch-client-parse",{originalErrorMessage:e.message})}f=e.entries,d=e.state}if("INSTANCE_STATE_UNSPECIFIED"===d?c=500:"NO_CHANGE"===d?c=304:"NO_TEMPLATE"!==d&&"EMPTY_CONFIG"!==d||(f={}),304!==c&&200!==c)throw ox.create("fetch-status",{httpStatus:c});return{status:c,eTag:h,config:f}}}class dx{constructor(e,t){this.client=e,this.storage=t}async fetch(e){const t=await this.storage.getThrottleMetadata()||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)}async attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:n}){await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(ox.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(e.signal,t);try{const t=await this.client.fetch(e);return await this.storage.deleteThrottleMetadata(),t}catch(t){if(!function(e){if(!(e instanceof ic&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t))throw t;const r={throttleEndTimeMillis:Date.now()+cc(n),backoffCount:n+1};return await this.storage.setThrottleMetadata(r),this.attemptFetch(e,r)}}}class px{constructor(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function mx(e,t){const n=e.target.error||void 0;return ox.create(t,{originalErrorMessage:n&&n.message})}const gx="app_namespace_store";class yx{constructor(e,t,n,r=function(){return new Promise(((e,t)=>{const n=indexedDB.open("firebase_remote_config",1);n.onerror=e=>{t(mx(e,"storage-open"))},n.onsuccess=t=>{e(t.target.result)},n.onupgradeneeded=e=>{const t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(gx,{keyPath:"compositeKey"})}}}))}()){this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}async get(e){const t=await this.openDbPromise;return new Promise(((n,r)=>{const i=t.transaction([gx],"readonly").objectStore(gx),s=this.createCompositeKey(e);try{const e=i.get(s);e.onerror=e=>{r(mx(e,"storage-get"))},e.onsuccess=e=>{const t=e.target.result;n(t?t.value:void 0)}}catch(e){r(ox.create("storage-get",{originalErrorMessage:e&&e.message}))}}))}async set(e,t){const n=await this.openDbPromise;return new Promise(((r,i)=>{const s=n.transaction([gx],"readwrite").objectStore(gx),o=this.createCompositeKey(e);try{const e=s.put({compositeKey:o,value:t});e.onerror=e=>{i(mx(e,"storage-set"))},e.onsuccess=()=>{r()}}catch(e){i(ox.create("storage-set",{originalErrorMessage:e&&e.message}))}}))}async delete(e){const t=await this.openDbPromise;return new Promise(((n,r)=>{const i=t.transaction([gx],"readwrite").objectStore(gx),s=this.createCompositeKey(e);try{const e=i.delete(s);e.onerror=e=>{r(mx(e,"storage-delete"))},e.onsuccess=()=>{n()}}catch(e){r(ox.create("storage-delete",{originalErrorMessage:e&&e.message}))}}))}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class vx{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}async loadFromStorage(){const e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),r=await e;r&&(this.lastFetchStatus=r);const i=await t;i&&(this.lastSuccessfulFetchTimestampMillis=i);const s=await n;s&&(this.activeConfig=s)}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}async function wx(e){return e=hc(e),await ux(e),async function(e){const t=hc(e),[n,r]=await Promise.all([t._storage.getLastSuccessfulFetchResponse(),t._storage.getActiveConfigEtag()]);return!!(n&&n.config&&n.eTag&&n.eTag!==r)&&(await Promise.all([t._storageCache.setActiveConfig(n.config),t._storage.setActiveConfigEtag(n.eTag)]),!0)}(e)}function bx(){return(bx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ex(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function Sx(e,t){return(Sx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kx(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Sx(e,t)}Ac(new fc(sx,(function(e,{instanceIdentifier:t}){const n=e.getProvider("app-exp").getImmediate(),r=e.getProvider("installations-exp-internal").getImmediate();if("undefined"==typeof window)throw ox.create("registration-window");const{projectId:i,apiKey:s,appId:o}=n.options;if(!i)throw ox.create("registration-project-id");if(!s)throw ox.create("registration-api-key");if(!o)throw ox.create("registration-app-id");t=t||"firebase";const a=new yx(o,n.name,t),l=new vx(a),u=new kc(rx);u.logLevel=gc.ERROR;const c=new fx(r,Mc,t,i,s,o),h=new dx(c,a),f=new cx(h,a,l,u),d=new px(n,f,l,a,u);return function(e){const t=hc(e);t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then((()=>{t._isInitializationComplete=!0}))),t._initializePromise}(d),d}),"PUBLIC").setMultipleInstances(!0)),Uc(rx,"0.0.900-exp.8b4d7550f");var xx={exports:{}};function Tx(){}function Cx(){}Cx.resetWarningCache=Tx;xx.exports=function(){function e(e,t,n,r,i,s){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==s){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Cx,resetWarningCache:Tx};return n.PropTypes=n,n}();var Ix=xx.exports;function _x(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var Nx=!1,Dx=U.createContext(null),Lx="unmounted",Ax="exited",Ox="entering",Rx="entered",Px="exiting",Mx=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,s=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?s?(i=Ax,r.appearStatus=Ox):i=Rx:i=t.unmountOnExit||t.mountOnEnter?Lx:Ax,r.state={status:i},r.nextCallback=null,r}kx(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Lx?{status:Ax}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Ox&&n!==Rx&&(t=Ox):n!==Ox&&n!==Rx||(t=Px)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===Ox?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===Ax&&this.setState({status:Lx})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[Gu.findDOMNode(this),r],s=i[0],o=i[1],a=this.getTimeouts(),l=r?a.appear:a.enter;!e&&!n||Nx?this.safeSetState({status:Rx},(function(){t.props.onEntered(s)})):(this.props.onEnter(s,o),this.safeSetState({status:Ox},(function(){t.props.onEntering(s,o),t.onTransitionEnd(l,(function(){t.safeSetState({status:Rx},(function(){t.props.onEntered(s,o)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Gu.findDOMNode(this);t&&!Nx?(this.props.onExit(r),this.safeSetState({status:Px},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Ax},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Ax},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Gu.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=i[0],o=i[1];this.props.addEndListener(s,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===Lx)return null;var t=this.props,n=t.children;t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef;var r=Ex(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return U.createElement(Dx.Provider,{value:null},"function"==typeof n?n(e,r):U.cloneElement(U.Children.only(n),r))},t}(U.Component);function Fx(){}Mx.contextType=Dx,Mx.propTypes={},Mx.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Fx,onEntering:Fx,onEntered:Fx,onExit:Fx,onExiting:Fx,onExited:Fx},Mx.UNMOUNTED=Lx,Mx.EXITED=Ax,Mx.ENTERING=Ox,Mx.ENTERED=Rx,Mx.EXITING=Px;var Ux=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"==typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))},Vx=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"==typeof n.className?n.className=_x(n.className,r):n.setAttribute("class",_x(n.className&&n.className.baseVal||"",r)));var n,r}))},jx=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),i=r[0],s=r[1];t.removeClasses(i,"exit"),t.addClass(i,s?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),i=r[0],s=r[1]?"appear":"enter";t.addClass(i,s,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),i=r[0],s=r[1]?"appear":"enter";t.removeClasses(i,s),t.addClass(i,s,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,i=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}kx(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&i&&(r+=" "+i),"active"===n&&e&&e.scrollTop,r&&(this.appliedClasses[t][n]=r,Ux(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,i=n.active,s=n.done;this.appliedClasses[t]={},r&&Vx(e,r),i&&Vx(e,i),s&&Vx(e,s)},n.render=function(){var e=this.props;e.classNames;var t=Ex(e,["classNames"]);return U.createElement(Mx,bx({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(U.Component);function Bx(e,n){var r=Object.create(null);return e&&t.exports.Children.map(e,(function(e){return e})).forEach((function(e){r[e.key]=function(e){return n&&t.exports.isValidElement(e)?n(e):e}(e)})),r}function qx(e,t,n){return null!=n[t]?n[t]:e.props[t]}function zx(e,n,r){var i=Bx(e.children),s=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),s=[];for(var o in e)o in t?s.length&&(i[o]=s,s=[]):s.push(o);var a={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var u=i[l][r];a[i[l][r]]=n(u)}a[l]=n(l)}for(r=0;r<s.length;r++)a[s[r]]=n(s[r]);return a}(n,i);return Object.keys(s).forEach((function(o){var a=s[o];if(t.exports.isValidElement(a)){var l=o in n,u=o in i,c=n[o],h=t.exports.isValidElement(c)&&!c.props.in;!u||l&&!h?u||!l||h?u&&l&&t.exports.isValidElement(c)&&(s[o]=t.exports.cloneElement(a,{onExited:r.bind(null,a),in:c.props.in,exit:qx(a,"exit",e),enter:qx(a,"enter",e)})):s[o]=t.exports.cloneElement(a,{in:!1}):s[o]=t.exports.cloneElement(a,{onExited:r.bind(null,a),in:!0,exit:qx(a,"exit",e),enter:qx(a,"enter",e)})}})),s}jx.defaultProps={classNames:""},jx.propTypes={};var $x=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},Hx=function(e){function n(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}kx(n,e);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var r,i,s=n.children,o=n.handleExited;return{children:n.firstRender?(r=e,i=o,Bx(r.children,(function(e){return t.exports.cloneElement(e,{onExited:i.bind(null,e),in:!0,appear:qx(e,"appear",r),enter:qx(e,"enter",r),exit:qx(e,"exit",r)})}))):zx(e,s,o),firstRender:!1}},r.handleExited=function(e,t){var n=Bx(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=bx({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=Ex(e,["component","childFactory"]),i=this.state.contextValue,s=$x(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?U.createElement(Dx.Provider,{value:i},s):U.createElement(Dx.Provider,{value:i},U.createElement(t,r,s))},n}(U.Component);Hx.propTypes={},Hx.defaultProps={component:"div",childFactory:function(e){return e}};Uc("firebase-exp","9.0.0-beta.8","app"),function(e,t={}){if("object"!=typeof t){t={name:t}}const n=Object.assign({name:Ic,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw Rc.create("bad-app-name",{appName:String(r)});const i=Nc.get(r);if(i){if(lc(e,i.options)&&lc(n,i.config))return i;throw Rc.create("duplicate-app",{appName:r})}const s=new yc(r);for(const e of Dc.values())s.addComponent(e);const o=new Pc(e,n,s);Nc.set(r,o)}({apiKey:"AIzaSyAkNpqlq9hU_cDu1_4wQIBNNc9OJd4LT1g",authDomain:"rebot-f643e.firebaseapp.com",projectId:"rebot-f643e",storageBucket:"rebot-f643e.appspot.com",messagingSenderId:"329205426356",appId:"1:329205426356:web:d8c730df77b0d7b9890fe1"});const Kx=function(e=Fc()){return Oc(e,"firestore-exp").getImmediate()}(),Wx=function(e=Fc()){return Oc(e=hc(e),sx).getImmediate()}();Wx.settings.minimumFetchIntervalMillis=11e4,function(e,t){!function(e){if(e._initialized||e._terminated)throw new nm(tm.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}(e=cS(e,wS));const n=bS(e),r=e._freezeSettings(),i=new HE;return function(e,t,n){const r=new Uv;return e.asyncQueue.enqueue((async()=>{try{await GE(e,n),await QE(e,t),r.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===tm.FAILED_PRECONDITION||e.code===tm.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(e))throw e;r.reject(e)}})).then((()=>r.promise))}(n,i,new $E(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(Kx,{forceOwnership:!0}).catch((e=>{}));const Gx=JSON.parse(localStorage.getItem("user"));Gx||(window.location="./auth.html");const Qx=`${Gx.id}`,Yx={timetable:gS(Kx,"timeTables","9D"),settings:gS(Kx,"users",Qx,"userStorage","config"),workspace:gS(Kx,"users",Qx,"userStorage","workspace"),marks:gS(Kx,"users",Qx,"userStorage","marks"),notes:function(e,t,...n){if(e=hc(e),oS("collection","path",t),e instanceof fS){const r=km.fromString(t,...n);return lS(r),new mS(e,null,r)}{if(!(e instanceof dS||e instanceof mS))throw new nm(tm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=km.fromString(e.path,...n).child(km.fromString(t));return lS(r),new mS(e.firestore,null,r)}}(Kx,"users",Qx,"notes"),firestore:Kx},Xx=t.exports.createContext(null),Jx=t.exports.createContext(null),Zx=t.exports.createContext(null);var eT=t.exports.createContext({}),tT={exports:{}};tT.exports=function(){var t=function(e){var t=e.id,n=e.viewBox,r=e.content;this.id=t,this.viewBox=n,this.content=r};t.prototype.stringify=function(){return this.content},t.prototype.toString=function(){return this.stringify()},t.prototype.destroy=function(){var e=this;["id","viewBox","content"].forEach((function(t){return delete e[t]}))};var n=function(e){var t=!!document.importNode,n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(n,!0):n};function r(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof window?window:void 0!==e||"undefined"!=typeof self&&self;var i=r((function(e,t){!function(t,n){e.exports=n()}(0,(function(){function e(e){return e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function t(e){return Array.isArray(e)?[]:{}}function n(n,r){return r&&!0===r.clone&&e(n)?s(t(n),n,r):n}function r(t,r,i){var o=t.slice();return r.forEach((function(r,a){void 0===o[a]?o[a]=n(r,i):e(r)?o[a]=s(t[a],r,i):-1===t.indexOf(r)&&o.push(n(r,i))})),o}function i(t,r,i){var o={};return e(t)&&Object.keys(t).forEach((function(e){o[e]=n(t[e],i)})),Object.keys(r).forEach((function(a){e(r[a])&&t[a]?o[a]=s(t[a],r[a],i):o[a]=n(r[a],i)})),o}function s(e,t,s){var o=Array.isArray(t),a=(s||{arrayMerge:r}).arrayMerge||r;return o?Array.isArray(e)?a(e,t,s):n(t,s):i(e,t,s)}return s.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return s(e,n,t)}))},s}))})),s=r((function(e,t){var n={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}};t.default=n,e.exports=t.default})),o=function(e){return Object.keys(e).map((function(t){return t+'="'+e[t].toString().replace(/"/g,"&quot;")+'"'})).join(" ")},a=s.svg,l=s.xlink,u={};u[a.name]=a.uri,u[l.name]=l.uri;var c=function(e,t){void 0===e&&(e="");var n=i(u,t||{});return"<svg "+o(n)+">"+e+"</svg>"};return function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={isMounted:{}};return r.isMounted.get=function(){return!!this.node},t.createFromExistingNode=function(e){return new t({id:e.getAttribute("id"),viewBox:e.getAttribute("viewBox"),content:e.outerHTML})},t.prototype.destroy=function(){this.isMounted&&this.unmount(),e.prototype.destroy.call(this)},t.prototype.mount=function(e){if(this.isMounted)return this.node;var t="string"==typeof e?document.querySelector(e):e,n=this.render();return this.node=n,t.appendChild(n),n},t.prototype.render=function(){var e=this.stringify();return n(c(e)).childNodes[0]},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(t.prototype,r),t}(t)}();var nT=tT.exports;function rT(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var s=Object.keys(Object(i)),o=0,a=s.length;o<a;o++){var l=s[o],u=Object.getOwnPropertyDescriptor(i,l);void 0!==u&&u.enumerable&&(n[l]=i[l])}}return n}var iT={assign:rT,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:rT})}},sT={exports:{}};!function(t,n){t.exports=function(){function t(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof window?window:void 0!==e||"undefined"!=typeof self&&self;var n=t((function(e,t){!function(t,n){e.exports=n()}(0,(function(){function e(e){return e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function t(e){return Array.isArray(e)?[]:{}}function n(n,r){return r&&!0===r.clone&&e(n)?s(t(n),n,r):n}function r(t,r,i){var o=t.slice();return r.forEach((function(r,a){void 0===o[a]?o[a]=n(r,i):e(r)?o[a]=s(t[a],r,i):-1===t.indexOf(r)&&o.push(n(r,i))})),o}function i(t,r,i){var o={};return e(t)&&Object.keys(t).forEach((function(e){o[e]=n(t[e],i)})),Object.keys(r).forEach((function(a){e(r[a])&&t[a]?o[a]=s(t[a],r[a],i):o[a]=n(r[a],i)})),o}function s(e,t,s){var o=Array.isArray(t),a=(s||{arrayMerge:r}).arrayMerge||r;return o?Array.isArray(e)?a(e,t,s):n(t,s):i(e,t,s)}return s.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return s(e,n,t)}))},s}))}));function r(e){return e=e||Object.create(null),{on:function(t,n){(e[t]||(e[t]=[])).push(n)},off:function(t,n){e[t]&&e[t].splice(e[t].indexOf(n)>>>0,1)},emit:function(t,n){(e[t]||[]).map((function(e){e(n)})),(e["*"]||[]).map((function(e){e(t,n)}))}}}var i=t((function(e,t){var n={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}};t.default=n,e.exports=t.default})),s=function(e){return Object.keys(e).map((function(t){return t+'="'+e[t].toString().replace(/"/g,"&quot;")+'"'})).join(" ")},o=i.svg,a=i.xlink,l={};l[o.name]=o.uri,l[a.name]=a.uri;var u,c=function(e,t){void 0===e&&(e="");var r=n(l,t||{});return"<svg "+s(r)+">"+e+"</svg>"},h=i.svg,f=i.xlink,d={attrs:(u={style:["position: absolute","width: 0","height: 0"].join("; "),"aria-hidden":"true"},u[h.name]=h.uri,u[f.name]=f.uri,u)},p=function(e){this.config=n(d,e||{}),this.symbols=[]};p.prototype.add=function(e){var t=this.symbols,n=this.find(e.id);return n?(t[t.indexOf(n)]=e,!1):(t.push(e),!0)},p.prototype.remove=function(e){var t=this.symbols,n=this.find(e);return!!n&&(t.splice(t.indexOf(n),1),n.destroy(),!0)},p.prototype.find=function(e){return this.symbols.filter((function(t){return t.id===e}))[0]||null},p.prototype.has=function(e){return null!==this.find(e)},p.prototype.stringify=function(){var e=this.config.attrs,t=this.symbols.map((function(e){return e.stringify()})).join("");return c(t,e)},p.prototype.toString=function(){return this.stringify()},p.prototype.destroy=function(){this.symbols.forEach((function(e){return e.destroy()}))};var m=function(e){var t=e.id,n=e.viewBox,r=e.content;this.id=t,this.viewBox=n,this.content=r};m.prototype.stringify=function(){return this.content},m.prototype.toString=function(){return this.stringify()},m.prototype.destroy=function(){var e=this;["id","viewBox","content"].forEach((function(t){return delete e[t]}))};var g=function(e){var t=!!document.importNode,n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(n,!0):n},y=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},t.createFromExistingNode=function(e){return new t({id:e.getAttribute("id"),viewBox:e.getAttribute("viewBox"),content:e.outerHTML})},t.prototype.destroy=function(){this.isMounted&&this.unmount(),e.prototype.destroy.call(this)},t.prototype.mount=function(e){if(this.isMounted)return this.node;var t="string"==typeof e?document.querySelector(e):e,n=this.render();return this.node=n,t.appendChild(n),n},t.prototype.render=function(){var e=this.stringify();return g(c(e)).childNodes[0]},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(t.prototype,n),t}(m),v={autoConfigure:!0,mountTo:"body",syncUrlsWithBaseTag:!1,listenLocationChangeEvent:!0,locationChangeEvent:"locationChange",locationChangeAngularEmitter:!1,usagesToUpdate:"use[*|href]",moveGradientsOutsideSymbol:!1},w=function(e){return Array.prototype.slice.call(e,0)},b={isChrome:function(){return/chrome/i.test(navigator.userAgent)},isFirefox:function(){return/firefox/i.test(navigator.userAgent)},isIE:function(){return/msie/i.test(navigator.userAgent)||/trident/i.test(navigator.userAgent)},isEdge:function(){return/edge/i.test(navigator.userAgent)}},E=function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent(e,!1,!1,t),window.dispatchEvent(n)},S=function(e){var t=[];return w(e.querySelectorAll("style")).forEach((function(e){e.textContent+="",t.push(e)})),t},k=function(e){return(e||window.location.href).split("#")[0]},x=function(e){angular.module("ng").run(["$rootScope",function(t){t.$on("$locationChangeSuccess",(function(t,n,r){E(e,{oldUrl:r,newUrl:n})}))}])},T="linearGradient, radialGradient, pattern, mask, clipPath",C=function(e,t){return void 0===t&&(t=T),w(e.querySelectorAll("symbol")).forEach((function(e){w(e.querySelectorAll(t)).forEach((function(t){e.parentNode.insertBefore(t,e)}))})),e};function I(e,t){return w(e).reduce((function(e,n){if(!n.attributes)return e;var r=w(n.attributes),i=t?r.filter(t):r;return e.concat(i)}),[])}var _=i.xlink.uri,N="xlink:href",D=/[{}|\\\^\[\]`"<>]/g;function L(e){return e.replace(D,(function(e){return"%"+e[0].charCodeAt(0).toString(16).toUpperCase()}))}function A(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function O(e,t,n){return w(e).forEach((function(e){var r=e.getAttribute(N);if(r&&0===r.indexOf(t)){var i=r.replace(t,n);e.setAttributeNS(_,N,i)}})),e}var R=["clipPath","colorProfile","src","cursor","fill","filter","marker","markerStart","markerMid","markerEnd","mask","stroke","style"],P=R.map((function(e){return"["+e+"]"})).join(","),M=function(e,t,n,r){var i=L(n),s=L(r);I(e.querySelectorAll(P),(function(e){var t=e.localName,n=e.value;return-1!==R.indexOf(t)&&-1!==n.indexOf("url("+i)})).forEach((function(e){return e.value=e.value.replace(new RegExp(A(i),"g"),s)})),O(t,i,s)},F={MOUNT:"mount",SYMBOL_MOUNT:"symbol_mount"};return function(e){function t(t){var i=this;void 0===t&&(t={}),e.call(this,n(v,t));var s=r();this._emitter=s,this.node=null;var o=this.config;if(o.autoConfigure&&this._autoConfigure(t),o.syncUrlsWithBaseTag){var a=document.getElementsByTagName("base")[0].getAttribute("href");s.on(F.MOUNT,(function(){return i.updateUrls("#",a)}))}var l=this._handleLocationChange.bind(this);this._handleLocationChange=l,o.listenLocationChangeEvent&&window.addEventListener(o.locationChangeEvent,l),o.locationChangeAngularEmitter&&x(o.locationChangeEvent),s.on(F.MOUNT,(function(e){o.moveGradientsOutsideSymbol&&C(e)})),s.on(F.SYMBOL_MOUNT,(function(e){o.moveGradientsOutsideSymbol&&C(e.parentNode),(b.isIE()||b.isEdge())&&S(e)}))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={isMounted:{}};return i.isMounted.get=function(){return!!this.node},t.prototype._autoConfigure=function(e){var t=this.config;void 0===e.syncUrlsWithBaseTag&&(t.syncUrlsWithBaseTag=void 0!==document.getElementsByTagName("base")[0]),void 0===e.locationChangeAngularEmitter&&(t.locationChangeAngularEmitter=void 0!==window.angular),void 0===e.moveGradientsOutsideSymbol&&(t.moveGradientsOutsideSymbol=b.isFirefox())},t.prototype._handleLocationChange=function(e){var t=e.detail,n=t.oldUrl,r=t.newUrl;this.updateUrls(n,r)},t.prototype.add=function(t){var n=this,r=e.prototype.add.call(this,t);return this.isMounted&&r&&(t.mount(n.node),this._emitter.emit(F.SYMBOL_MOUNT,t.node)),r},t.prototype.attach=function(e){var t=this,n=this;if(n.isMounted)return n.node;var r="string"==typeof e?document.querySelector(e):e;return n.node=r,this.symbols.forEach((function(e){e.mount(n.node),t._emitter.emit(F.SYMBOL_MOUNT,e.node)})),w(r.querySelectorAll("symbol")).forEach((function(e){var t=y.createFromExistingNode(e);t.node=e,n.add(t)})),this._emitter.emit(F.MOUNT,r),r},t.prototype.destroy=function(){var e=this,t=e.config,n=e.symbols,r=e._emitter;n.forEach((function(e){return e.destroy()})),r.off("*"),window.removeEventListener(t.locationChangeEvent,this._handleLocationChange),this.isMounted&&this.unmount()},t.prototype.mount=function(e,t){void 0===e&&(e=this.config.mountTo),void 0===t&&(t=!1);var n=this;if(n.isMounted)return n.node;var r="string"==typeof e?document.querySelector(e):e,i=n.render();return this.node=i,t&&r.childNodes[0]?r.insertBefore(i,r.childNodes[0]):r.appendChild(i),this._emitter.emit(F.MOUNT,i),i},t.prototype.render=function(){return g(this.stringify())},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},t.prototype.updateUrls=function(e,t){if(!this.isMounted)return!1;var n=document.querySelectorAll(this.config.usagesToUpdate);return M(this.node,n,k(e)+"#",k(t)+"#"),!0},Object.defineProperties(t.prototype,i),t}(p)}()}(sT);var oT,aT=sT.exports,lT=!("undefined"==typeof window||!window.document||!window.document.createElement);if(lT){var uT="__SVG_SPRITE_NODE__";oT=new aT({attrs:{id:uT}});var cT=function(){var e=document.getElementById(uT);e?oT.attach(e):oT.mount()};document.querySelector("body")?cT():document.addEventListener("DOMContentLoaded",cT)}else oT=null;function hT(e){oT&&oT.add(e)}var fT=lT?t.exports.useLayoutEffect:t.exports.useEffect;function dT(){return(dT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pT(Object(n),!0).forEach((function(t){gT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yT(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var vT={display:"block"};var wT=function(e){var n=e.width,r=e.height,i=e.viewBox,s=e.id,o=e.className,a=e.style,l=e.fill,u=e.getRootRef,c=e.Component,h=yT(e,["width","height","viewBox","id","className","style","fill","getRootRef","Component"]),f=Math.max(n,r),d=t.exports.useContext(eT),p=function(e,t){for(var n=t.classPrefix,r=t.globalClasses,i="",s=0;s<e.length;s++)n&&(i+=" "+(n+e[s])),n&&!r||(i+=" "+e[s]);return i}(["Icon","Icon--".concat(f),"Icon--w-".concat(n),"Icon--h-".concat(r),"Icon--".concat(s)],d);return U.createElement(c,dT({role:"presentation"},h,{ref:u,className:"".concat(p," ").concat(o),style:mT(mT({},a),{},{width:n,height:r})}),U.createElement("svg",{viewBox:i,width:n,height:r,style:vT},U.createElement("use",{xlinkHref:"#".concat(s),style:{fill:"currentColor",color:l}})))};wT.defaultProps={Component:"div",className:"",style:{}};var bT="0 0 28 28",ET="calendar_outline_28",ST=!1;function kT(){ST||(hT(new nT({id:ET,viewBox:bT,content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="calendar_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M19 1a1 1 0 011 1v1.16c.84.133 1.384.35 1.93.641A5.452 5.452 0 0124.2 6.07c.475.889.748 1.77.794 3.93L25 10v7.308l-.005.61c-.041 2.22-.315 3.113-.796 4.013a5.452 5.452 0 01-2.268 2.268c-.978.523-1.948.801-4.623.801h-6.616l-.61-.005c-2.22-.041-3.113-.315-4.013-.796a5.452 5.452 0 01-2.268-2.268c-.502-.94-.778-1.87-.8-4.31L3 10.691V10c.053-2.16.326-3.042.801-3.93A5.452 5.452 0 016.07 3.8 5.679 5.679 0 018 3.16V2a1 1 0 112 0v1.007c.217-.005.447-.007.692-.007h6.616c.245 0 .476.002.694.007L18 2a1 1 0 011-1zm3.999 11H5v5.591l.01.57c.039 1.506.198 2.159.555 2.826.337.63.818 1.111 1.448 1.448.746.4 1.473.551 3.396.564h7.182l.57-.009c1.506-.039 2.159-.198 2.826-.555a3.453 3.453 0 001.448-1.448c.4-.746.551-1.473.564-3.396V12zm-3.953 5c.433 0 .774.081 1.059.234.285.152.509.376.661.661.153.285.234.626.234 1.059v.092c0 .433-.081.774-.234 1.059a1.59 1.59 0 01-.661.661c-.285.153-.626.234-1.059.234h-.092c-.433 0-.774-.081-1.059-.234a1.59 1.59 0 01-.661-.661c-.153-.285-.234-.626-.234-1.059v-.092c0-.433.081-.774.234-1.059a1.59 1.59 0 01.661-.661c.285-.153.626-.234 1.059-.234h.092zM17.591 5H10.41L10 5.007V6a1 1 0 11-2 0v-.807c-.381.087-.683.21-.987.372a3.453 3.453 0 00-1.448 1.448c-.37.69-.527 1.365-.559 2.986L22.993 10l-.003-.16c-.039-1.507-.198-2.16-.555-2.827a3.453 3.453 0 00-1.448-1.448 3.835 3.835 0 00-.986-.372L20 6a1 1 0 01-2 0l.002-.994-.41-.005z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),ST=!0)}var xT=function(e){return fT((function(){kT()}),[]),U.createElement(wT,iT.assign({},e,{viewBox:bT,id:ET,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};xT.mountIcon=kT;var TT="0 0 28 28",CT="education_outline_28",IT=!1;function _T(){IT||(hT(new nT({id:CT,viewBox:TT,content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="education_outline_28"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.428 6.043a5 5 0 015.145 0l6.681 4.01a.5.5 0 01-.016.866l-6.828 3.756a5 5 0 01-4.82 0l-6.828-3.756a.5.5 0 01-.016-.867l6.681-4.009zm6.174-1.715l6.681 4.01c1.654.992 1.609 3.404-.081 4.334l-6.828 3.755a7 7 0 01-6.747 0l-6.829-3.755c-1.69-.93-1.735-3.342-.081-4.335l6.681-4.009a7 7 0 017.204 0z" fill="currentColor" /><path d="M23.5 10.5a1 1 0 012 0v5a1 1 0 01-2 0v-5z" fill="currentColor" /><path fill-rule="evenodd" clip-rule="evenodd" d="M8 13v5a5 5 0 005 5h2a5 5 0 005-5v-5h2v5a7 7 0 01-7 7h-2a7 7 0 01-7-7v-5h2z" fill="currentColor" /></symbol>'})),IT=!0)}var NT=function(e){return fT((function(){_T()}),[]),U.createElement(wT,iT.assign({},e,{viewBox:TT,id:CT,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};NT.mountIcon=_T;var DT="0 0 28 28",LT="home_outline_28",AT=!1;function OT(){AT||(hT(new nT({id:LT,viewBox:DT,content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="home_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M15.13 2.691l8.936 8.49A3 3 0 0125 13.356v8.641a2.5 2.5 0 01-2.5 2.5h-6a1 1 0 01-1-1v-5.5a1.5 1.5 0 00-3 0v5.5a1 1 0 01-1 1h-6a2.5 2.5 0 01-2.5-2.5v-8.641a3 3 0 01.934-2.175l8.936-8.49a1.64 1.64 0 012.26 0zM14 4.377L5.311 12.63a1 1 0 00-.311.725v8.641a.5.5 0 00.5.5h5v-4.5a3.5 3.5 0 017 0v4.5h5a.5.5 0 00.5-.5v-8.641a1 1 0 00-.311-.725L14 4.377z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),AT=!0)}var RT=function(e){return fT((function(){OT()}),[]),U.createElement(wT,iT.assign({},e,{viewBox:DT,id:LT,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};RT.mountIcon=OT;var PT="0 0 28 28",MT="search_28",FT=!1;function UT(){FT||(hT(new nT({id:MT,viewBox:PT,content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="search_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M20.522 18.966l3.756 3.756a1.1 1.1 0 11-1.556 1.556l-3.756-3.756A9.56 9.56 0 0113 22.6a9.6 9.6 0 119.6-9.6 9.56 9.56 0 01-2.078 5.966zM13 20.4a7.4 7.4 0 100-14.8 7.4 7.4 0 000 14.8z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),FT=!0)}var VT=function(e){return fT((function(){UT()}),[]),U.createElement(wT,iT.assign({},e,{viewBox:PT,id:MT,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};function jT(e){return U.createElement("div",{onClick:e.setActiveTab,className:"NavButton "+(e.isActive?"active":"")},U.createElement("div",null,U.createElement(e.icon,null)),U.createElement("span",null,e.title))}function BT(e){return U.createElement("div",{className:"bottom-nav"},U.createElement("div",{className:"nav-content"},U.createElement(jT,{title:"Главная",icon:RT,setActiveTab:()=>e.setActiveTab(1),isActive:1==e.activeTab}),U.createElement(jT,{title:"Поиск",icon:VT,setActiveTab:()=>e.setActiveTab(2),isActive:2==e.activeTab}),U.createElement(jT,{title:"Оценки",icon:NT,setActiveTab:()=>e.setActiveTab(3),isActive:3==e.activeTab}),U.createElement(jT,{title:"Неделя",icon:xT,setActiveTab:()=>e.setActiveTab(4),isActive:4==e.activeTab})))}function qT(e,n){const[r,i]=t.exports.useState(!1),s=t.exports.useRef(null);return t.exports.useImperativeHandle(n,(()=>({focus(){i(!0)}}))),U.createElement("div",{className:"editable-field",onClick:()=>i(!0)},r?U.createElement("input",{type:"text",value:e.value,onChange:function(){e.onChange(s.current.value)},onBlur:function(){e.onSave(s.current.value),i(!1)},ref:s,autoFocus:!0,autoComplete:"off"}):e.value)}VT.mountIcon=UT;var zT=t.exports.forwardRef(qT);function $T(e){const[n,r]=t.exports.useState(!1),i=t.exports.useRef();return U.createElement("div",{className:"dropdown"},U.createElement("button",{ref:i,className:"menuBtn",onClick:()=>r(!n)},U.createElement("i",{className:"fas fa-ellipsis-v"})),U.createElement(jx,{in:n,timeout:{enter:200,exit:160},classNames:"dropdown-content",onEnter:function(){n&&(i.current.addEventListener("blur",(()=>{r(!1)}),{once:!0}),window.ios&&i.current.addEventListener("mouseout",(()=>{r(!1)}),{once:!0}))},unmountOnExit:!0},U.createElement("div",{className:"dropdown-content"},e.children)))}function HT(e){const n=t.exports.useContext(Jx),r=t.exports.useContext(Xx),i=t.exports.useRef(null),[s,o]=t.exports.useState(e.lesson_data.hw);t.exports.useEffect((()=>{o(e.lesson_data.hw)}),[e.lesson_data.hw]);const a=n?n[e.lesson_data.id].title:U.createElement("i",{className:"fas fa-circle-notch fa-spin"}),l={backgroundColor:n?n[e.lesson_data.id].color:"var(--background3)"};const u=e.lesson_data.test?"flexRow highlighted":"flexRow";return U.createElement("div",{className:u},U.createElement("div",{className:"rowBlock medium colored",style:l},a),U.createElement("div",{className:"rowBlock mainField"},U.createElement(zT,{ref:i,value:s,onChange:o,onSave:function(){tk(Yx.timetable,{[e.path+".hw"]:s})}})),U.createElement("div",{className:"rowBlock square"},U.createElement($T,null,!r.stealth&&s&&U.createElement("button",{className:"withIcon",onClick:function(){const t=[{id:e.lesson_data.id,hw:s}];window.InstantView.open(t)}},U.createElement("i",{className:"fas fa-book"}),U.createElement("span",null,"Решебник")),U.createElement("button",{className:"withIcon",onClick:function(){tk(Yx.timetable,{[e.path+".test"]:!e.lesson_data.test})}},U.createElement("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"var(--text)"},U.createElement("path",{d:"M7.04785 16.3613C7.04785 17.1611 7.59277 17.6885 8.42773 17.6885H13.1211V21.8545C13.1211 23.0762 13.7539 24.333 14 24.333C14.2373 24.333 14.8701 23.0762 14.8701 21.8545V17.6885H19.5723C20.4072 17.6885 20.9434 17.1611 20.9434 16.3613C20.9434 14.4629 19.4404 12.5205 16.9531 11.6064L16.6719 7.51074C17.9814 6.77246 19.0186 5.95508 19.4668 5.36621C19.7129 5.05859 19.8271 4.7334 19.8271 4.45215C19.8271 3.87207 19.3877 3.44141 18.7197 3.44141H9.27148C8.6123 3.44141 8.16406 3.87207 8.16406 4.45215C8.16406 4.7334 8.27832 5.05859 8.52441 5.36621C8.97266 5.95508 10.0098 6.77246 11.3193 7.51074L11.0381 11.6064C8.55078 12.5205 7.04785 14.4629 7.04785 16.3613Z"})),U.createElement("span",null,e.lesson_data.test?"Не контрольная":"Контрольная")),U.createElement("button",{className:"withIcon",onClick:function(){navigator.clipboard.writeText(s).then((()=>{window.UI.alert("Скопировано")}))}},U.createElement("i",{className:"fas fa-clone"}),U.createElement("span",null,"Скопировать")))))}var KT=t.exports.memo(HT);const WT={1:"Понедельник",2:"Вторник",3:"Среда",4:"Четверг",5:"Пятница",6:"Суббота",7:"Воскресенье"};function GT(e){const n=t.exports.useContext(Xx),r=e.day_data;let i,s=[];for(i in r){let t,o;r[i].groups?(t=r[i][n.group],o=`${e.pathToDay}.${i}.${n.group}`):(t=r[i],o=`${e.pathToDay}.${i}`),s.push(U.createElement(KT,{key:i,path:o,lesson_data:t}))}return U.createElement("div",{className:"UIBlock day"},U.createElement("h1",null,WT[e.day_num]),!n.stealth&&U.createElement("button",{className:"table-btn open-all stealth",onClick:function(){const e=[];for(let t in r)r[t].hw&&e.push(r[t]);e&&window.InstantView.open(e)}},U.createElement("i",{className:"fas fa-book fa-lg"})),U.createElement("button",{className:"table-btn share"},U.createElement("i",{className:"fas fa-share fa-lg"})),U.createElement("div",{className:"content"},s))}var QT="undefined"!=typeof document?t.exports.useLayoutEffect:t.exports.useEffect,YT=function(e,t){"function"!=typeof e?e.current=t:e(t)},XT={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},JT=function(e){Object.keys(XT).forEach((function(t){e.style.setProperty(t,XT[t],"important")}))},ZT=null;var eC=function(){},tC=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],nC="undefined"!=typeof document&&!!document.documentElement.currentStyle,rC=function(e){var n,r,i=(n=e,r=t.exports.useRef(n),QT((function(){r.current=n})),r);t.exports.useLayoutEffect((function(){var e=function(e){i.current(e)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[])},iC=function(e,n){var r=e.cacheMeasurements,i=e.maxRows,s=e.minRows,o=e.onChange,a=void 0===o?eC:o,l=e.onHeightChange,u=void 0===l?eC:l,c=Ex(e,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),h=void 0!==c.value,f=t.exports.useRef(null),d=function(e,n){var r=t.exports.useRef();return t.exports.useCallback((function(t){e.current=t,r.current&&YT(r.current,null),r.current=n,n&&YT(n,t)}),[n])}(f,n),p=t.exports.useRef(0),m=t.exports.useRef(),g=function(){var e=f.current,t=r&&m.current?m.current:function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n,r=(n=t,tC.reduce((function(e,t){return e[t]=n[t],e}),{})),i=r.boxSizing;return""===i?null:(nC&&"border-box"===i&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px"),{sizingStyle:r,paddingSize:parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),borderSize:parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth)})}(e);if(t){m.current=t;var n=function(e,t,n,r){void 0===n&&(n=1),void 0===r&&(r=1/0),ZT||((ZT=document.createElement("textarea")).setAttribute("tabindex","-1"),ZT.setAttribute("aria-hidden","true"),JT(ZT)),null===ZT.parentNode&&document.body.appendChild(ZT);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach((function(e){var t=e;ZT.style[t]=o[t]})),JT(ZT),ZT.value=t;var l=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize}(ZT,e);ZT.value="x";var u=ZT.scrollHeight-i,c=u*n;"border-box"===a&&(c=c+i+s),l=Math.max(c,l);var h=u*r;return"border-box"===a&&(h=h+i+s),[l=Math.min(h,l),u]}(t,e.value||e.placeholder||"x",s,i),o=n[0],a=n[1];p.current!==o&&(p.current=o,e.style.setProperty("height",o+"px","important"),u(o,{rowHeight:a}))}};return"undefined"!=typeof document&&(t.exports.useLayoutEffect(g),rC(g)),t.exports.createElement("textarea",bx({},c,{onChange:function(e){h||g(),a(e)},ref:d}))},sC=t.exports.forwardRef(iC);function oC(e){const n=t.exports.useRef(),[r,i]=t.exports.useState(e.noteData.text),s=e.noteData.isPinned;t.exports.useEffect((()=>{i(e.noteData.text)}),[e.noteData.text]);const o="note "+(s?"pinned":"");return U.createElement("div",{className:o},U.createElement(sC,{maxRows:10,ref:n,value:r,onBlur:function(){ek(e.docRef,{text:r},{merge:!0})},onChange:function(){i(n.current.value)}}),U.createElement($T,null,U.createElement("button",{className:"withIcon",onClick:function(){ek(e.docRef,{isPinned:!s},{merge:!0})}},U.createElement("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"var(--text)"},U.createElement("path",{d:"M7.04785 16.3613C7.04785 17.1611 7.59277 17.6885 8.42773 17.6885H13.1211V21.8545C13.1211 23.0762 13.7539 24.333 14 24.333C14.2373 24.333 14.8701 23.0762 14.8701 21.8545V17.6885H19.5723C20.4072 17.6885 20.9434 17.1611 20.9434 16.3613C20.9434 14.4629 19.4404 12.5205 16.9531 11.6064L16.6719 7.51074C17.9814 6.77246 19.0186 5.95508 19.4668 5.36621C19.7129 5.05859 19.8271 4.7334 19.8271 4.45215C19.8271 3.87207 19.3877 3.44141 18.7197 3.44141H9.27148C8.6123 3.44141 8.16406 3.87207 8.16406 4.45215C8.16406 4.7334 8.27832 5.05859 8.52441 5.36621C8.97266 5.95508 10.0098 6.77246 11.3193 7.51074L11.0381 11.6064C8.55078 12.5205 7.04785 14.4629 7.04785 16.3613Z"})),U.createElement("span",null,s?"Открепить":"Закрепить")),U.createElement("button",{className:"withIcon",onClick:function(){navigator.clipboard.writeText(r).then((()=>{window.UI.alert("Скопировано в буфер обмена")}))}},U.createElement("i",{className:"fas fa-clone"}),U.createElement("span",null,"Скопировать")),U.createElement("button",{className:"withIcon danger",onClick:function(){!function(e){rk(cS(e.firestore,wS),[new ly(e._key,Qg.none())])}(e.docRef)}},U.createElement("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"var(--text)"},U.createElement("path",{d:"M9.84277 22.4785H18.166C19.3701 22.4785 20.0732 21.8369 20.126 20.6416L20.6797 7.94141H21.8926C22.3408 7.94141 22.6836 7.58984 22.6836 7.15039C22.6836 6.71094 22.332 6.37695 21.8926 6.37695H18.0781V5.05859C18.0781 3.65234 17.1729 2.81738 15.6611 2.81738H12.3213C10.8096 2.81738 9.9043 3.65234 9.9043 5.05859V6.37695H6.10742C5.66797 6.37695 5.31641 6.71973 5.31641 7.15039C5.31641 7.59863 5.66797 7.94141 6.10742 7.94141H7.3291L7.8916 20.6416C7.93555 21.8369 8.63867 22.4785 9.84277 22.4785ZM11.7324 5.1377C11.7324 4.74219 12.0049 4.4873 12.4443 4.4873H15.5469C15.9863 4.4873 16.2588 4.74219 16.2588 5.1377V6.37695H11.7324V5.1377ZM11.1787 19.7803C10.8271 19.7803 10.5811 19.5518 10.5723 19.2002L10.3086 9.86621C10.2998 9.51465 10.5459 9.27734 10.915 9.27734C11.2666 9.27734 11.5127 9.50586 11.5215 9.85742L11.7852 19.1914C11.8027 19.543 11.5566 19.7803 11.1787 19.7803ZM14 19.7803C13.6309 19.7803 13.3848 19.5518 13.3848 19.2002V9.85742C13.3848 9.51465 13.6309 9.27734 14 9.27734C14.3691 9.27734 14.624 9.51465 14.624 9.85742V19.2002C14.624 19.5518 14.3691 19.7803 14 19.7803ZM16.8213 19.7891C16.4434 19.7891 16.1973 19.543 16.2148 19.2002L16.4785 9.85742C16.4873 9.50586 16.7334 9.27734 17.085 9.27734C17.4541 9.27734 17.7002 9.51465 17.6914 9.86621L17.4277 19.2002C17.4189 19.5518 17.1729 19.7891 16.8213 19.7891Z"})),U.createElement("span",null,"Удалить"))))}function aC(){const[e,n]=t.exports.useState([]);return t.exports.useEffect((()=>{nk(Yx.notes,(e=>{const t=[];e.forEach((e=>{const n=e.data(),r=U.createElement(oC,{docRef:e.ref,key:e.id,noteData:n});t.push(r)})),n(t)}))}),[]),U.createElement("div",{className:"UIBlock",id:"notes"},U.createElement("h1",null,"Заметки"),U.createElement("button",{id:"add-note",onClick:function(){e.length<=8?function(e,t){const n=cS(e.firestore,wS),r=gS(e),i=JS(e.converter,t);rk(n,[OS(AS(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Qg.exists(!1))]).then((()=>r))}(Yx.notes,{text:"",isPinned:!1}):window.UI.alert("Нельзя добавить больше 10 заметок")}},U.createElement("svg",{width:"30",height:"30",viewBox:"0 0 28 28",fill:"var(--text)"},U.createElement("path",{d:"M13.9912 22.7422C18.9746 22.7422 23.0879 18.6289 23.0879 13.6543C23.0879 8.67969 18.9658 4.56641 13.9824 4.56641C9.00781 4.56641 4.90332 8.67969 4.90332 13.6543C4.90332 18.6289 9.0166 22.7422 13.9912 22.7422ZM9.7373 13.6631C9.7373 13.1445 10.1064 12.7842 10.6162 12.7842H13.1211V10.2793C13.1211 9.76953 13.4727 9.40918 13.9736 9.40918C14.4922 9.40918 14.8525 9.76953 14.8525 10.2793V12.7842H17.3662C17.8672 12.7842 18.2363 13.1445 18.2363 13.6631C18.2363 14.1641 17.8672 14.5244 17.3662 14.5244H14.8525V17.0293C14.8525 17.5303 14.4922 17.8994 13.9736 17.8994C13.4727 17.8994 13.1211 17.5303 13.1211 17.0293V14.5244H10.6162C10.1064 14.5244 9.7373 14.1641 9.7373 13.6631Z"}))),U.createElement("div",{className:"content"},e))}var lC=t.exports.memo((function(){const e=t.exports.useContext(Zx);let n=(new Date).getDay();return 0!=n&&6!=n||(n=1),U.createElement("div",{id:"homescreen-layout"},U.createElement("div",{className:"side-left"},!1,U.createElement(aC,null)),U.createElement("div",{className:"side-right"},e&&U.createElement(GT,{day_num:n,pathToDay:"2."+n,day_data:e[2][n]})))})),uC=t.exports.memo((function(e){const[n,r]=t.exports.useState(!navigator.onLine),[i,s]=t.exports.useState(2),o=t.exports.useContext(Zx);t.exports.useEffect((()=>{window.addEventListener("online",(()=>r(!0))),window.addEventListener("offline",(()=>r(!0)))}),[]);const a=1==i?"Прошлая неделя":2==i?"Эта неделя":"Следующая неделя",l=[];if(o){const e=o[i];let t;for(t in e)l.push(U.createElement(GT,{key:t,pathToDay:i+"."+t,day_num:t,day_data:e[t]}))}return U.createElement("div",null,U.createElement("header",{id:"week-header"},U.createElement("div",{className:"block-style weekChanger"},i>1?U.createElement("button",{onClick:()=>s(i-1)},U.createElement("i",{className:"fas fa-chevron-left fa-2x"})):U.createElement("button",{className:"unactive"},U.createElement("i",{className:"fas fa-chevron-left fa-2x"})),U.createElement("span",null,a),i<3?U.createElement("button",{onClick:()=>s(i+1)},U.createElement("i",{className:"fas fa-chevron-right fa-2x"})):U.createElement("button",{className:"unactive"},U.createElement("i",{className:"fas fa-chevron-right fa-2x"}))),U.createElement("button",{className:"block-style settings-btn",onClick:()=>e.setSettingsOpen(!0)},U.createElement("i",{className:"fas fa-cog"}))),n&&U.createElement("div",{className:"offline-alert"},U.createElement("div",{className:"text"},U.createElement("h4",null,"Интернет недоступен"),U.createElement("p",null,"Данные будут сохранены при подключении")),U.createElement("i",{className:"fas fa-exclamation-triangle"})),U.createElement(Hx,{exit:!1},U.createElement(jx,{key:i,timeout:400,classNames:"week-grid"},U.createElement("div",{className:"week-grid"},0!=l.length?l:U.createElement("div",{className:"no-timetable-alert UIBlock"},"Расписания пока нет")))))}));function cC(e){return U.createElement(U.Fragment,null,U.createElement("header",null,U.createElement("div",{className:"search"},U.createElement("img",{className:"google active",width:"20px",src:"static/icons/google.svg"}),U.createElement("img",{className:"rebot",width:"10px",src:"static/icons/resheba.svg"}),U.createElement("input",{className:"google active",type:"text",autoComplete:"off"}),U.createElement("input",{step:"1",inputMode:"decimal",className:"rebot",autoComplete:"off"})),U.createElement("div",{className:"wraper"},U.createElement("button",{id:"eng"},"Английский"),U.createElement("button",{id:"rus"},"Рус яз"),U.createElement("button",{id:"bel"},"Бел яз"),U.createElement("button",{id:"phis"},"Физика"),U.createElement("button",{id:"alg"},"Алгебра"),U.createElement("button",{id:"him"},"Химия"),U.createElement("button",{id:"brainly"},"Brainly"),U.createElement("button",{id:"geom"},"Геометрия"),U.createElement("button",{id:"math"},"Photomath"))),U.createElement("div",{className:"tool-bar"},U.createElement("button",{onClick:()=>e.setNotebooksOpen(!0)},U.createElement("svg",{width:"32",height:"32",viewBox:"0 0 28 28",fill:"var(--text)"},U.createElement("path",{d:"M9.5791 20.7207C11.1172 20.720 12.1807 21.2744 12.6553 21.5996C12.8223 21.6875 13.2617 21.96 13.376 21.9863V7.37891C12.7168 6.23633 10.915 5.33984 9.07812 5.33984C6.64355 5.33984 4.65723 6.71094 4.13867 7.74805V21.0283C4.14746 21.8105 4.58691 22.127 5.13184 22.127C5.53613 22.127 5.79102 21.9863 6.06348 21.7754C6.62598 21.3184 7.91797 20.7207 9.5791 20.7207ZM18.4209 20.7207C20.082 20.7207 21.3652 21.3184 21.9277 21.7754C22.2002 21.9863 22.4551 22.127 22.8506 22.127C23.3955 22.127 23.8525 21.8105 23.8525 21.0283V7.74805C23.334 6.71094 21.3477 5.33984 18.9219 5.33984C17.085 5.33984 15.2744 6.23633 14.624 7.37891V22.0039C14.7295 21.9775 15.1689 21.6963 15.3447 21.5996C15.8193 21.2744 16.8828 20.7207 18.4209 20.7207Z"}))),U.createElement("span",{id:"current-subj"},"ReBot"),U.createElement("button",{onClick:()=>e.setSettingsOpen(!0)},U.createElement("svg",{width:"30",height:"30",viewBox:"0 0 28 28",fill:"var(--text)"},U.createElement("path",{d:"M13.2002 23.0059H14.8086C15.3359 23.0059 15.7314 22.6895 15.8457 22.1709L16.2852 20.3164C16.584 20.2109 16.8652 20.0967 17.1289 19.9736L18.7549 20.9756C19.1855 21.248 19.7041 21.2041 20.0645 20.8438L21.1982 19.71C21.5586 19.3496 21.6113 18.8135 21.3213 18.374L20.3281 16.7656C20.4512 16.502 20.5654 16.2207 20.6533 15.9482L22.5254 15.5088C23.0439 15.3945 23.3516 14.999 23.3516 14.4717V12.8896C23.3516 12.3711 23.0439 11.9668 22.5254 11.8525L20.6709 11.4043C20.5742 11.0967 20.4512 10.8242 20.3457 10.5869L21.3389 8.94336C21.6201 8.49512 21.585 7.99414 21.207 7.625L20.0645 6.49121C19.6953 6.15723 19.2295 6.0957 18.7812 6.3418L17.1289 7.36133C16.874 7.23828 16.5928 7.12402 16.2939 7.01855L15.8457 5.1377C15.7314 4.61914 15.3359 4.30273 14.8086 4.30273H13.2002C12.6641 4.30273 12.2686 4.61914 12.1543 5.1377L11.7148 7.00977C11.416 7.10645 11.126 7.2207 10.8623 7.35254L9.21875 6.3418C8.77051 6.0957 8.31348 6.14844 7.93555 6.49121L6.79297 7.625C6.41504 7.99414 6.37988 8.49512 6.66113 8.94336L7.6543 10.5869C7.54883 10.8242 7.43457 11.0967 7.3291 11.4043L5.47461 11.8525C4.95605 11.9668 4.64844 12.3711 4.64844 12.8896V14.4717C4.64844 14.999 4.95605 15.3945 5.47461 15.5088L7.34668 15.9482C7.43457 16.2207 7.54883 16.502 7.67188 16.7656L6.67871 18.374C6.38867 18.8135 6.44141 19.3496 6.81055 19.71L7.93555 20.8438C8.2959 21.2041 8.81445 21.248 9.25391 20.9756L10.8711 19.9736C11.1348 20.0967 11.416 20.2109 11.7148 20.3164L12.1543 22.1709C12.2686 22.6895 12.6641 23.0059 13.2002 23.0059ZM14 16.7305C12.3125 16.7305 10.9326 15.3418 10.9326 13.6455C10.9326 11.9668 12.3125 10.5869 14 10.5869C15.6963 10.5869 17.0762 11.9668 17.0762 13.6455C17.0762 15.3418 15.6963 16.7305 14 16.7305Z"})))),U.createElement("div",{id:"boxes"}))}function hC(e){const n=t.exports.useRef(null),[r,i]=t.exports.useState(e.marks);t.exports.useEffect((()=>{i(e.marks)}),[e.marks]);const s=e.subject.title,o={backgroundColor:e.subject.color};let a=0,l=0,u=null;if(r){r.split(",").map((e=>{let t=parseInt(e);t&&(a+=t,l++)})),u=a/l,u=!isNaN(u)&&u<=10?Number(u.toFixed(1)):null}return U.createElement("div",{className:"flexRow"},U.createElement("div",{className:"rowBlock medium colored",style:o},s),U.createElement("div",{className:"rowBlock mainField"},U.createElement(zT,{ref:n,value:r,onChange:i,onSave:function(){ek(Yx.marks,{[e.subject.id]:r},{merge:!0})}})),r&&u&&U.createElement("div",{className:"rowBlock square"},u),U.createElement("div",{className:"rowBlock square",onClick:function(){n.current.focus(),","!=r.trim().slice(-1)&&""!=r&&i(r+", ")}},U.createElement("i",{className:"fas fa-plus"})))}var fC=t.exports.memo(hC),dC=t.exports.memo((function(){const e=t.exports.useContext(Jx),[n,r]=t.exports.useState(null);t.exports.useEffect((()=>{nk(Yx.marks,(e=>{e.data()&&r(Object.fromEntries(Object.entries(e.data()).sort()))}))}),[]);const i=[];if(n)for(let t in e){const r=e[t];r.id=t,r.marks&&i.push(U.createElement(fC,{key:t,subject:r,marks:n[t]}))}return U.createElement("div",{className:"UIBlock"},U.createElement("h1",null,"Оценки"),U.createElement("div",{className:"content"},i))}));function pC(e){const[n,r]=t.exports.useState(1);return t.exports.useEffect((()=>{document.getElementById("root").scrollTop=0}),[n]),U.createElement(U.Fragment,null,U.createElement(BT,{settings:e.settings,activeTab:n,setActiveTab:r}),!e.settings.stealth&&U.createElement("div",{id:"rebot",className:"app center mw600 "+(2==n?"active":"")},U.createElement(cC,{setNotebooksOpen:e.setNotebooksOpen,setSettingsOpen:e.setSettingsOpen})),U.createElement(Jx.Provider,{value:e.manifest},e.timetable&&U.createElement(Zx.Provider,{value:e.timetable},U.createElement("div",{className:"app center-auto "+(4==n?"active":"")},U.createElement(uC,{setSettingsOpen:e.setSettingsOpen})),U.createElement("div",{className:"app center-auto "+(1==n?"active":"")},U.createElement(lC,null))),U.createElement("div",{className:"app center-auto mw700 "+(3==n?"active":"")},U.createElement(dC,null))))}class mC{static alert(e){let t=document.querySelector(".alert");t.textContent=e,t.style="display: block; animation: alert 0.45s cubic-bezier(.5,.1,.3,1); animation-fill-mode: forwards;",window.active_timeout&&clearTimeout(window.active_timeout),window.active_timeout=setTimeout((()=>{t.style="display: block; animation: alert-down 0.4s cubic-bezier(.5,.1,.3,1); animation-fill-mode: forwards;",t.addEventListener("animationend",(()=>{t.style=""}),{once:!0}),window.active_timeout=void 0}),1400)}static open(e){e.style="display: block; animation: slide-left 0.6s cubic-bezier(.5,.1,.3,1); animation-fill-mode: forwards;"}static slide(e){e.classList.toggle("active")}static getInput(e,t){const n=document.querySelector("#rebot .search"),r=n.querySelector("input.rebot"),i=n.querySelector("input.google"),s=n.querySelector("img.google"),o=n.querySelector("img.rebot");r.classList.add("active"),i.classList.remove("active"),r.focus(),s.classList.remove("active"),o.classList.add("active"),r.addEventListener("keydown",(function n(i){if("Enter"==i.key){const i=r.value.replace(" ","").split(",");e(t,i),r.value="",r.blur(),r.removeEventListener("keydown",n)}})),r.addEventListener("blur",(function n(){const a=r.value.replace(" ","").split(",");r.value?(e(t,a),r.value=""):r.value="",r.classList.remove("active"),i.classList.add("active"),o.classList.remove("active"),s.classList.add("active"),r.removeEventListener("blur",n)}),{once:!0})}}function gC(e){return U.createElement("div",{className:"side-view-header"},U.createElement("div",{className:"title"},e.title),U.createElement("button",{className:"close",onClick:e.onClose},U.createElement("i",{className:"fas fa-chevron-"+e.side})))}function yC(e){return U.createElement(jx,{in:e.open,timeout:600,classNames:"side-view",unmountOnExit:!0,onEnter:function(){globalThis.blurListener=t=>{t.stopPropagation(),e.onClose()},e.backgroundRef&&(e.backgroundRef.current.addEventListener("click",globalThis.blurListener,{once:!0}),e.backgroundRef.current.classList.add("unfocused"))},onExit:function(){e.backgroundRef&&(e.backgroundRef.current.classList.remove("unfocused"),e.backgroundRef.current.removeEventListener("click",globalThis.blurListener))}},U.createElement("div",{className:"side-view "+e.side,id:e.id},U.createElement(gC,{title:e.title,onClose:e.onClose,side:e.side}),U.createElement("div",{className:"side-view-content"},e.children)))}yC.propTypes={id:Ix.string,open:Ix.bool.isRequired,onClose:Ix.func,side:Ix.oneOf(["right","left"]),backgroundRef:Ix.oneOfType([Ix.func,Ix.shape({current:Ix.any})])};class vC{constructor(e){this.manifest=e,this.box_container=document.querySelector("#boxes"),this.viewbox_template=document.querySelector(".template #viewbox"),this.status_title=document.querySelector("#current-subj"),this.search=document.querySelector(".search input"),document.querySelectorAll("#rebot header button").forEach((e=>{e.onclick=()=>{window.UI.getInput(((e,t)=>{this.open(e,t)}),e.id)}})),this.search.addEventListener("keydown",(e=>{"Enter"==e.key&&(window.open("https://www.google.com/search?q="+this.search.value,"_blank"),this.search.value="",this.search.blur())}))}open(e,t){let n;if(null==t){if(n=prompt("Введи номер или номера через запятую:"),!n)return;n=n.split(",")}else n=t;const r=this.manifest[e];this.status_title.textContent=r.title;for(let t of n){if(!t)continue;if(this.box_container.querySelector(`.viewbox[num='${t}']`))continue;let n=this.viewbox_template.cloneNode(!0);if(0==r.section)n.querySelector("#view").src="./static/img/404.webp",r.full_img;else{n.querySelector("#prew").remove(),n.querySelector("#next").remove(),n.querySelector("#alt-re").remove(),n.querySelector("#view").src=r.url.replace("*",t).replace("?",1);let e,i=2;for(;i<12;)e=n.querySelector("#view").cloneNode(!0),e.onerror=function(){this.remove()},e.src=r.url.replace("*",t).replace("?",i),n.querySelector(".viewbox-content").append(e),i++}this.box_container.prepend(n),n.querySelector(".num").textContent=t,n.setAttribute("num",t),n.setAttribute("subj_id",e)}}change_num(e,t){const n=e.parentNode.parentNode;let r=this.manifest[n.getAttribute("subj_id")],i=parseInt(n.getAttribute("num"))+t;n.querySelector("#view").src=r.url.replace("?",i),0==r.full_img&&(n.querySelector("#view2").src=r.url.replace("?",i+"_2"),n.querySelector("#view3").src=r.url.replace("?",i+"_3")),n.setAttribute("num",i),n.querySelector(".num").textContent=i}remove(e){e.remove()}open_alt(e){let t=e.getAttribute("num"),n=this.manifest[e.getAttribute("subj_id")].alt_url.replace("?",t);""!=n?window.open(n,"_self"):alert("Для этого предмета нет другого решебника")}}var wC=new class{constructor(){this.lockscreen=document.querySelector("#lockscreen"),this.indicator=this.lockscreen.querySelector("#indicator"),this.lockscreen.querySelectorAll("#numpad button").forEach((e=>{e.addEventListener("click",this.addCodeNum)}))}addCodeNum(e){e.target.classList.add("clicked"),e.target.addEventListener("transitionend",(e=>{e.target.classList.remove("clicked")}),{once:!0});const t=document.querySelector("#lockscreen"),n=t.querySelector("#indicator"),r=n.querySelectorAll(".char:not(.active)"),i=t.querySelector("#invalid-alert"),s=t.getAttribute("data-password")+e.target.textContent;t.setAttribute("data-password",s),r[0].classList.add("active"),1==r.length&&(localStorage.lockCode==s?(t.classList.add("unactive"),t.addEventListener("transitionend",(e=>{e.target.style.display="none"}),{once:!0})):(i.classList.add("active"),t.setAttribute("data-password",""),n.querySelectorAll(".char").forEach((e=>{e.classList.remove("active")}))))}changeLockCode(e){const t=e.querySelector("input#oldCode"),n=e.querySelector("input#newCode"),r=localStorage.lockCode;if(r&&t.value!=r)return mC.alert("Неверный код"),void(t.value="");const i=n.value.replace(/\D/g,"");4==i.length?(localStorage.lockCode=i,mC.alert("Код установлен"),mC.slide(window.securitySettings),t.value="",n.value=""):0==i.length?(localStorage.lockCode="",mC.alert("Код отключен"),mC.slide(window.securitySettings),t.value="",n.value=""):mC.alert("Код должен состоять из 4 цифр")}};!function(e,t){"function"!=typeof e.CustomEvent&&(e.CustomEvent=function(e,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var r=t.createEvent("CustomEvent");return r.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),r},e.CustomEvent.prototype=e.Event.prototype),t.addEventListener("touchstart",(function(e){if("true"===e.target.getAttribute("data-swipe-ignore"))return;a=e.target,o=Date.now(),n=e.touches[0].clientX,r=e.touches[0].clientY,i=0,s=0}),!1),t.addEventListener("touchmove",(function(e){if(!n||!r)return;var t=e.touches[0].clientX,o=e.touches[0].clientY;i=n-t,s=r-o}),!1),t.addEventListener("touchend",(function(e){if(a!==e.target)return;var t=parseInt(l(a,"data-swipe-threshold","20"),10),u=parseInt(l(a,"data-swipe-timeout","500"),10),c=Date.now()-o,h="",f=e.changedTouches||e.touches||[];Math.abs(i)>Math.abs(s)?Math.abs(i)>t&&c<u&&(h=i>0?"swiped-left":"swiped-right"):Math.abs(s)>t&&c<u&&(h=s>0?"swiped-up":"swiped-down");if(""!==h){var d={dir:h.replace(/swiped-/,""),xStart:parseInt(n,10),xEnd:parseInt((f[0]||{}).clientX||-1,10),yStart:parseInt(r,10),yEnd:parseInt((f[0]||{}).clientY||-1,10)};a.dispatchEvent(new CustomEvent("swiped",{bubbles:!0,cancelable:!0,detail:d})),a.dispatchEvent(new CustomEvent(h,{bubbles:!0,cancelable:!0,detail:d}))}n=null,r=null,o=null}),!1);var n=null,r=null,i=null,s=null,o=null,a=null;function l(e,n,r){for(;e&&e!==t.documentElement;){var i=e.getAttribute(n);if(i)return i;e=e.parentNode}return r}}(window,document);class bC{constructor(e){this.manifest=e,this.window1=document.querySelector("#inst1"),this.window2=document.querySelector("#inst2"),this.window1.addEventListener("swiped-left",(e=>{this.close(e.target.closest(".instant-view"))})),this.window2.addEventListener("swiped-right",(e=>{this.close(e.target.closest(".instant-view"))})),this.window1.addEventListener("swiped-right",(e=>{this.switch(e.target.closest(".instant-view"))})),this.window2.addEventListener("swiped-left",(e=>{this.switch(e.target.closest(".instant-view"))}))}open(e,t){let n;if(this.window1.classList.contains("active")?(n=this.window2,document.querySelectorAll(".app").forEach((e=>{e.classList.add("noscroll")})),window.instRight=!0,window.instLeft=!0):(90==window.orientation||window.screen.width>=800?document.querySelector("body").classList.add("min-right"):document.querySelectorAll(".app").forEach((e=>{e.classList.add("noscroll")})),n=this.window1,window.instLeft=!0,this.window2.classList.contains("active")&&(window.instRight=!0)),t)return n.querySelector(".content").innerHTML=t,void n.classList.add("active");n.querySelector(".content").innerHTML="";const r=n.querySelector(".content");for(let t of e){const e=this.manifest[t.id],n=t.hw.split(",");for(let t of n)if(t=t.replace(/\D/g,""),0==e.section){let n=document.createElement("img");if(n.src=e.url.replace("?",t),n.onerror=e=>{e.target.remove()},n.style.width="100%",r.append(n),0==e.full_img){let n,i=r.querySelector("img").cloneNode(!0);n.src=e.url.replace("?",t+"_2"),i.src=e.url.replace("?",t+"_3"),r.append(n,i)}}else{let n,i=1;for(;i<11;)n=document.createElement("img"),n.src=e.url.replace("*",t).replace("?",i),n.style.width="100%",n.onerror=e=>{e.target.remove()},r.append(n),i++}}n.classList.add("active")}switch(e){if(window.instLeft&&window.instRight||0==window.orientation&&window.screen.width<=800)return;let t=e.querySelector(".content").innerHTML;this.open(null,t),this.close(e)}close(e){e.classList.remove("active"),e.addEventListener("transitionend",(()=>{if(!e.classList.contains("active")){let t=e.querySelector(".content");t.innerHTML="",t.scrollTop=0}}),{once:!0}),"left"==e.getAttribute("side")?window.instLeft=!1:window.instRight=!1;let t=window.instLeft,n=window.instRight,r=document.body.classList;t||n?n&&!t?(r.remove("min-right"),r.add("min-left")):(r.remove("min-left"),r.add("min-right")):r.remove("min-left","min-right"),document.querySelectorAll(".app").forEach((e=>{e.classList.remove("noscroll")}))}}function EC(e){return U.createElement("div",{className:"switch block",onClick:e.onClick},e.icon,U.createElement("div",{className:"label-block"},U.createElement("a",{className:"title"},e.title),U.createElement("a",{className:"descr"},e.descr)),U.createElement("i",{className:"fas fa-chevron-right"}))}function SC(e){return U.createElement("div",{className:"switch block"},e.icon,U.createElement("div",{className:"label-block"},U.createElement("a",{className:"title"},e.title),U.createElement("a",{className:"descr"},e.descr)),U.createElement("label",{className:"ios7-switch"},U.createElement("input",{type:"checkbox",checked:e.checked,onChange:e.onChange}),U.createElement("span",null)))}function kC(e){const t=e.currentPanel==e.id;return U.createElement(jx,{in:t,timeout:500,classNames:"main"==e.id?"view-panel-main":"view-panel",unmountOnExit:!0},U.createElement("div",{className:"view-panel"},e.children))}function xC(e){return U.createElement("div",{className:"panel-header"},e.backButton&&U.createElement("button",{onClick:e.onBack},U.createElement("i",{className:"fas fa-chevron-left"})),U.createElement("div",{className:"title"},e.title))}function TC(e){const n=t.exports.useContext(Xx),[r,i]=t.exports.useState("main");function s(t,n){const r=n.target.checked;e.changeSetting(t,r)}function o(t){const n=t.target.id;e.changeSetting("theme",n)}return U.createElement(U.Fragment,null,U.createElement(kC,{currentPanel:r,id:"main"},U.createElement(xC,{title:"Основные"}),U.createElement("div",{className:"settings-block"},U.createElement("div",{className:"theme block"},U.createElement("span",{className:"circle",id:"purple",style:{backgroundColor:"#360A6C"},onClick:o}),U.createElement("span",{className:"circle",id:"blue",style:{backgroundColor:"#0A1B3C"},onClick:o}),U.createElement("span",{className:"circle",id:"dark",style:{backgroundColor:"#0F0F0F"},onClick:o}),U.createElement("span",{className:"circle",id:"ultraDark",style:{backgroundColor:"#000"},onClick:o}),U.createElement("span",{className:"circle",id:"light",style:{backgroundColor:"#F2F3F4"},onClick:o})),U.createElement("div",{className:"category"},"Решебники"),U.createElement(SC,{title:"Затемнять решения",descr:"Светлый текст на темном фоне",icon:U.createElement("i",{className:"fas fa-moon"}),onChange:e=>s("inversion",e),checked:n.inversion}),U.createElement(SC,{title:"Скрыть решебники",descr:"Везде, на всех устройствах",icon:U.createElement("i",{className:"fas fa-eye-slash"}),onChange:e=>s("stealth",e),checked:n.stealth}),U.createElement(EC,{title:"Настроить пароль",descr:"Приложение будет заблокировано паролем",icon:U.createElement("i",{className:"fas fa-lock"}),onClick:()=>i("security")}))),U.createElement(kC,{currentPanel:r,id:"security"},U.createElement(xC,{title:"Безопасность",onBack:()=>i("main"),backButton:!0}),U.createElement("div",{className:"settings-block"},U.createElement(EC,{title:"Выйти",icon:U.createElement("i",{className:"fas fa-sign-out-alt"}),onClick:function(){localStorage.user=null,window.location="./auth.html"}}))))}function CC(){const[e,n]=t.exports.useState(null),[r,i]=t.exports.useState(null),[s,o]=t.exports.useState(null),[a,l]=t.exports.useState(!1),[u,c]=t.exports.useState(!1),h=t.exports.useRef(null);return t.exports.useEffect((()=>{e&&(window.InstantView=new bC(e))}),[e]),t.exports.useEffect((()=>{s&&e&&!s.stealth&&(window.ReBot=new vC(e))}),[e,s]),t.exports.useEffect((()=>{if(nk(Yx.timetable,(e=>i(e.data()))),nk(Yx.settings,(e=>{const t=e.data(),n=document.documentElement;!e.metadata.hasPendingWrites&&localStorage.theme||(n.setAttribute("theme",t.theme),localStorage.setItem("theme",t.theme)),localStorage.setItem("stealth",t.stealth),t.inversion?n.style.removeProperty("--inv"):n.style.setProperty("--inv",0),o(t)})),navigator.onLine)wx(Wx).then((()=>{const e=function(e,t){const n=hc(e);n._isInitializationComplete||n._logger.debug(`A value was requested for key "${t}" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.`);const r=n._storageCache.getActiveConfig();return r&&void 0!==r[t]?new lx("remote",r[t]):n.defaultConfig&&void 0!==n.defaultConfig[t]?new lx("default",String(n.defaultConfig[t])):(n._logger.debug(`Returning static value for key "${t}". Define a default or remote value if this is unintentional.`),new lx("static"))}(Wx,"subjectsManifest").asString(),t=JSON.parse(e);localStorage.setItem("cachedManifest",e),n(t)}));else{const e=localStorage.cachedManifest,t=JSON.parse(e);n(t)}}),[]),U.createElement(Xx.Provider,{value:s},U.createElement("div",{ref:h,className:"main"},s&&U.createElement(pC,{id:"notebooks",settings:s,timetable:r,manifest:e,setSettingsOpen:l,setNotebooksOpen:c})),U.createElement(yC,{id:"settings",open:a,title:"Настройки",onClose:()=>l(!1),backgroundRef:h,side:"right"},U.createElement(TC,{changeSetting:function(e,t){s[e]=t,ek(Yx.settings,s,{merge:!0})},setSettingsOpen:l})))}EC.protoTypes={title:Ix.string.isRequired,descr:Ix.string,icon:Ix.element,onClick:Ix.func},SC.protoTypes={title:Ix.string.isRequired,descr:Ix.string,icon:Ix.element,checked:Ix.bool,onChange:Ix.func},xC.propTypes={backButton:Ix.bool,onBack:Ix.func,title:Ix.string},Gu.render(U.createElement(CC,null),document.getElementById("root")),window.ios=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,window.UI=mC,window.Security=wC,setTimeout((()=>{const e=document.querySelector(".loading");e.classList.add("unactive"),e.addEventListener("transitionend",(()=>{e.remove()}))}),window.ios?180:100)}();
