const appFiles=["style.css","bundle.js","/","index.html","static/lib/fontawesome/all.min.css","static/lib/fontawesome/fa-regular-400.woff2","static/icons/manifest-icon-192.png","static/lib/fontawesome/fa-solid-900.woff2","static/manifest.json","static/icons/google.svg","static/icons/resheba.svg","static/img/404.webp","static/img/bio.webp","static/img/engwb.webp","static/img/geo.webp","static/img/him.webp","static/img/phis.webp","favicon.ico"];async function cacheFirst(e){return await caches.match(e)??fetch(e)}self.addEventListener("install",function(e){e.waitUntil(runUpdater())}),self.addEventListener("fetch",e=>{var a=e.request,a=(new URL(a.url).origin==location.origin?cacheFirst:fetch)(a);e.respondWith(a)}),self.addEventListener("message",async e=>{e=e.data.type;console.info("SW: Recieved message: "+e),"run-updater"===e&&runUpdater()});const sendMessage=async e=>{const a=await self.clients.matchAll({includeUncontrolled:!0});a?.[0]&&a[0].postMessage(e),console.info("SW: Sended message: "+e.type)},needUpdate=async()=>{const e=new Headers;e.append("pragma","no-cache"),e.append("cache-control","no-cache");const a=await fetch("updates.json",{method:"GET",headers:e});var t=await a.json();const s=await caches.keys();return!s.includes(t.version)&&t.version},updateCache=async a=>{const e=await caches.keys();e.forEach(e=>{e!=a&&caches.delete(e)}),caches.open(a).then(e=>e.addAll(appFiles).then(()=>{console.info("SW: Updated to "+a)}))},runUpdater=async()=>{var e=await needUpdate();console.info("SW: "+(e?"Update found: "+e:"no update found")),e?(await updateCache(e),sendMessage({type:"update-complete"})):sendMessage({type:"no-update-found"})};