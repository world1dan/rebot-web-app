const appFiles=["bundle.js","/","index.html","static/img/bio.jpg","static/img/engwb.jpg","static/img/geo.jpg","static/img/him.jpg","static/img/phis.jpg","static/img/bel-izl.webp"];async function cacheFirst(e){return await caches.match(e)??fetch(e)}self.addEventListener("install",function(e){e.waitUntil(runUpdater())}),self.addEventListener("fetch",e=>{var a=e.request,a=(new URL(a.url).origin==location.origin?cacheFirst:fetch)(a);e.respondWith(a)}),self.addEventListener("message",async e=>{e=e.data.type;console.info("SW: Recieved message: "+e),"run-updater"===e&&runUpdater()});const sendMessage=async e=>{const a=await self.clients.matchAll({includeUncontrolled:!0});a?.[0]&&a[0].postMessage(e),console.info("SW: Sended message: "+e.type)},needUpdate=async()=>{const e=new Headers,a=(e.append("pragma","no-cache"),e.append("cache-control","no-cache"),await fetch("updates.json",{method:"GET",headers:e}));var t=await a.json();const n=await caches.keys();return!n.includes(t.version)&&t.version},updateCache=async a=>{const e=await caches.keys();e.forEach(e=>{e!=a&&caches.delete(e)}),caches.open(a).then(e=>e.addAll(appFiles).then(()=>{console.info("SW: Updated to "+a)}))},runUpdater=async()=>{var e=await needUpdate();console.info("SW: "+(e?"Update found: "+e:"no update found")),e?(await updateCache(e),sendMessage({type:"update-complete"})):sendMessage({type:"no-update-found"})};